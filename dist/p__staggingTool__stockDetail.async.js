(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{"71Y3":function(e,t,a){e.exports={stepCard:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-stepCard",stepBox:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-stepBox",stepItemWrapper:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-stepItemWrapper",active:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-active",stepItem:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-stepItem",date:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-date",title:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-title",available:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-available",stepDetail:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-stepDetail",header:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-header",rightBox:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-rightBox",dropdown:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-dropdown",item:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-item",right:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-right",iconBox:"antd-pro-pages-stagging-tool-stock-detail-components-step-detail-index-iconBox"}},QMZd:function(e,t,a){e.exports={stockInfo:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-stockInfo",rowItem:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-rowItem",singleRow:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-singleRow",colItem:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-colItem",right:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-right",input:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-input",label:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-label",linkInput:"antd-pro-pages-stagging-tool-stock-detail-components-stock-info-index-linkInput"}},"Ur/b":function(e,t,a){e.exports={stepInfoModal:"antd-pro-pages-stagging-tool-stock-detail-components-stock-file-modal-index-stepInfoModal",item:"antd-pro-pages-stagging-tool-stock-detail-components-stock-file-modal-index-item",label:"antd-pro-pages-stagging-tool-stock-detail-components-stock-file-modal-index-label",right:"antd-pro-pages-stagging-tool-stock-detail-components-stock-file-modal-index-right",iconBox:"antd-pro-pages-stagging-tool-stock-detail-components-stock-file-modal-index-iconBox"}},VrEL:function(e,t,a){e.exports={productInfo:"antd-pro-pages-stagging-tool-stock-detail-components-product-info-index-productInfo"}},Xa1Q:function(e,t,a){e.exports={staggingProductModal:"antd-pro-pages-stagging-tool-stock-detail-components-product-modal-index-staggingProductModal"}},kwRC:function(e,t,a){e.exports=a.p+"static/zip.c77eb504.svg"},v326:function(e,t,a){"use strict";a.r(t);a("DYRE");var n=a("zeV3"),i=(a("+L6B"),a("2/Rp")),l=(a("2qtc"),a("kLXV")),c=a("oBTY"),o=a("9og8"),r=a("tJVT"),s=a("WmNS"),d=a.n(s),p=a("q1tI"),u=a.n(p),g=a("9kvl"),m=a("Hx5s"),f=(a("IzEo"),a("bx4M")),b=(a("T2oS"),a("W9HT")),k=(a("miYZ"),a("tsqr")),y=a("wd/R"),h=a.n(y),E=a("QMZd"),S=a.n(E),v=[[{fieldName:"publishSubject",label:"\u53d1\u884c\u4e3b\u4f53",tips:"\u70b9\u51fb\u8df3\u8f6cIPO\u9996\u9875",isLink:1,linkKey:"issuersUrl",isSingleRow:!1},{fieldName:"issueStartDate",label:"\u53d1\u884c\u65e5\u671f",isSingleRow:!1}],[{fieldName:"preparedListExchange",label:"\u4e0a\u5e02\u573a\u6240",tips:"\u70b9\u51fb\u8df3\u8f6c\u4ea4\u6613\u6240\u9996\u9875",isLink:1,linkKey:"preparedListExchangeUrl",isSingleRow:!1},{fieldName:"leadUnderwriter",label:"\u4fdd\u8350\u673a\u6784",tips:"\u70b9\u51fb\u8df3\u8f6c\u4fdd\u8350\u673a\u6784\u6750\u6599\u63d0\u4ea4\u9875\u9762",isLink:1,linkKey:"website",isSingleRow:!1}],[{fieldName:"telephone",label:"\u8054\u7cfb\u65b9\u5f0f",isSingleRow:!0}],[{fieldName:"coleadUnderwriter",label:"\u526f\u4e3b\u627f",isSingleRow:!0}],[{fieldName:"applyMaxLP",label:"\u7533\u8d2d\u4e0a\u9650",isSingleRow:!1},{fieldName:"applyUnitLP",label:"\u6700\u5c0f\u7533\u8d2d\u89c4\u6a21",isSingleRow:!1}],[{fieldName:"industry",label:"\u6240\u5c5e\u884c\u4e1a",isSingleRow:!1},{fieldName:"applyCodeOnline",label:"\u7533\u8d2d\u4ee3\u7801",isSingleRow:!1}],[{fieldName:"offlineApplyPlan",label:"\u53d1\u884c\u89c4\u6a21",isSingleRow:!1},{fieldName:"minProgressivePricePI",label:"\u7533\u8d2d\u7ea7\u5dee",isSingleRow:!1}],[{fieldName:"offLineSXZCGMDate",label:"\u4ea7\u54c1\u89c4\u6a21\u65e5\u671f",isSingleRow:!1}]],w=function(e){var t=e.id,a=e.dispatch,n=e.formLoading,i=e.staggingStockDetail,l=i.stockDetail,c=Object(p["useState"])({}),o=Object(r["a"])(c,2),s=o[0],d=o[1],g=Object(p["useCallback"])((function(e){var t=e.isLink,a=e.linkKey;t&&(l[a]?window.open(l[a]):k["default"].info("\u94fe\u63a5\u4e0d\u5b58\u5728"))}),[l]);return Object(p["useEffect"])((function(){return a({type:"staggingStockDetail/getStockDetail",payload:{secuCode:t}}),function(){a({type:"staggingStockDetail/updateModelData",payload:{stockDetail:{}}})}}),[a,t]),Object(p["useEffect"])((function(){if(l&&l.secuCode===t){var e={};v.forEach((function(t){t.forEach((function(t){var a=t.fieldName;if("publishSubject"===a){var n=l.secuCode,i=l.securityAbbr;e[a]="".concat(n,"[").concat(i,"]")}else if("telephone"===a){var c=l.email,o=l.tel;e[a]="\u8054\u7cfb\u65b9\u5f0f\uff1a".concat(o||"","\uff1b\u90ae\u7bb1\uff1a").concat(c||"")}else if("priceRange"===a){var r=l.issueVolCeiling,s=l.issueVolFloor;e[a]="".concat(s||0,"-").concat(r||0)}else if("issueStartDate"===a||"offLineSXZCGMDate"===a){var d=l[a];e[a]=d?h()(d).format("YYYY-MM-DD"):""}else e[a]=l[a]}))})),d(e)}}),[t,l]),u.a.createElement(f["a"],{title:"\u6807\u7684\u4fe1\u606f",className:S.a.stockInfo},u.a.createElement(b["a"],{spinning:n},v.map((function(e,t){return u.a.createElement("div",{key:t,className:"".concat(S.a.rowItem," ").concat(e[0].isSingleRow?S.a.singleRow:"")},e.map((function(e,t){return u.a.createElement("div",{key:t,className:S.a.colItem},u.a.createElement("div",{className:S.a.label},e.label,"\uff1a"),u.a.createElement("div",{className:S.a.right},u.a.createElement("div",{className:"".concat(S.a.input," ").concat(1===e.isLink?S.a.linkInput:""),onClick:function(){return g(e)}},s[e.fieldName]),e.tips&&u.a.createElement("p",{className:S.a.tips},e.tips)))})))}))))},O=Object(g["b"])((function(e){var t=e.staggingStockDetail,a=e.loading;return{formLoading:a.effects["staggingStockDetail/getStockDetail"],staggingStockDetail:t}}))(w),x=(a("J+/v"),a("MoRW")),j=(a("14J3"),a("BMrR")),C=(a("jCWc"),a("kPKH")),I=a("k1fw"),D=a("UESt"),N=a("VTBJ"),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 747H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM165.7 621.8l39.7 39.5c3.1 3.1 8.2 3.1 11.3 0l234.7-233.9 97.6 97.3a32.11 32.11 0 0045.2 0l264.2-263.2c3.1-3.1 3.1-8.2 0-11.3l-39.7-39.6a8.03 8.03 0 00-11.3 0l-235.7 235-97.7-97.3a32.11 32.11 0 00-45.2 0L165.7 610.5a7.94 7.94 0 000 11.3z"}}]},name:"stock",theme:"outlined"},P=L,R=a("6VBw"),M=function(e,t){return p["createElement"](R["a"],Object(N["a"])(Object(N["a"])({},e),{},{ref:t,icon:P}))};M.displayName="StockOutlined";var A=p["forwardRef"](M),T=a("+n12"),U=a("vDqi"),Y=a.n(U),B=a("kwRC"),F=a.n(B),V=a("71Y3"),z=a.n(V),K={1:"1\u3001\u4e3b\u627f\u5e73\u53f0\u6750\u6599\u63d0\u4ea4",2:"2\u3001\u8be2\u4ef7\u63d0\u4ea4",3:"3\u3001\u53d1\u884c\u516c\u544a",4:"4\u3001\u53d1\u884c/\u7533\u8d2d",5:"5\u3001\u516c\u5e03\u4e2d\u7b7e",6:"6\u3001\u83b7\u914d/\u7f34\u6b3e",7:"7\u3001\u4e0a\u5e02"},q={1:!0,2:!0,3:!1,4:!0,5:!1,6:!0,7:!1},Q=function(e){var t=e.id,a=e.applyStatus,l=e.dispatch,s=e.staggingStockDetail,g=s.IPOMaterialList,m=s.stockDetail,b=Object(p["useState"])([]),y=Object(r["a"])(b,2),E=y[0],S=y[1],v=Object(p["useState"])(0),w=Object(r["a"])(v,2),O=w[0],N=w[1],L=Object(p["useState"])(0),P=Object(r["a"])(L,2),R=P[0],M=P[1],U=Object(p["useState"])(0),B=Object(r["a"])(U,2),V=B[0],Q=B[1],W=Object(p["useState"])(""),H=Object(r["a"])(W,2),_=H[0],X=H[1],J=Object(p["useState"])([]),Z=Object(r["a"])(J,2),G=(Z[0],Z[1]),$=Object(p["useState"])([]),ee=Object(r["a"])($,2),te=ee[0],ae=ee[1],ne=Object(p["useState"])({id:1,color:"#ff3f3f",text:"\u5f85\u63d0\u4ea4"}),ie=Object(r["a"])(ne,2),le=ie[0],ce=ie[1],oe=Object(p["useState"])(!1),re=Object(r["a"])(oe,2),se=re[0],de=re[1],pe=Object(p["useCallback"])(Object(o["a"])(d.a.mark((function e(){var a,n,i,c,o,r,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l({type:"staggingStockDetail/getStockIPOStepDetail",payload:{secuCode:t}});case 2:if(a=e.sent,1008===a.code){e.next=5;break}return e.abrupt("return");case 5:n=a.data||{},i=n.step,c=void 0===i?1:i,o=n.stepInfos,r=void 0===o?[]:o,s=r.map((function(e){var t=e.startDate,a=e.endDate,n=e.step,i=t?h()(t).format("MM/DD"):"",l=a?h()(a).format("MM/DD"):"";return Object(I["a"])(Object(I["a"])({},e),{},{date:i?"".concat(i).concat(l&&i!==l?"-".concat(l):""):"---",title:K[n],available:q[n]})})),M(c||1),N(8===c?1:c||1),S(s);case 10:case"end":return e.stop()}}),e)}))),[l,t]),ue=Object(p["useCallback"])((function(e){if(e&&e.fileUrl){var t=e.fileUrl;window.open(t)}else k["default"].info("\u6750\u6599\u4e0d\u5b58\u5728")}),[g]),ge=Object(p["useCallback"])(Object(o["a"])(d.a.mark((function e(){var a,n,i,c,o,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l({type:"staggingStockDetail/reGenAllAttachments",payload:{secuCode:t}});case 2:if(a=e.sent,1008===a.code){e.next=6;break}return k["default"].error(a.message),e.abrupt("return");case 6:return e.next=8,Y()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/staggingnew/apply/downloadMaterialPackage"),data:{secuCode:t},method:"post",responseType:"blob",headers:{"Content-Type":"application/json; application/octet-stream",tokenId:Object(T["l"])("vipAdminToken")||""}});case 8:n=e.sent;try{i=n.headers["content-disposition"].split(";")[1].split("filename*=utf-8''")[1],i=decodeURIComponent(i),c=new Blob([n.data]),o=document.createElement("a"),r=window.URL.createObjectURL(c),o.href=r,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)}catch(s){k["default"].error("\u751f\u6210\u6587\u4ef6\u5931\u8d25")}case 10:case"end":return e.stop()}}),e)}))),[l,t]),me=Object(p["useCallback"])((function(){var e=m.website;e?window.open(e):k["default"].info("\u627f\u9500\u5546\u7f51\u5740\u4e0d\u5b58\u5728\uff01")}),[m]),fe=Object(p["useCallback"])(function(){var e=Object(o["a"])(d.a.mark((function e(a,n){var i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return de(!1),e.next=3,l({type:"staggingStockDetail/finishCurrentIPOStep",payload:{secuCode:t,step:a,stepStatus:n}});case 3:i=e.sent,1008===i.code&&S(E.map((function(e){return e.step===a&&(e.stepStatus=n),e})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,t,E]);return Object(p["useEffect"])((function(){if(0!==E.length){var e=E[O-1],t=e.title,a=e.stepStatus,n=[{id:1,color:"#ff3f3f",text:"\u5f85\u63d0\u4ea4"},{id:2,color:"#fdc753",text:"\u5df2\u63d0\u4ea4"},{id:3,color:"#3d7fff",text:"\u5df2\u5b8c\u6210"}];de(!1),X(t),Q(a),ce(n.find((function(e){return e.id===a}))),ae(n.filter((function(e){return e.id!==a})))}}),[O,E]),Object(p["useEffect"])((function(){pe()}),[l,pe]),Object(p["useEffect"])((function(){l({type:"staggingStockDetail/getStaggingMaterials",payload:{secuCode:t}})}),[l,t]),Object(p["useEffect"])((function(){var e=[];Object(c["a"])(Array(4)).map((function(t,a){var n=g.find((function(e){return e.type===a+1})),i=n||{},l=i.fileName,c=void 0===l?"":l,o=i.fileUrl,r=void 0===o?"":o;e.push({fileUrl:r,fileName:c})})),G(e)}),[g]),u.a.createElement(f["a"],{title:"\u53c2\u4e0e\u4fe1\u606f",className:z.a.stepCard},u.a.createElement("div",{className:z.a.stepBox},E.map((function(e,t){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{key:e.step,className:"".concat(z.a.stepItemWrapper," ").concat(O===t+1?z.a.active:""," ")},u.a.createElement("div",{className:"".concat(z.a.stepItem," ").concat(O===t+1?z.a.active:""," ").concat(e.available?z.a.available:""),onClick:function(){return N(t+1)}},u.a.createElement("div",{className:z.a.date},e.date),u.a.createElement("div",{className:z.a.title},e.title))),6!==t&&u.a.createElement(D["a"],null))}))),O>=1&&1===a&&u.a.createElement("div",{className:z.a.stepDetail},u.a.createElement("div",{className:z.a.header},u.a.createElement("div",{className:z.a.title},_),[1,2,4,6].includes(O)&&0!==V&&R>=O&&u.a.createElement("div",{className:z.a.rightBox},u.a.createElement(i["a"],{style:{color:"#fff",backgroundColor:le.color,border:"none"},onClick:function(){return de(!se)}},le.text),se&&u.a.createElement("div",{className:z.a.dropdown},te.map((function(e,t){return u.a.createElement(i["a"],{key:t,style:{color:"#fff",backgroundColor:e.color,border:"none"},onClick:function(){return fe(O,e.id)}},e.text)}))))),1===O&&u.a.createElement(u.a.Fragment,null,u.a.createElement(j["a"],{justify:"center"},g.map((function(e,t){return(1===e.code||2===e.code||0===e.code&&e.hints.length>0)&&u.a.createElement(C["a"],{key:t,span:4},u.a.createElement("div",{className:z.a.item},u.a.createElement("div",{className:z.a.label},e.typeName,"\uff1a"),u.a.createElement("div",{className:z.a.right},u.a.createElement("div",{className:z.a.iconBox,onClick:function(){return ue(e)}},u.a.createElement("img",{src:F.a})),u.a.createElement("p",null,e.fileName))))}))),u.a.createElement(n["b"],{style:{justifyContent:"center",width:"100%",marginTop:"40px"}},u.a.createElement(i["a"],{type:"primary",onClick:ge},"\u91cd\u65b0\u751f\u6210\u6587\u4ef6"),u.a.createElement(i["a"],{type:"primary",onClick:me},"\u4e0a\u4f20\u627f\u9500\u5546"))),O>1&&u.a.createElement(x["a"],{icon:u.a.createElement(A,null),title:"\u656c\u8bf7\u671f\u5f85\uff01"})))},W=Object(g["b"])((function(e){var t=e.staggingStockDetail;return{staggingStockDetail:t}}))(Q),H=(a("qVdP"),a("jsC+")),_=(a("lUTK"),a("BvKs")),X=(a("iQDF"),a("+eQT")),J=(a("y8nQ"),a("Vl3Y")),Z=(a("OaEy"),a("2fM7")),G=a("55Ip"),$=a("tQHx"),ee=a("QWqi"),te=a("VrEL"),ae=a.n(te),ne=Z["a"].Option,ie={fileName:"",datas:[{sheetData:[],sheetName:"sheet",sheetFilter:["productName","lpInvestDetail","updateTime","capitalScale","proposedPrice","proposedShares","applyResult","initalShares","quota","brokerageFee","payInAmount","type","payInStatus","restrictedRate","restrictedShares","restrictedTime"],sheetHeader:["\u4ea7\u54c1\u540d\u79f0","\u51fa\u8d44\u65b9\u4fe1\u606f\u6982\u89c8\uff08X\u5c42/Y\u4e2a\uff09","\u51fa\u8d44\u65b9\u66f4\u65b0\u65e5\u671f","\u8d44\u4ea7\u89c4\u6a21\u6570\u636e","\u62df\u7533\u62a5\u4ef7\u683c","\u62df\u7533\u8d2d\u80a1\u6570","\u521d\u6b65\u914d\u552e\u80a1\u6570","\u7533\u62a5\u7ed3\u679c","\u83b7\u914d\u91d1\u989d","\u7ecf\u7eaa\u4f63\u91d1","\u5408\u8ba1\u5e94\u7f34","\u5206\u7c7b","\u7f34\u6b3e\u72b6\u6001","\u9650\u552e\u6bd4\u4f8b","\u9650\u552e\u80a1\u6570","\u9650\u552e\u65f6\u95f4"]}]},le=function(e){var t=e.dispatch,a=e.id,l=e.tableLoading,c=e.staggingStockDetail,s=e.onReChoose,g=c.applyProductPageNum,m=c.applyProductPageSize,b=c.applyProductList,y=c.applyProductTotal,E=c.searchForm,S=J["a"].useForm(),v=Object(r["a"])(S,1),w=v[0],O=Object(p["useState"])([]),x=Object(r["a"])(O,2),j=x[0],C=x[1],D=[{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",align:"center",fixed:"left",width:200,render:function(e,t){return u.a.createElement(G["a"],{to:"/staggingTool/product/detail/".concat(t.productId)},e)}},{title:"\u51fa\u8d44\u65b9\u4fe1\u606f\u6982\u89c8\uff08X\u5c42/Y\u4e2a\uff09",dataIndex:"lpInvestDetail",align:"center",width:200},{title:"\u51fa\u8d44\u65b9\u66f4\u65b0\u65e5\u671f",dataIndex:"updateTime",align:"center",width:200,render:function(e){return e?h()(e).format("YYYY-MM-DD"):""}},{title:"\u8d44\u4ea7\u89c4\u6a21\u6570\u636e",dataIndex:"capitalScale",align:"center",width:200},{title:"\u62df\u7533\u62a5\u4ef7\u683c",dataIndex:"proposedPrice",align:"center",width:200},{title:"\u62df\u7533\u8d2d\u80a1\u6570",dataIndex:"proposedShares",align:"center",width:200},{title:"\u7533\u62a5\u7ed3\u679c",dataIndex:"applyResult",align:"center",width:200},{title:"\u521d\u6b65\u914d\u552e\u80a1\u6570",dataIndex:"initalShares",align:"center",width:200},{title:"\u83b7\u914d\u91d1\u989d",dataIndex:"quota",align:"center",width:200},{title:"\u7ecf\u7eaa\u4f63\u91d1",dataIndex:"brokerageFee",align:"center",width:200},{title:"\u5408\u8ba1\u5e94\u7f34",dataIndex:"payInAmount",align:"center",width:200},{title:"\u5206\u7c7b",dataIndex:"type",align:"center",width:200},{title:"\u7f34\u6b3e\u72b6\u6001",dataIndex:"payInStatus",align:"center",render:function(e){return 1===e?"\u5df2\u7f34\u6b3e":"\u672a\u7f34\u6b3e"},width:200},{title:"\u9650\u552e\u6bd4\u4f8b",dataIndex:"restrictedRate",align:"center",width:200},{title:"\u9650\u552e\u80a1\u6570",dataIndex:"restrictedShares",align:"center",width:200},{title:"\u9650\u552e\u65f6\u95f4",dataIndex:"restrictedTime",align:"center",width:200}],N={selectedRowKeys:j,onChange:C},L=Object(p["useCallback"])((function(){var e=w.getFieldsValue(),a=e.productId,n=e.applyResult,i=e.updateTime,l={applyResult:n,productId:a,updateTime:i?h()(i).format("YYYY-MM-DD"):""};t({type:"staggingStockDetail/updateModelData",payload:{applyProductPageNum:1,searchForm:l}})}),[t,w]),P=Object(p["useCallback"])((function(){w.resetFields(),t({type:"staggingStockDetail/updateModelData",payload:{applyProductPageNum:1,searchForm:{}}})}),[t,w]),R=Object(p["useCallback"])(function(){var e=Object(o["a"])(d.a.mark((function e(n){var i,l,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=[],"selected"!==n){e.next=8;break}if(0!==j.length){e.next=5;break}return k["default"].info("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u884c\uff01"),e.abrupt("return");case 5:i=j.map((function(e){return b.find((function(t){return t.id===e}))})),e.next=13;break;case 8:return e.next=10,t({type:"staggingStockDetail/getAllApplyProductList",payload:{secuCode:a}});case 10:l=e.sent,c=l.data||{},i=c.list||[];case 13:i.forEach((function(e){e.updateTime=e.updateTime?h()(e.updateTime).format("YYYY-MM-DD"):"",e.payInStatus=1===e.payInStatus?"\u5df2\u7f34\u6b3e":"\u672a\u7f34\u6b3e"})),ie.fileName="".concat((new Date).getTime()),ie.datas[0].sheetData=i,Object(T["e"])(ie);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,t,a,j]),M=Object(p["useCallback"])((function(e){t({type:"staggingStockDetail/updateModelData",payload:{applyProductPageNum:e.current,applyProductPageSize:e.pageSize}})}),[t]);return Object(p["useEffect"])((function(){t({type:"staggingStockDetail/getApplyProductList",payload:Object(I["a"])({secuCode:a,pageNum:g,pageSize:m},E)})}),[g,m,t,a,E]),u.a.createElement(f["a"],{title:"\u914d\u552e\u5bf9\u8c61\u4fe1\u606f\u8868",className:ae.a.productInfo},u.a.createElement(J["a"],{form:w,name:"search_product_form",layout:"inline",onFinish:L},u.a.createElement(ee["b"],{params:"productId",value:"productId",label:"productName",formItemLayout:{style:{width:300}},formLabel:"\u4ea7\u54c1\u540d\u79f0"}),u.a.createElement(J["a"].Item,{label:"\u7533\u62a5\u7ed3\u679c",name:"applyResult"},u.a.createElement(Z["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"200px"},allowClear:!0},u.a.createElement(ne,{value:1},"\u4e2d\u7b7e"),u.a.createElement(ne,{value:0},"\u672a\u4e2d\u7b7e"))),u.a.createElement(J["a"].Item,{label:"\u66f4\u65b0\u65e5\u671f",name:"updateTime"},u.a.createElement(X["a"],{style:{width:"200px"}})),u.a.createElement(J["a"].Item,null,u.a.createElement(n["b"],null,u.a.createElement(i["a"],{type:"primary",onClick:s},"\u4fee\u6539\u53c2\u4e0e\u4ea7\u54c1"),u.a.createElement(H["a"],{placement:"bottomLeft",overlay:function(){return u.a.createElement(_["a"],null,u.a.createElement(_["a"].Item,{onClick:function(){return R("selected")}},"\u5bfc\u51fa\u9009\u4e2d"),u.a.createElement(_["a"].Item,{onClick:function(){return R("all")}},"\u5bfc\u51fa\u5168\u90e8"))}},u.a.createElement(i["a"],null,"\u6279\u91cf\u5bfc\u51fa")),u.a.createElement(i["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),u.a.createElement(i["a"],{onClick:P},"\u91cd\u7f6e")))),u.a.createElement($["a"],{loading:l,columns:D,dataSource:b,total:y,pageNum:g,scroll:{x:"100%"},sticky:!0,onChange:M,rowKey:"id",rowSelection:N}))},ce=Object(g["b"])((function(e){var t=e.staggingStockDetail,a=e.loading;return{staggingStockDetail:t,tableLoading:a.effects["staggingStockDetail/getApplyProductList"]}}))(le),oe=(a("5NDa"),a("5rEg")),re=a("Xa1Q"),se=a.n(re),de=Z["a"].Option,pe=function(e){var t=e.dispatch,a=e.id,c=e.isVisible,s=e.onCancel,g=e.onConfirm,m=e.tableLoading,f=e.submitLoading,b=e.canApplyProductList,y=J["a"].useForm(),h=Object(r["a"])(y,1),E=h[0],S=Object(p["useState"])([]),v=Object(r["a"])(S,2),w=v[0],O=v[1],x=[{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",align:"center",width:200},{title:"\u8d44\u4ea7\u51c0\u503c",dataIndex:"capitalScale",align:"center"},{title:"\u53c2\u4e0e\u5e02\u573a",dataIndex:"lpInvestType ",align:"center",render:function(e){var t={1:"\u6caa\u5e02",2:"\u6df1\u5e02",3:"\u79d1\u521b",4:"\u521b\u4e1a"};return t[e]}},{title:"\u662f\u5426\u5177\u6709\u914d\u552e\u5bf9\u8c61\u8d44\u8d28",dataIndex:"canApplyNewShare",align:"center",render:function(e){return 1===e?"\u662f":"\u5426"}},{title:"\u914d\u552e\u5bf9\u8c61\u534f\u4f1a\u7f16\u7801",dataIndex:"productSacCode",align:"center"},{title:"\u914d\u552e\u5bf9\u8c61\u8bc1\u5238\u8d26\u6237\u53f7\uff08\u6caa\u5e02\uff09",dataIndex:"shanghaiStockExchangeAccount",align:"center"},{title:"\u914d\u552e\u5bf9\u8c61\u8bc1\u5238\u8d26\u6237\u53f7\uff08\u6df1\u5e02\uff09",dataIndex:"shenzhenStockExchangeAccount",align:"center"}],D={columnWidth:"32px",selectedRowKeys:w,onChange:O},N=Object(p["useCallback"])((function(){var e=E.getFieldsValue();t({type:"staggingStockDetail/getCanApplyProductList",payload:Object(I["a"])({secuCode:a},e)})}),[t,E,a]),L=Object(p["useCallback"])((function(){E.resetFields();var e=E.getFieldsValue();t({type:"staggingStockDetail/getCanApplyProductList",payload:Object(I["a"])({secuCode:a},e)})}),[t,E,a]),P=Object(p["useCallback"])(Object(o["a"])(d.a.mark((function e(){var n,i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=w,0!==n.length){e.next=4;break}return k["default"].warn("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u4ea7\u54c1\uff01"),e.abrupt("return");case 4:return e.next=6,t({type:"staggingStockDetail/generateStaggingMaterials",payload:{productIds:n,secuCode:a}});case 6:i=e.sent,1008===i.code?g(i.data):k["default"].error(i.message);case 8:case"end":return e.stop()}}),e)}))),[t,g,w,a]);return Object(p["useEffect"])((function(){var e=[];b.forEach((function(t){t.checked&&e.push(t.productId)})),O(e)}),[b]),Object(p["useEffect"])((function(){var e=E.getFieldsValue();c&&(t({type:"staggingStockDetail/getCanApplyProductList",payload:Object(I["a"])(Object(I["a"])({},e),{},{canApplyNewShare:e.canApplyNewShare||1,isShowSonProduct:e.isShowSonProduct||0,secuCode:a})}),setTimeout((function(){E.resetFields()}),100))}),[t,E,c,a]),u.a.createElement(l["a"],{className:se.a.staggingProductModal,visible:c,width:"70%",destroyOnClose:!0,onCancel:s,footer:[u.a.createElement(i["a"],{key:"submit",type:"primary",size:"large",loading:f,onClick:P},"\u53c2\u4e0e\u6253\u65b0\u5e76\u751f\u6210\u627f\u9500\u5546\u6587\u4ef6")]},u.a.createElement(J["a"],{form:E,initialValues:{canApplyNewShare:1,isShowSonProduct:0},onFinish:N},u.a.createElement(j["a"],{gutter:12},u.a.createElement(C["a"],{span:8},u.a.createElement(J["a"].Item,{label:"\u4ea7\u54c1\u540d\u79f0",name:"productName"},u.a.createElement(oe["a"],{placeholder:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u540d\u79f0"}))),u.a.createElement(C["a"],{span:8},u.a.createElement(J["a"].Item,{label:"\u662f\u5426\u5177\u6709\u914d\u552e\u5bf9\u8c61\u8d44\u8d28",name:"canApplyNewShare"},u.a.createElement(Z["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},allowClear:!0},u.a.createElement(de,{value:1},"\u662f"),u.a.createElement(de,{value:0},"\u5426")))),u.a.createElement(C["a"],{span:8},u.a.createElement(J["a"].Item,{label:"\u53c2\u4e0e\u5e02\u573a",name:"lpInvestType"},u.a.createElement(Z["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},allowClear:!0},u.a.createElement(de,{value:1},"\u6caa\u5e02"),u.a.createElement(de,{value:2},"\u6df1\u5e02"),u.a.createElement(de,{value:3},"\u6caa\u5e02\u3001\u6df1\u5e02")))),u.a.createElement(C["a"],{span:8},u.a.createElement(J["a"].Item,{name:"isShowSonProduct",label:"\u662f\u5426\u5c55\u793a\u5b50\u4ea7\u54c1"},u.a.createElement(Z["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},allowClear:!0},u.a.createElement(de,{value:1},"\u662f"),u.a.createElement(de,{value:0},"\u5426")))),u.a.createElement(C["a"],{span:8,offset:8},u.a.createElement(J["a"].Item,null,u.a.createElement(n["b"],null,u.a.createElement(i["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),u.a.createElement(i["a"],{onClick:L},"\u91cd\u7f6e")))))),u.a.createElement($["a"],{loading:m,columns:x,dataSource:b,scroll:{x:"100%",y:400},sticky:!0,rowKey:"productId",rowSelection:D,pagination:!1}))},ue=Object(g["b"])((function(e){var t=e.staggingStockDetail,a=e.loading;return{tableLoading:a.effects["staggingStockDetail/getCanApplyProductList"],submitLoading:a.effects["staggingStockDetail/generateStaggingMaterials"],canApplyProductList:t.canApplyProductList}}))(pe),ge=a("Ur/b"),me=a.n(ge),fe=function(e){var t=e.id,a=e.isVisible,n=e.onCancel,s=e.onConfirm,g=e.submitLoading,m=e.staggingStockDetail,f=m.IPOMaterialList,b=m.newIPOMaterialList,y=Object(p["useState"])([]),h=Object(r["a"])(y,2),E=(h[0],h[1]),S=Object(p["useCallback"])(Object(o["a"])(d.a.mark((function e(){var a,n,i,l,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/staggingnew/apply/downloadMaterialPackage"),data:{secuCode:t},method:"post",responseType:"blob",headers:{"Content-Type":"application/json; application/octet-stream",tokenId:Object(T["l"])("vipAdminToken")||""}});case 2:a=e.sent;try{n=a.headers["content-disposition"].split(";")[1].split("filename*=utf-8''")[1],n=decodeURIComponent(n),i=new Blob([a.data]),l=document.createElement("a"),c=window.URL.createObjectURL(i),l.href=c,l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(c),s()}catch(o){k["default"].error("\u751f\u6210\u6587\u4ef6\u5931\u8d25")}case 4:case"end":return e.stop()}}),e)}))),[s,t]),v=Object(p["useCallback"])((function(e){if(e&&e.fileUrl){var t=e.fileUrl;window.open(t)}else k["default"].info("\u6750\u6599\u4e0d\u5b58\u5728")}),[f]);Object(p["useEffect"])((function(){var e=[];Object(c["a"])(Array(4)).map((function(t,a){var n=f.find((function(e){return e.type===a+1})),i=n||{},l=i.fileName,c=void 0===l?"":l,o=i.fileUrl,r=void 0===o?"":o;e.push({fileUrl:r,fileName:c})})),E(e)}),[f]);var w=function(){var e=[];return Array.isArray(b)&&b.map((function(t){-2!==t.code&&e.push(t)})),e.length>0?u.a.createElement(i["a"],{key:"submit",type:"primary",size:"large",loading:g,onClick:S},"\u751f\u6210\u6587\u4ef6"):u.a.createElement(i["a"],{key:"submit",type:"primary",size:"large",disabled:!0},"\u65e0\u627f\u9500\u5546\u6a21\u677f")};return u.a.createElement(l["a"],{className:me.a.stepInfoModal,visible:a,width:"70%",destroyOnClose:!0,onCancel:n,footer:[w()]},u.a.createElement(j["a"],{justify:"center"},f.map((function(e,t){return(1===e.code||2===e.code||0===e.code&&e.hints.length>0)&&u.a.createElement(C["a"],{key:t,span:4},u.a.createElement("div",{className:me.a.item},u.a.createElement("div",{className:me.a.label},e.typeName,"\uff1a"),u.a.createElement("div",{className:me.a.right},u.a.createElement("div",{className:me.a.iconBox,onClick:function(){return v(e)}},u.a.createElement("img",{src:F.a})),u.a.createElement("p",null,e.fileName))))}))))},be=Object(g["b"])((function(e){var t=e.staggingStockDetail,a=e.loading;return{submitLoading:a.effects["staggingStockDetail/downloadAllMeterials"],staggingStockDetail:t}}))(fe),ke=function(e){var t=e.dispatch,a=e.match.params,s=e.staggingStockDetail,g=a.id,f=Object(p["useState"])(!1),b=Object(r["a"])(f,2),k=b[0],y=b[1],h=Object(p["useState"])(!1),E=Object(r["a"])(h,2),S=E[0],v=E[1],w=Object(p["useState"])(!1),x=Object(r["a"])(w,2),j=x[0],C=x[1],I=Object(p["useState"])([]),D=Object(r["a"])(I,2),N=D[0],L=D[1],P=Object(p["useState"])(3),R=Object(r["a"])(P,2),M=R[0],A=R[1],T=Object(p["useCallback"])((function(){t({type:"staggingStockDetail/getCanApplyProductList",payload:{secuCode:g}})}),[t,g]),U=Object(p["useCallback"])(Object(o["a"])(d.a.mark((function e(){var a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"staggingStockDetail/queryApplyBySecuCode",payload:{code:g}});case 2:a=e.sent,1008===a.code&&A(a.data);case 4:case"end":return e.stop()}}),e)}))),[t,T,g]),Y=Object(p["useCallback"])((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(!1),v(!0),t({type:"staggingStockDetail/getStaggingMaterials",payload:{secuCode:g}});var a=[];e.forEach((function(e){2!==e.code&&-2!==e.code&&a.push.apply(a,Object(c["a"])(e.hints))})),a.length>0&&setTimeout((function(){C(!0),L(a)}),100),U(),T()}),[t,U,T,g]),B=Object(p["useCallback"])((function(){v(!1)}),[]),F=function(){var e=s.stockDetail;e.remark&&l["a"].info({title:"\u63d0\u793a",okText:"\u786e\u5b9a",content:u.a.createElement("div",null,u.a.createElement("p",null,e.remark))})},V=Object(p["useCallback"])((function(){y(!0),T()}),[T]);return Object(p["useEffect"])((function(){U()}),[U]),u.a.createElement(m["a"],null,u.a.createElement(n["b"],{direction:"vertical",style:{width:"100%"}},u.a.createElement(O,{id:g}),u.a.createElement(W,{id:g,applyStatus:M}),1===M&&u.a.createElement(ce,{id:g,onReChoose:function(){V(),F()}}),2===M&&u.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},u.a.createElement(i["a"],{style:{display:"flex"},type:"primary",size:"large",onClick:function(){V(),F()}},"\u9009\u62e9\u53c2\u4e0e\u6253\u65b0\u4ea7\u54c1"))),u.a.createElement(ue,{id:g,isVisible:k,onCancel:function(){return y(!1)},onConfirm:Y}),u.a.createElement(be,{id:g,isVisible:S,onCancel:function(){return v(!1)},onConfirm:B}),u.a.createElement(l["a"],{title:"\u63d0\u793a",visible:j,destroyOnClose:!0,onCancel:function(){return C(!1)},onOk:function(){return C(!1)}},u.a.createElement("ul",{style:{padding:0}},N.map((function(e,t){return u.a.createElement("li",{key:t,style:{marginBottom:"12px"}},e)})))))};t["default"]=Object(g["b"])((function(e){var t=e.staggingStockDetail;return{staggingStockDetail:t}}))(ke)}}]);