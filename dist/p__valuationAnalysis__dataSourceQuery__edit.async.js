(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[92],{GTOy:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=t("0Owb"),l=(t("7Kak"),t("9yH6")),c=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),i=(t("+L6B"),t("2/Rp")),m=t("oBTY"),u=t("k1fw"),d=(t("miYZ"),t("tsqr")),o=t("9og8"),p=(t("y8nQ"),t("Vl3Y")),E=t("tJVT"),b=(t("5NDa"),t("5rEg")),f=(t("OaEy"),t("2fM7")),y=t("WmNS"),v=t.n(y),g=t("q1tI"),j=t.n(g),w=t("Hx5s"),O=t("9kvl"),h=t("wd/R"),I=t.n(h),x=t("WUpt"),N=t.n(x),T=t("e6g2"),k=f["a"].Option,q=b["a"].TextArea,W=function(e){var a=p["a"].useForm(),t=Object(E["a"])(a,1),y=t[0],h=Object(g["useState"])(""),x=Object(E["a"])(h,2),W=x[0],C=x[1],K=Object(g["useState"])(""),S=Object(E["a"])(K,2),B=S[0],R=S[1],Y=Object(g["useState"])([]),H=Object(E["a"])(Y,2),M=H[0],D=H[1],V=Object(g["useState"])({}),F=Object(E["a"])(V,2),J=F[0],A=F[1],P=Object(g["useState"])([]),U=Object(E["a"])(P,2),G=U[0],L=U[1],Q=Object(g["useState"])(!1),z=Object(E["a"])(Q,2),Z=z[0],X=z[1],$=Object(g["useState"])(!1),_=Object(E["a"])($,2),ee=_[0],ae=_[1],te=Object(g["useState"])(!1),ne=Object(E["a"])(te,2),re=ne[0],le=ne[1],ce={labelCol:{span:6},wrapperCol:{span:14}},se={sourceType:0,status:1,emailType:0},ie=function(){var e=Object(o["a"])(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.validateFields();case 2:for(t in a=e.sent,ae(!0),a)void 0===a[t]&&delete a[t],"createTime"!==t&&"updateTime"!==t||delete a[t];me(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(o["a"])(v.a.mark((function e(a){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["f"])(a);case 2:t=e.sent,1001===+t.code?(d["default"].success("\u4fdd\u5b58\u6210\u529f"),ae(!1),O["c"].push("/valuationAnalysis/dataSourceQuery")):(d["default"].warning(t.message),ae(!1));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(o["a"])(v.a.mark((function e(a){var t,n,r,l;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["c"])({id:a});case 2:t=e.sent,1001===+t.code&&(l=(null===(n=t.data)||void 0===n?void 0:n.dataSource)||{},l.createTime&&(l.createTime=I()(l.createTime).format("YYYY-MM-DD HH:mm:ss")),l.updateTime&&(l.updateTime=I()(l.updateTime).format("YYYY-MM-DD HH:mm:ss")),y.setFieldsValue(l),D((null===(r=t.data)||void 0===r?void 0:r.dataSourceRules)||[]));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),de=function(){var e=Object(o["a"])(v.a.mark((function e(){var a;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["e"])();case 2:a=e.sent,1001===+a.code&&L(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){X(!0)},pe=function(e){J.subjectKeyWord=e.target.value,A(Object(u["a"])({},J))},Ee=function(e){J.fromKeyWord=e.target.value,A(Object(u["a"])({},J))},be=function(e){J.templateId=e,A(Object(u["a"])({},J))},fe=function(){var e=Object(m["a"])(M);e.push(Object(u["a"])({},J)),D(e),A({})},ye=function(e,a){var t=e.target.value,n=Object(m["a"])(M),r=n[a];n.splice(a,1,Object(u["a"])(Object(u["a"])({},r),{},{subjectKeyWord:t})),D(n)},ve=function(e,a){var t=e.target.value,n=Object(m["a"])(M),r=n[a];n.splice(a,1,Object(u["a"])(Object(u["a"])({},r),{},{fromKeyWord:t})),D(n)},ge=function(e,a){var t=Object(m["a"])(M),n=t[a];t.splice(a,1,Object(u["a"])(Object(u["a"])({},n),{},{templateId:e})),D(t)},je=function(e){var a=Object(m["a"])(M);a.splice(e,1),D(a)},we=function(){var e=Object(o["a"])(v.a.mark((function e(){var a,t,n;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==M.length||0!==Object.keys(J).length){e.next=3;break}return d["default"].warning("\u8bf7\u6dfb\u52a0\u8bbe\u7f6e"),e.abrupt("return");case 3:if(J.subjectKeyWord&&M.push(Object(u["a"])({},J)),le(!0),a=M.every((function(e){return e.subjectKeyWord&&e.fromKeyWord&&e.templateId})),a){e.next=9;break}return d["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879"),e.abrupt("return");case 9:return M.forEach((function(e,a){e.order=a+1})),t={dataSourceId:B,entityList:M},e.next=13,Object(T["g"])(t);case 13:n=e.sent,1001===+n.code?(d["default"].success("\u4fdd\u5b58\u6210\u529f"),X(!1)):d["default"].warning(n.message),le(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g["useEffect"])((function(){var a=e.location.query.type;C(a),X("edit"===a);var t=e.match.params.id;R(t),t?ue(t):y.setFieldsValue({}),de()}),[]),j.a.createElement(w["a"],{title:"\u6570\u636e\u6e90\u8be6\u60c5"},j.a.createElement(n["a"],null,j.a.createElement(p["a"],Object(r["a"])({form:y},ce,{initialValues:se}),j.a.createElement("div",{className:N.a.boxItem},j.a.createElement("div",{className:N.a.topTitle},j.a.createElement("span",null,"\u57fa\u672c\u4fe1\u606f"),"edit"===W&&j.a.createElement(i["a"],{type:"primary",loading:ee,onClick:ie},"\u4fdd\u5b58")),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:8},j.a.createElement(p["a"].Item,{name:"id",label:"\u7f16\u53f7"},j.a.createElement(b["a"],{disabled:!0}))),j.a.createElement(s["a"],{span:8},j.a.createElement(p["a"].Item,{name:"sourceType",label:"\u7c7b\u578b",rules:[{required:!0}]},j.a.createElement(f["a"],{disabled:"edit"!==W},j.a.createElement(k,{value:0},"\u90ae\u7bb1")))),j.a.createElement(s["a"],{span:8},j.a.createElement(p["a"].Item,{name:"sourceName",label:"\u6570\u636e\u6e90\u540d\u79f0",rules:[{required:!0}]},j.a.createElement(b["a"],{disabled:"edit"!==W})))),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:8},j.a.createElement(p["a"].Item,{name:"status",label:"\u72b6\u6001",rules:[{required:!0}]},j.a.createElement(l["a"].Group,{disabled:"edit"!==W},j.a.createElement(l["a"],{value:1},"\u542f\u7528"),j.a.createElement(l["a"],{value:0},"\u7981\u7528")))),j.a.createElement(s["a"],{span:8},j.a.createElement(p["a"].Item,{name:"remark",label:"\u5907\u6ce8",rules:[{required:!0}]},j.a.createElement(q,{rows:3,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",disabled:"edit"!==W})))),j.a.createElement("div",{className:N.a.topTitle},"\u6570\u636e\u6e90\u914d\u7f6e  ",j.a.createElement("div",{style:{color:"red",marginRight:"30%"}},"\u5df2\u77e5\u817e\u8baf\u4f01\u4e1a\u90ae\u7bb1\u3001\u7f51\u6613\uff08163\uff09\u90ae\u7bb1\u5fc5\u987b\u624b\u52a8\u5f00\u542f\u90ae\u7bb1\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528\u6388\u6743\u5bc6\u7801\u767b\u5f55\u3002")),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"emailAccount",label:"\u6536\u4ef6\u90ae\u7bb1\u8d26\u53f7",rules:[{required:!0}]},j.a.createElement(b["a"],{disabled:"edit"!==W}))),j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"emailPassword",label:"\u6536\u4ef6\u90ae\u7bb1\u5bc6\u7801",rules:[{required:!0}]},j.a.createElement(b["a"].Password,{disabled:"edit"!==W})))),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"emailUrl",label:"\u90ae\u7bb1\u670d\u52a1\u5668",rules:[{required:!0}]},j.a.createElement(b["a"],{disabled:"edit"!==W}))),j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"emailType",label:"\u90ae\u7bb1\u7c7b\u578b",rules:[{required:!0}]},j.a.createElement(f["a"],{disabled:"edit"!==W},j.a.createElement(k,{value:0},"pop3"))))),j.a.createElement("div",{className:N.a.topTitle},"\u4fee\u6539\u4fe1\u606f"),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"createBy",label:"\u521b\u5efa\u4eba",rules:[{required:!0}]},j.a.createElement(b["a"],{disabled:"edit"!==W}))),j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"createTime",label:"\u521b\u5efa\u65f6\u95f4"},j.a.createElement(b["a"],{disabled:!0})))),j.a.createElement(c["a"],{gutter:24,className:N.a.wrap},j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"updateBy",label:"\u4fee\u6539\u4eba",rules:[{required:!0}]},j.a.createElement(b["a"],{disabled:"edit"!==W}))),j.a.createElement(s["a"],{span:12},j.a.createElement(p["a"].Item,{name:"updateTime",label:"\u4fee\u6539\u65f6\u95f4"},j.a.createElement(b["a"],{disabled:!0})))))),0!=B?j.a.createElement("div",{className:N.a.boxItem},j.a.createElement("div",{className:N.a.topTitle},j.a.createElement("span",null,"\u5339\u914d\u89c4\u5219\u8bbe\u7f6e"),Z?j.a.createElement(i["a"],{type:"primary",loading:re,onClick:we},"\u4fdd\u5b58"):j.a.createElement(i["a"],{type:"primary",onClick:oe},"\u7f16\u8f91")),M.map((function(e,a){return j.a.createElement(c["a"],{gutter:24,className:N.a.rowItem,key:a},j.a.createElement(s["a"],{span:8,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u90ae\u4ef6\u540d\u79f0\u5173\u952e\u8bcd\uff1a",j.a.createElement(b["a"],{style:{width:280},value:e.subjectKeyWord,onChange:function(e){return ye(e,a)},disabled:!Z})),j.a.createElement(s["a"],{span:7,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u53d1\u4ef6\u4eba\u5173\u952e\u8bcd\uff1a",j.a.createElement(b["a"],{style:{width:280},value:e.fromKeyWord,onChange:function(e){return ve(e,a)},disabled:!Z})),j.a.createElement(s["a"],{span:7,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u5bf9\u5e94\u6a21\u677f\uff1a",j.a.createElement(f["a"],{style:{width:280},value:e.templateId,onChange:function(e){return ge(e,a)},disabled:!Z},G.map((function(e){return j.a.createElement(k,{value:e.templateId,key:e.templateId},e.templateName)})))),Z&&j.a.createElement(s["a"],{span:2},j.a.createElement("span",{className:N.a.delBtn,onClick:function(){return je(a)}},"\u5220\u9664")))})),Z&&j.a.createElement(c["a"],{gutter:24,className:N.a.rowItem},j.a.createElement(s["a"],{span:8,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u90ae\u4ef6\u540d\u79f0\u5173\u952e\u8bcd\uff1a",j.a.createElement(b["a"],{style:{width:280},value:J.subjectKeyWord,onChange:pe})),j.a.createElement(s["a"],{span:7,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u53d1\u4ef6\u4eba\u5173\u952e\u8bcd\uff1a",j.a.createElement(b["a"],{style:{width:280},value:J.fromKeyWord,onChange:Ee})),j.a.createElement(s["a"],{span:7,className:N.a.colItem},j.a.createElement("span",{style:{color:"#ff4d4f",marginRight:4}},"*"),"\u5bf9\u5e94\u6a21\u677f\uff1a",j.a.createElement(f["a"],{style:{width:280},value:J.templateId,onChange:be},G.map((function(e){return j.a.createElement(k,{value:e.templateId,key:e.templateId},e.templateName)})))),j.a.createElement(s["a"],{span:2},j.a.createElement("span",{className:N.a.editBtn,onClick:fe},"\u63d2\u5165")))):null))};a["default"]=W},WUpt:function(e,a,t){e.exports={boxItem:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-boxItem",topTitle:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-topTitle",wrap:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-wrap",rowItem:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-rowItem",colItem:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-colItem",editBtn:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-editBtn",delBtn:"antd-pro-pages-valuation-analysis-data-source-query-edit-index-delBtn"}}}]);