(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{FNYr:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=a("0Owb"),s=(a("+L6B"),a("2/Rp")),o=(a("DYRE"),a("zeV3")),i=(a("sRBo"),a("kaz8")),l=(a("5NDa"),a("5rEg")),c=(a("BoS7"),a("Sdc0")),u=a("k1fw"),d=a("fWQN"),m=a("mtLc"),p=a("yKVA"),g=a("879j"),h=(a("/xke"),a("TeRw")),f=(a("y8nQ"),a("Vl3Y")),S=(a("OaEy"),a("2fM7")),y=a("9kvl"),b=a("q1tI"),I=a.n(b),E=a("Hx5s"),v=a("+n12"),w=a("gjeX"),O=a.n(w),N=a("nT/m"),k=a("Kz9L"),R=a.n(k),j=a("LvDl"),F=S["a"].Option,L=f["a"].Item,C=function(e,t,a,n,r){h["default"][e||"info"]({top:165,message:t,description:a,placement:n,duration:r||3})},q=function(e){Object(p["a"])(a,e);var t=Object(g["a"])(a);function a(){var e;Object(d["a"])(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),e.state={managerUserId:null,isDelete:!0,roleType:0,account:"",mobileNoteStatus:!1,emailNoteStatus:!1,mobile:"",email:"",userList:[],permissionList:[],roleIds:[],parentId:void 0,authoritySeeStatus:null,authorityStatus:null,isItOptional:!0,superiorList:[]},e.formRef=I.a.createRef(),e.getQuireMenuByRoleId=function(){var t=e.props.dispatch;t({type:"global/quireMenuByRoleId"})},e.onFinish=function(t){var a=e.props.dispatch,n=e.state.managerUserId,r=t.authoritySeeStatus,s=t.isDelete,o=t.mobileNoteStatus,i=t.emailNoteStatus,l=t.authorityStatus,c=Object(u["a"])(Object(u["a"])({managerUserId:n},t),{},{confirmPassword:"",password:t.password&&O()(t.password),isDelete:s?0:1,mobileNoteStatus:o?1:0,emailNoteStatus:i?1:0,authoritySeeStatus:r&&Number(r.toString())||0,authorityStatus:l&&Number(l.toString())||0});a({type:"accountInfo/saveAccountInfo",payload:c,callback:function(t){if(t&&1008===t.code)C("success","\u4fdd\u5b58\u6210\u529f",t.message,"topRight"),e.getQuireMenuByRoleId(),y["c"].push("/settings/account");else{var a=t.message||t.data||"\u4fdd\u5b58\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";C("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),a,"topRight")}}})},e.onValuesChange=function(t,a){for(var n in t)if("positionStatus"===n){if(t[n].includes("0"))return e.formRef.current.setFieldsValue({authorityStatus:[1]}),void e.setState({isItOptional:!0});if(t[n].includes("3"))return e.formRef.current.setFieldsValue({authorityStatus:[1]}),void e.setState({isItOptional:!1});e.formRef.current.setFieldsValue({authorityStatus:[]}),e.setState({isItOptional:!0})}},e.filterPerson=function(e,t){return t.props.children.includes(e)},e}return Object(m["a"])(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.match.params;a({type:"accountInfo/quireRoleList",callback:function(t){1008===t.code&&t.data&&e.setState({permissionList:t.data})}}),a({type:"accountInfo/querySelectAllUser",payload:{pageSize:9999999},callback:function(t){1008===t.code&&t.data&&e.setState({superiorList:t.data.list})}});var r="";r=n.account,"0"!==r&&(this.setState({managerUserId:r}),a({type:"accountInfo/getAccountInfo",payload:{managerUserId:r},callback:function(t){if(t&&1008===t.code){var a=t.data||{};e.setState(Object(u["a"])(Object(u["a"])({},a),{},{isDelete:0===a.isDelete,mobileNoteStatus:1===a.mobileNoteStatus,emailNoteStatus:1===a.emailNoteStatus,authoritySeeStatus:[a.authoritySeeStatus],authorityStatus:[a.authorityStatus],parentId:a.parentId,roleType:a.roleType,roleIds:a.roleIds,isItOptional:"3"!==a.positionStatus}))}else{var n=t.message||t.data||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";C("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),n,"topRight")}}}))}},{key:"render",value:function(){var e=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["121000"]||{},t=e.authEdit,a=this.props,u=a.submitting,d=a.loading,m=this.state,p=m.permissionList,g=m.parentId,h=m.roleIds,y=m.positionStatus,b=(m.userList,m.managerUserId),w=m.isDelete,O=m.roleType,k=m.account,C=m.userName,q=m.mobileNoteStatus,P=m.emailNoteStatus,D=m.mobile,V=m.email,T=m.authoritySeeStatus,x=m.authorityStatus,M=m.superiorList,A=m.isItOptional,U={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},z={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return I.a.createElement(E["a"],{title:b?"\u7f16\u8f91\u8d26\u53f7":"\u65b0\u5efa\u8d26\u53f7"},I.a.createElement(n["a"],{bordered:!1,loading:d,className:R.a.noticeForm},I.a.createElement(f["a"],Object(r["a"])({},U,{hideRequiredMark:!0,style:{marginTop:8},ref:this.formRef,name:"accountEditForm",initialValues:{isDelete:w,roleType:O,account:k,userName:C,mobileNoteStatus:q,emailNoteStatus:P,mobile:D,email:V,positionStatus:y,parentId:g,roleIds:h,authoritySeeStatus:null===T?[1]:T,authorityStatus:null===x?[0]:x},onFinish:this.onFinish,onValuesChange:this.onValuesChange}),I.a.createElement(L,{label:"\u662f\u5426\u542f\u7528\u72b6\u6001",name:"isDelete",valuePropName:"checked"},I.a.createElement(c["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"})),I.a.createElement(L,{label:"\u8d26\u53f7\u540d\u79f0",name:"userName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7\u540d\u79f0"}]},I.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u540d\u79f0"})),I.a.createElement(L,{label:"\u767b\u5f55\u624b\u673a\u53f7",name:"mobile",rules:[{required:!0,pattern:/^1\d{10}$/,message:"\u8bf7\u8f93\u5165\u683c\u5f0f\u6b63\u786e\u7684\u624b\u673a\u53f7"}]},I.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})),I.a.createElement(L,{label:"\u767b\u5f55\u90ae\u7bb1",name:"email",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u767b\u5f55\u90ae\u7bb1"},{type:"email",message:"\u8bf7\u8f93\u5165\u767b\u5f55\u90ae\u7bb1"}]},I.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u90ae\u7bb1"})),I.a.createElement(L,{label:"\u65b0\u5bc6\u7801",name:"password",rules:[{required:!b,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\s\S]{8,20}$/,message:"\u5bc6\u7801\u957f\u5ea68~20\u4f4d\uff0c\u5fc5\u987b\u5305\u542b\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u548c\u6570\u5b57"}],hasFeedback:!0},I.a.createElement(l["a"].Password,{placeholder:"\u5bc6\u7801\u957f\u5ea68~20\u4f4d\uff0c\u5fc5\u987b\u5305\u542b\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u548c\u6570\u5b57"})),I.a.createElement(L,{label:"\u786e\u8ba4\u5bc6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!b,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,a){var n=t("password");return n&&a!==n?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")):Promise.resolve()}}}],hasFeedback:!0},I.a.createElement(l["a"].Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u7684\u5bc6\u7801"})),I.a.createElement(L,{label:"\u5c97\u4f4d",extra:"\u7ba1\u7406\u5458\u5c97\u4f4d\u62e5\u6709\u5168\u5ba2\u6237\u67e5\u770b\u6743\u9650\u4e0d\u53ef\u4fee\u6539\uff1b\u8fd0\u8425\u9ed8\u8ba4\u62e5\u6709\u5168\u5ba2\u6237\u67e5\u770b\u6743\u9650\u53ef\u4fee\u6539"},I.a.createElement(o["b"],null,I.a.createElement(L,{style:{width:180},name:"positionStatus"},I.a.createElement(S["a"],{placeholder:"\u8bf7\u9009\u62e9\u5c97\u4f4d",mode:"multiple",allowClear:!0},N["Q"].map((function(e){return I.a.createElement(F,{value:e.value,key:Object(v["q"])(5)},e.label)})))),I.a.createElement(L,{name:"authorityStatus"},I.a.createElement(i["a"].Group,{disabled:A},I.a.createElement(i["a"],{value:1},"\u662f\u5426\u62e5\u6709\u5168\u5ba2\u6237\u67e5\u770b\u6743\u9650"))))),I.a.createElement(L,{label:"\u83dc\u5355\u6743\u9650",name:"roleIds",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8d26\u53f7\u89d2\u8272"}]},I.a.createElement(S["a"],{placeholder:"\u8bf7\u9009\u62e9\u8d26\u53f7\u89d2\u8272\uff0c\u4e0d\u540c\u89d2\u8272\u5bf9\u5e94\u4e0d\u540c\u83dc\u5355\u548c\u67e5\u770b\u6743\u9650",mode:"multiple",showSearch:!0,allowClear:!0,filterOption:this.filterPerson},!Object(j["isEmpty"])(p)&&p.map((function(e){return I.a.createElement(F,{value:e.roleId,key:Object(v["q"])(5)},e.roleName)})))),I.a.createElement(f["a"].Item,{label:"\u6240\u5c5e\u4e0a\u7ea7"},I.a.createElement(o["b"],null,I.a.createElement(L,{name:"parentId"},I.a.createElement(S["a"],{placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u4e0a\u7ea7",showSearch:!0,allowClear:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:180}},!Object(j["isEmpty"])(M)&&M.map((function(e){return I.a.createElement(F,{key:Object(v["q"])(5),value:e.managerUserId},e.userName)})))),I.a.createElement(L,{name:"authoritySeeStatus"},I.a.createElement(i["a"].Group,null,I.a.createElement(i["a"],{value:1},"\u5141\u8bb8\u4e0a\u7ea7\u67e5\u770b\u4e0b\u7ea7\u6240\u5c5e\u5ba2\u6237"))))),I.a.createElement(L,Object(r["a"])({},z,{style:{marginTop:32}}),t&&I.a.createElement(s["a"],{type:"primary",htmlType:"submit",loading:u},"\u4fdd\u5b58")))))}}]),a}(b["Component"]);t["default"]=Object(y["b"])((function(e){var t=e.loading;return{loading:t.effects["accountInfo/getAccountInfo"],submitting:t.effects["accountInfo/saveAccountInfo"]}}))(q)},Kz9L:function(e,t,a){e.exports={card:"antd-pro-pages-account-settings-account-edit-style-card",heading:"antd-pro-pages-account-settings-account-edit-style-heading",steps:"antd-pro-pages-account-settings-account-edit-style-steps",errorIcon:"antd-pro-pages-account-settings-account-edit-style-errorIcon",anticon:"antd-pro-pages-account-settings-account-edit-style-anticon",errorPopover:"antd-pro-pages-account-settings-account-edit-style-errorPopover",errorListItem:"antd-pro-pages-account-settings-account-edit-style-errorListItem",errorField:"antd-pro-pages-account-settings-account-edit-style-errorField",editable:"antd-pro-pages-account-settings-account-edit-style-editable",advancedForm:"antd-pro-pages-account-settings-account-edit-style-advancedForm",optional:"antd-pro-pages-account-settings-account-edit-style-optional",noticeForm:"antd-pro-pages-account-settings-account-edit-style-noticeForm"}}}]);