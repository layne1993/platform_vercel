(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[79],{EpFQ:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),i=a("0Owb"),l=(a("14J3"),a("BMrR")),r=(a("jCWc"),a("kPKH")),s=(a("7Kak"),a("9yH6")),c=(a("+L6B"),a("2/Rp")),o=a("k1fw"),u=a("tJVT"),p=(a("/xke"),a("TeRw")),m=(a("y8nQ"),a("Vl3Y")),d=(a("5NDa"),a("5rEg")),f=a("q1tI"),k=a.n(f),g=a("Hx5s"),b=a("tQHx"),y=a("MuoO"),E=a("wd/R"),v=a.n(E),O=a("9kvl"),j=a("+n12"),h=a("MxP2"),x=a.n(h),N=d["a"].TextArea,w=m["a"].Item,C={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:8},sm:{span:12}}},S=function(e,t,a,n,i){p["default"][e||"info"]({message:t,description:a,placement:n,duration:i||3})},R=function(e){var t=Object(j["o"])(50200),a=t.authEdit,p=[{label:"\u4ea7\u54c1\u7c7b\u6295\u8d44\u8005",name:"productNeedRisk",key:Object(j["q"])(4),defaultValue:0},{label:"\u81ea\u7136\u4eba\u7c7b\u6295\u8d44\u8005",name:"peopleNeedRisk",key:Object(j["q"])(4),defaultValue:1},{label:"\u673a\u6784\u7c7b\u6295\u8d44\u8005",name:"institutionsNeedRisk",key:Object(j["q"])(4),defaultValue:1},{label:"vip\u7c7b\u6295\u8d44\u8005",name:"vipNeedRisk",key:Object(j["q"])(4),defaultValue:1}],d=[{title:"\u95ee\u5377\u7c7b\u578b",dataIndex:"askType",align:"center",render:function(e){return 1===e?"\u4e2a\u4eba\u98ce\u9669\u6d4b\u8bc4\u95ee\u5377":2===e||3===e?"\u516c\u53f8\u98ce\u9669\u6d4b\u8bc4\u95ee\u5377":"--"}},{title:"\u95ee\u5377\u7248\u672c",dataIndex:"versionNumber",align:"center"},{title:"\u6a21\u677f\u72b6\u6001",dataIndex:"isDelete",align:"center",render:function(e){return 0===e?"\u751f\u6548":1===e?"\u5931\u6548":void 0}},{title:"\u53d1\u5e03\u72b6\u6001",dataIndex:"publishStatus",align:"center",render:function(e){return 0===e?"\u7f16\u8f91":1===e?"\u5df2\u53d1\u5e03":void 0}},{title:"\u521b\u5efa\u4eba",dataIndex:"managerUserName",align:"center"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",align:"center",sorter:function(e,t){return e.createTime-t.createTime},render:function(e){return v()(e).format("YYYY-MM-DD")}},{title:"\u64cd\u4f5c",align:"center",render:function(e){return e.publishStatus?k.a.createElement("span",{className:x.a.operation,onClick:function(t){return H(e)}},"\u67e5\u770b"):k.a.createElement("div",null,a?k.a.createElement("span",{style:{display:a?"unset":"none"},className:x.a.operation,onClick:function(t){return H(e)}},"\u7f16\u8f91"):"--")}}],y={pageNum:1,pageSize:20},E=Object(f["useState"])({}),h=Object(u["a"])(E,2),R=h[0],M=h[1],T=Object(f["useState"])(y),I=Object(u["a"])(T,2),V=I[0],q=I[1],z=Object(f["useState"])(!1),B=Object(u["a"])(z,2),L=B[0],D=B[1],F=m["a"].useForm(),G=Object(u["a"])(F,1),Q=G[0],Y=function(e,t,a){q(Object(o["a"])(Object(o["a"])({},V),{},{pageNum:e.current,pageSize:e.pageSize}))},H=function(e){O["c"].push({pathname:"/risk/templateList/template/".concat(e.publishStatus?"view":"edit","/").concat(e.riskaskId),query:{askType:e.askType,showOperation:!0}})},J=function(e){O["c"].push({pathname:"/risk/templateList/template/edit/".concat(0),query:{askType:e,showOperation:!1}})},A=function(){var t=e.dispatch;t({type:"risk/getRiskQuestionnaireTemList",payload:V,callback:function(e){M(e)}})};Object(f["useEffect"])((function(){A()}),[V.pageNum,V.pageSize]);var K=function(){var t=e.dispatch;t({type:"risk/riskAskSettingDetail",callback:function(e){D(1===e.needMessage),p.map((function(t,a){e?null!==e[t.name]&&void 0!==e[t.name]||(e[t.name]=p[a].defaultValue):(e={},e[t.name]=p[a].defaultValue)})),Q.setFieldsValue(Object(o["a"])({},e))}})};Object(f["useEffect"])((function(){K()}),[]);var P=function(t){var a=e.dispatch;a({type:"risk/riskAskSettingUpdate",payload:Object(o["a"])(Object(o["a"])({},t),{},{vipNeedRisk:void 0===t.vipNeedRisk?0:t.vipNeedRisk,needMessage:void 0===t.needMessage?0:t.needMessage,noticeContent:void 0===t.noticeContent?"":t.noticeContent}),callback:function(e){console.log(e),1008===e.code?S("success","\u63d0\u9192","\u4fdd\u5b58\u6210\u529f"):(S("error","\u63d0\u9192",e.message||"\u4fdd\u5b58\u5931\u8d25\uff01"),K())}})},U=function(){K(),A()},W=function(e){e[0]&&"needMessage"===e[0].name.toString()&&(1===e[0].value?D(!0):D(!1))};return k.a.createElement(g["a"],{title:"\u98ce\u9669\u6d4b\u8bc4\u95ee\u5377\u6a21\u677f\u5217\u8868",extra:k.a.createElement(c["a"],{type:"primary",onClick:U},"\u5237\u65b0\u9875\u9762")},k.a.createElement(n["a"],{title:"\u6295\u8d44\u8005\u98ce\u9669\u6d4b\u8bc4\u95ee\u5377\u4f7f\u7528\u914d\u7f6e",style:{marginBottom:20}},k.a.createElement(m["a"],Object(i["a"])({form:Q,onFieldsChange:W},C,{onFinish:P}),p.map((function(e,t){return k.a.createElement(w,{name:e.name,key:e.key,label:e.label,initialValues:e.defaultValue,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]},k.a.createElement(s["a"].Group,null,k.a.createElement(s["a"],{value:1},"\u9700\u8981\u8fdb\u884c\u98ce\u9669\u6d4b\u8bc4"),k.a.createElement(s["a"],{value:0},"\u4e0d\u9700\u8981\u8fdb\u884c\u98ce\u9669\u6d4b\u8bc4\uff0c\u9ed8\u8ba4\u4e3aC5")))})),k.a.createElement(w,{label:"\u98ce\u6d4b\u5b8c\u6210\u540e\u77ed\u4fe1\u901a\u77e5",name:"needMessage",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]},k.a.createElement(s["a"].Group,null,k.a.createElement(s["a"],{value:0},"\u4e0d\u901a\u77e5"),k.a.createElement(s["a"],{value:1},"\u901a\u77e5"))),L&&k.a.createElement(w,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],label:" ",colon:!1,name:"noticeContent"},k.a.createElement(N,{autoSize:{minRows:4},placeholder:"\u8bf7\u8f93\u5165",maxLength:"140",showCount:!0})),k.a.createElement(l["a"],null,k.a.createElement(r["a"],{offset:20,span:4},k.a.createElement(w,null,k.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))))),k.a.createElement(n["a"],{title:"\u95ee\u5377\u914d\u7f6e\u5217\u8868"},k.a.createElement("div",{className:x.a.btnG,style:{display:a?"unset":"none"}},k.a.createElement(c["a"],{onClick:function(e){return J(1)},type:"primary",className:x.a.firstBtn},"\u65b0\u5efa\u81ea\u7136\u4eba\u95ee\u5377\u6a21\u677f"),k.a.createElement(c["a"],{onClick:function(e){return J(2)},type:"primary"},"\u65b0\u5efa\u673a\u6784\u95ee\u5377\u6a21\u677f")),k.a.createElement(b["a"],{columns:d,dataSource:R.data||[],total:R.total,pageNum:V.pageNum,rowKey:"riskaskId",scroll:{x:"100%"},onChange:function(e,t,a){return Y(e,t,a)},rowSelection:null,loading:e.loading})))};t["default"]=Object(y["connect"])((function(e){var t=e.risk,a=e.loading;return{risk:t,loading:a.effects["risk/getRiskQuestionnaireTemList"]}}))(R)},MxP2:function(e,t,a){e.exports={btnG:"antd-pro-pages-risk-template-list-styles-btnG",firstBtn:"antd-pro-pages-risk-template-list-styles-firstBtn",operation:"antd-pro-pages-risk-template-list-styles-operation"}}}]);