(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{iBv7:function(e,a,t){e.exports={main:"antd-pro-pages-process-management-identify-online-style-main",headerList:"antd-pro-pages-process-management-identify-online-style-headerList",stepDescription:"antd-pro-pages-process-management-identify-online-style-stepDescription",pageHeader:"antd-pro-pages-process-management-identify-online-style-pageHeader",moreInfo:"antd-pro-pages-process-management-identify-online-style-moreInfo",ImgStyle:"antd-pro-pages-process-management-identify-online-style-ImgStyle"}},tgh9:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=t("fWQN"),l=t("mtLc"),o=t("tS8v"),c=t("yKVA"),i=t("879j"),s=t("0Owb"),m=(t("/xke"),t("TeRw")),d=(t("FJo9"),t("L41K")),u=t("Hx5s"),f=t("q1tI"),p=t.n(f),b=t("wd/R"),E=t.n(b),I=t("9kvl"),O=(t("5NDa"),t("5rEg")),g=t("tJVT"),N=(t("OaEy"),t("2fM7")),F=(t("y8nQ"),t("Vl3Y")),y=t("nT/m"),v=t("+n12"),h=t("ZW13"),D=t.n(h),w=F["a"].Item,k=N["a"].Option,L={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},j=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,scrollToFirstError:!0,name:"detail"},p.a.createElement(w,Object(s["a"])({},L,{label:"\u57fa\u672c\u4fe1\u606f\u8868\u786e\u8ba4"}),p.a.createElement(O["a"],{value:r.baseInfoConfirmTime&&E()(r.baseInfoConfirmTime).format("YYYY-MM-DD HH:mm:ss")||"--",disabled:!0})),p.a.createElement(w,Object(s["a"])({},L,{label:"\u6295\u8d44\u8005\u7c7b\u578b"}),p.a.createElement(N["a"],{value:r.investorType,disabled:!0,allowClear:!0},y["mb"].map((function(e){return p.a.createElement(k,{key:Object(v["q"])(4),value:e.value},e.label)})))),p.a.createElement(w,Object(s["a"])({},L,{label:"\u57fa\u672c\u4fe1\u606f\u8868\u6587\u6863",name:"identifiedProgress"}),p.a.createElement("a",{href:"".concat(r.baseInfoMarkUrl&&r.baseInfoMarkUrl),target:"_blank",rel:"noopener noreferrer"},r.baseInfoMarkUrl?p.a.createElement("img",{src:D.a,alt:""}):"\u6682\u65e0"))))},Y=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(j);j.defaultProps={flowData:{},params:{}};var T=t("iBv7"),S=t.n(T),M=F["a"].Item,x={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},_=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,scrollToFirstError:!0,name:"detail"},p.a.createElement(M,Object(s["a"])({},x,{label:"\u4e13\u4e1a\u6295\u8d44\u8005\u544a\u77e5\u4e66\u786e\u8ba4"}),p.a.createElement(O["a"],{disabled:!0,value:r.notifyBookConfirmTime&&E()(r.notifyBookConfirmTime).format("YYYY-MM-DD HH:mm:ss")||"--"})),p.a.createElement(M,Object(s["a"])({},x,{label:"\u4e13\u4e1a\u6295\u8d44\u8005\u544a\u77e5\u4e66\u64cd\u4f5c\u7559\u75d5"}),p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(r.notifyBookMarkUrl)},r.notifyBookMarkUrl?p.a.createElement("img",{src:D.a,className:S.a.ImgStyle,alt:""}):"\u6682\u65e0"))))},W=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(_);_.defaultProps={flowData:{},params:{}};var V=F["a"].Item,C=N["a"].Option,H={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},A=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,scrollToFirstError:!0,name:"detail"},p.a.createElement(V,Object(s["a"])({},H,{label:"\u7a0e\u6536\u8bc1\u660e\u6587\u4ef6\u786e\u8ba4"}),p.a.createElement(O["a"],{value:r.taxBookConfirmTime&&E()(r.taxBookConfirmTime).format("YYYY-MM-DD HH:mm:ss")||"--",disabled:!0})),p.a.createElement(V,Object(s["a"])({},H,{label:"\u7a0e\u6536\u7c7b\u578b"}),p.a.createElement(N["a"],{value:r.statementStatus,disabled:!0,allowClear:!0},y["K"].map((function(e){return p.a.createElement(C,{key:Object(v["q"])(4),value:e.value},e.label)})))),p.a.createElement(V,Object(s["a"])({},H,{label:"\u7a0e\u6536\u8bc1\u660e\u6587\u4ef6\u64cd\u4f5c\u7559\u75d5",name:"identifiedProgress"}),p.a.createElement("a",{href:"".concat(r.taxBookMarkUrl),target:"_blank",rel:"noopener noreferrer"},r.taxBookMarkUrl?p.a.createElement("img",{src:D.a,alt:""}):"\u6682\u65e0"))))},B=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(A);A.defaultProps={flowData:{},params:{}};O["a"].TextArea;var R=F["a"].Item,P={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},U=function(e){var a=Object(f["useState"])([]),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data.newMaterialAttachments||[])}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,name:"materialScience"},Array.isArray(r)&&r.map((function(e,a){return p.a.createElement(R,Object(s["a"])({key:a},P,{colon:!1,label:p.a.createElement("p",{style:{whiteSpace:"normal",wordBreak:"break-all",marginBottom:0}},e.title)}),e.fileList&&Array.isArray(e.fileList)&&e.fileList.map((function(e,a){return p.a.createElement("a",{key:a,target:"_blank",rel:"noopener noreferrer",href:"".concat(e.documentUrl)},p.a.createElement("img",{src:D.a,className:S.a.ImgStyle,alt:""}))}))||"\u6682\u65e0")}))))},q=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(U);U.defaultProps={flowData:{},params:{}};var J=F["a"].Item,z=(N["a"].Option,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}}),K=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,scrollToFirstError:!0,name:"detail"},p.a.createElement(J,Object(s["a"])({},z,{label:"\u5408\u683c\u6295\u8d44\u8005\u627f\u8bfa\u4e66\u786e\u8ba4"}),p.a.createElement(O["a"],{value:r.promiseBookConfirmTime&&E()(r.promiseBookConfirmTime).format("YYYY-MM-DD HH:mm:ss")||"--",disabled:!0})),p.a.createElement(J,Object(s["a"])({},z,{label:"\u5408\u683c\u6295\u8d44\u8005\u627f\u8bfa\u4e66\u64cd\u4f5c\u7559\u75d5",name:"identifiedProgress"}),p.a.createElement("a",{href:"".concat(r.promiseBookMarkUrl),target:"_blank",rel:"noopener noreferrer"},r.promiseBookMarkUrl?p.a.createElement("img",{src:D.a,alt:""}):"\u6682\u65e0"))))},G=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(K);K.defaultProps={flowData:{},params:{}};var Q=F["a"].Item,Z={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},X=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};return Object(f["useEffect"])(o,[]),p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{hideRequiredMark:!0,scrollToFirstError:!0,name:"detail"},r.signAttachments&&r.signAttachments.map((function(e){return p.a.createElement("div",{key:Object(v["q"])(5)},p.a.createElement("h3",null,e.documentName),p.a.createElement(Q,Object(s["a"])({},Z,{label:"\u7528\u5370\u65f6\u95f4"}),p.a.createElement(O["a"],{disabled:!0,value:e.sealTime&&E()(e.sealTime).format("YYYY-MM-DD HH:mm:ss")||"--"})),p.a.createElement(Q,Object(s["a"])({},Z,{label:"\u7528\u5370\u540e\u6587\u4ef6"}),p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(e.documentUrl)},e.documentUrl?p.a.createElement("img",{src:D.a,className:S.a.ImgStyle,alt:""}):"\u6682\u65e0")))}))))},$=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(X);X.defaultProps={flowData:{},params:{}};t("+L6B");var ee=t("2/Rp"),ae=(t("sRBo"),t("kaz8")),te=(t("7Kak"),t("9yH6")),ne=t("k1fw"),re=F["a"].Item,le=function(e,a,t,n,r){m["default"][e||"info"]({top:165,message:a,description:t,placement:n,duration:r||3})},oe=O["a"].TextArea,ce={display:"block",height:"30px",lineHeight:"30px"},ie={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},se={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},me=[{code:1,text:"\u6ee1\u8db3\uff0c\u7ed3\u675f"},{code:2,text:"\u6750\u6599\u6709\u8bef\uff0c\u6d41\u7a0b\u6253\u56de"},{code:3,text:"\u4e0d\u6ee1\u8db3\uff0c\u7ed3\u675f"}],de=function(e){var a=e.submitting,t=e.dispatch,r=Object(f["useState"])({}),l=Object(g["a"])(r,2),o=l[0],c=l[1],i=F["a"].useForm(),m=Object(g["a"])(i,1),d=m[0],u=Object(f["useState"])(!1),b=Object(g["a"])(u,2),y=b[0],v=b[1],h=Object(f["useState"])([]),w=Object(g["a"])(h,2),k=w[0],L=w[1],j=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["20100"]||{},Y=j.authEdit,T=function(e){d.setFieldsValue({checkStatus:e.checkStatus||1,materials:e.materials,saleIdList:e.saleIdList||[]})},M=function(){t({type:"global/selectAllAccountManager",callback:function(e){var a=e.code,t=e.data,n=void 0===t?[]:t;e.message;1008===a&&L(n)}})},x=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){if(1008===e.code&&e.data){var a=e.data||{};c(a),T(a),v(2===a.checkStatus)}}})};Object(f["useEffect"])((function(){x(),M()}),[]);var _=function(a){var t=e.dispatch;t({type:"IDENTIFYFLOW_ONLINE/saveAudit",payload:Object(ne["a"])(Object(ne["a"])({},a),{},{identifyFlowId:o.identifyFlowId}),callback:function(t){if(t&&1008===t.code&&t.data)o.checkStatus=a.checkStatus,e.getFlowInfo&&e.getFlowInfo(o.identifyFlowId),e.getFlowNodeDate&&e.getFlowNodeDate(o.identifyFlowId),e.getAllInfo&&e.getAllInfo(),le("success","\u4fdd\u5b58\u6210\u529f",t.message,"topRight");else{var n=t.message||t.data||"\u4fdd\u5b58\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";le("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),n,"topRight")}}})},W=function(){var e="\u8bf7\u8f93\u5165\u6750\u6599\u53cd\u9988\u610f\u89c1";le("warning","\u63d0\u9192",e,"topRight")},V=function(e){2===e.target.value?v(!0):v(!1)};return p.a.createElement(n["a"],{bordered:!1},p.a.createElement(F["a"],{name:"materialScience",onFinish:_,form:d,onFinishFailed:W,initialValues:{checkStatus:o.checkStatus||1,materials:o.checkStatus?o.materials:void 0}},o.signAttachments&&o.signAttachments.map((function(e,a){return p.a.createElement("div",{key:a},p.a.createElement(re,Object(s["a"])({},se,{label:"".concat(a+1,"\u3001").concat(e.documentName)}),p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(e.documentUrl)},e.documentUrl?p.a.createElement("img",{src:D.a,className:S.a.ImgStyle,alt:""}):"\u6682\u65e0")))})),p.a.createElement(re,Object(s["a"])({},se,{label:"\u6295\u8d44\u8005\u8fdb\u5165\u65f6\u95f4"}),p.a.createElement(O["a"],{disabled:!0,value:o.createTime&&E()(o.createTime).format("YYYY/MM/DD HH:mm:ss")})),p.a.createElement(re,Object(s["a"])({},se,{label:"\u5ba1\u6838\u7ed3\u679c",name:"checkStatus"}),p.a.createElement(te["a"].Group,{onChange:V,disabled:2===o.flowStatus||2===o.checkStatus},me.map((function(e){return p.a.createElement(te["a"],{key:e.code,style:ce,value:e.code},e.text)})))),y&&p.a.createElement(re,Object(s["a"])({},se,{label:"\u5ba1\u6838\u4e0d\u901a\u8fc7\u7684\u6b65\u9aa4",name:"signFlowFallbackNodes",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]}),p.a.createElement(ae["a"].Group,{disabled:2===o.flowStatus||2===o.checkStatus},Array.isArray(o.fallbackNodeList)&&o.fallbackNodeList.map((function(e){return p.a.createElement(ae["a"],{key:e.value,value:e.codeValue},e.codeText)})))),y?p.a.createElement(re,Object(s["a"])({},se,{label:"\u5ba1\u6838\u53cd\u9988",name:"materials",extra:"\u8bf7\u8f93\u5165\u5ba1\u6838\u53cd\u9988\u610f\u89c1",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5ba1\u6838\u53cd\u9988\u610f\u89c1"}]}),p.a.createElement(oe,{disabled:2===o.flowStatus||2===o.checkStatus})):null,p.a.createElement(F["a"].Item,Object(s["a"])({label:"\u5ba2\u6237\u7ecf\u7406",name:"saleIdList",rules:[{required:!1,message:"\u8bf7\u9009\u62e9"}]},se),p.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",mode:"multiple",allowClear:!0,disabled:2===o.flowStatus||2===o.checkStatus,showSearch:!0,filterOption:function(e,a){return a.children&&a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},Array.isArray(k)&&k.map((function(e){return p.a.createElement(N["a"].Option,{key:e.managerUserId,value:e.managerUserId+""},e.userName)})))),p.a.createElement(re,Object(s["a"])({label:"\u5ba2\u6237\u7ecf\u7406\u81ea\u52a8\u5206\u914d\u65f6\u95f4"},se),(null===o||void 0===o?void 0:o.managerDistribute)&&E()(o.managerDistribute).format("YYYY/MM/DD HH:mm")),p.a.createElement(re,Object(s["a"])({label:"\u6295\u8d44\u8005\u9884\u7ea6\u65f6\u95f4"},se),(null===o||void 0===o?void 0:o.createTime)&&E()(o.createTime).format("YYYY/MM/DD HH:mm")),p.a.createElement(re,Object(s["a"])({},ie,{style:{marginTop:32}}),Y&&p.a.createElement(ee["a"],{type:"primary",htmlType:"submit",loading:a,disabled:2===o.flowStatus||2===o.checkStatus},p.a.createElement(I["a"],{id:"formandbasic-form.form.save"})))))},ue=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE,t=e.loading;return{IDENTIFYFLOW_ONLINE:a,submitting:t.effects["IDENTIFYFLOW_ONLINE/saveAudit"]}}))(de);de.defaultProps={flowData:{},params:{}};t("J+/v");var fe=t("MoRW"),pe=(t("bP8k"),t("gFTJ")),be=function(e){var a=Object(f["useState"])({}),t=Object(g["a"])(a,2),r=t[0],l=t[1],o=function(){var a=e.dispatch,t=e.params,n=e.codeValue;a({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:t.identifyFlowId,codeValue:n},callback:function(e){1008===e.code&&e.data&&l(e.data||{})}})};Object(f["useEffect"])(o,[]);var c=p.a.createElement(pe["b"],{column:1,style:{position:"absolute",top:"100%",left:"50%",marginLeft:"-100px"}},p.a.createElement(pe["b"].Item,{label:"\u6295\u8d44\u8005\u540d\u79f0"},r.customerName),p.a.createElement(pe["b"].Item,{label:"\u53d1\u8d77\u65f6\u95f4"},r.createTime&&E()(r.createTime).format("YYYY-MM-DD HH:mm:ss")),p.a.createElement(pe["b"].Item,{label:"\u8017\u65f6"},Object(v["h"])((new Date(r.updateTime).getTime()-new Date(r.createTime).getTime())/1e3).data),p.a.createElement(pe["b"].Item,{label:"\u5b8c\u6210\u65f6\u95f4"},r.updateTime&&E()(r.updateTime).format("YYYY-MM-DD HH:mm:ss")));return p.a.createElement(n["a"],{bordered:!1,style:{height:"80vh"}},p.a.createElement(fe["a"],{status:1===r.checkStatus?"success":"error",title:p.a.createElement(p.a.Fragment,null,p.a.createElement("h3",null,"\u5408\u683c\u6295\u8d44\u8005\u8ba4\u5b9a\u5b8c\u6210"),p.a.createElement("h5",null,"\u6839\u636e\u63d0\u4f9b\u6750\u6599\uff0c\u8be5\u5ba2\u6237",1===r.checkStatus?null:"\u4e0d","\u6ee1\u8db3",1===r.investorType?"\u666e\u901a":"\u4e13\u4e1a","\u6295\u8d44\u8005\u8981\u6c42")),subTitle:p.a.createElement("div",{style:{position:"relative"}},c)}))},Ee=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE;return{IDENTIFYFLOW_ONLINE:a}}))(be);be.defaultProps={data:{},params:{}};var Ie=d["a"].Step,Oe=function(e,a,t,n,r){m["default"][e||"info"]({top:165,message:a,description:t,placement:n,duration:r||3})},ge=[{id:0,title:"\u586b\u5199\u57fa\u672c\u4fe1\u606f\u8868",code:1010,component:function(e){return p.a.createElement(Y,Object(s["a"])({codeValue:1010},e))}},{id:1,title:"\u4e13\u4e1a\u6295\u8d44\u8005\u544a\u77e5\u4e66",code:1020,component:function(e){return p.a.createElement(W,Object(s["a"])({codeValue:1020},e))}},{id:2,title:"\u7a0e\u6536\u6587\u4ef6\u8bc1\u660e",code:1030,component:function(e){return p.a.createElement(B,Object(s["a"])({codeValue:1030},e))}},{id:3,title:"\u8bc1\u660e\u6750\u6599",code:1040,component:function(e){return p.a.createElement(q,Object(s["a"])({codeValue:1040},e))}},{id:4,title:"\u5408\u683c\u6295\u8d44\u8005\u627f\u8bfa\u51fd",code:1050,component:function(e){return p.a.createElement(G,Object(s["a"])({codeValue:1050},e))}},{id:5,title:"\u7edf\u4e00\u7528\u5370",code:1060,component:function(e){return p.a.createElement($,Object(s["a"])({codeValue:1060},e))}},{id:6,title:"\u7ba1\u7406\u4eba\u5ba1\u6838",code:1070,component:function(e){return p.a.createElement(ue,Object(s["a"])({codeValue:1070},e))}},{id:7,title:"\u8ba4\u5b9a\u5b8c\u6210",code:1080,component:function(e){return p.a.createElement(Ee,Object(s["a"])({codeValue:1080},e))}}],Ne=function(e){Object(c["a"])(t,e);var a=Object(i["a"])(t);function t(e){var n;return Object(r["a"])(this,t),n=a.call(this,e),n.getAllInfo=function(){var e=n.props.match.params,a=Object(o["a"])(n);"0"!==e.identifyFlowId&&Promise.all([n.getFlowInfo(e.identifyFlowId),n.getFlowNodeDate(e.identifyFlowId)]).then((function(e){console.log(e),a.getNode(e[1]),a.getNextNode(e[0].codeValue,e[1])}))},n.getFlowInfo=function(e){return new Promise((function(a,t){var r=n.props.dispatch;r({type:"IDENTIFYFLOW_ONLINE/getDetail",payload:{identifyFlowId:e},callback:function(e){if(1008!==e.code){t({});var r=e.message||e.data||"\u6d41\u7a0b\u8be6\u60c5\u67e5\u8be2\u5931\u8d25\uff01";Oe("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(e.code,")"),r,"topRight")}else{var l=e.data||{};a(e.data),n.state.flowData=l}}})}))},n.getFlowNodeDate=function(e){return new Promise((function(a,t){var r=n.props.dispatch;r({type:"IDENTIFYFLOW_ONLINE/queryProcessByFlowId",payload:{flowId:e},callback:function(e){if(1008!==e.code){t([]);var r=e.message||e.data||"\u6d41\u7a0b\u8be6\u60c5\u67e5\u8be2\u5931\u8d25\uff01";Oe("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(e.code,")"),r,"topRight")}else a(e.data),n.setState({operationInfo:e.data||[]})}})}))},n.getNode=function(e){var a=[];ge.map((function(t){e.map((function(e){e.codeValue===t.code&&a.push(t)}))})),n.setState({nodeList:a})},n.getNextNode=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log(e,a);var t=0;a.map((function(a,n){a.codeValue===e&&(t=n)})),1060===e&&(t+=1),n.setState({doneStepIndex:t}),n.setSteps(t)},n.setSteps=function(e){if(e>n.state.doneStepIndex){var a="\u6682\u672a\u8fdb\u884c\u5230\u8be5\u6b65\u9aa4\uff0c\u65e0\u6cd5\u67e5\u770b";return Oe("warning","\u63d0\u793a\u9519\u8bef\u4fe1\u606f",a,"topRight")}n.setState({currentIndex:e})},n.renderDescription=function(e,a){var t=n.state.operationInfo;return t[e]&&0===t[e].isDelete?p.a.createElement("div",{style:{fontSize:12,textIndent:"-1em"}},p.a.createElement("div",null,[1070,1080].includes(a)?" \u5ba1\u6838\u5458:":" \u6295\u8d44\u8005:",t[e].userName||"--"),p.a.createElement("div",null,t[e].updateTime?E()(t[e].updateTime).format("YYYY-MM-DD HH:mm"):"")):p.a.createElement("div",{style:{fontSize:12}},p.a.createElement("div",null,"--\uff1a--"),p.a.createElement("div",null,"--"))},n.goback=function(){I["c"].go(-1)},n.state={currentIndex:0,operationInfo:[],flowData:{},nodeList:ge,doneStepIndex:0},n}return Object(l["a"])(t,[{key:"componentDidMount",value:function(){this.getAllInfo()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"IDENTIFYFLOW_ONLINE/resetModel"})}},{key:"render",value:function(){var e=this,a=this.state,t=a.currentIndex,r=a.nodeList,l=this.props,o=(l.loading,l.match.params),c=(l.IDENTIFYFLOW_ONLINE.flowData,r[t].component);return p.a.createElement(u["a"],{title:"\u5408\u683c\u6295\u8d44\u8005\u8ba4\u5b9a\u6d41\u7a0b\u8be6\u60c5",className:S.a.pageHeader},p.a.createElement(n["a"],{bordered:!1},p.a.createElement(d["a"],{current:t,onChange:this.setSteps,size:"small"},r.map((function(a,t){return p.a.createElement(Ie,{key:a.id,title:a.title,description:e.renderDescription(t,a.code)})}))),c({params:o,getAllInfo:this.getAllInfo,getFlowInfo:this.getFlowInfo,getFlowNodeDate:this.getFlowNodeDate})))}}]),t}(f["Component"]);a["default"]=Object(I["b"])((function(e){var a=e.IDENTIFYFLOW_ONLINE,t=e.loading;return{IDENTIFYFLOW_ONLINE:a,data:a.flowData,loading:t.effects["IDENTIFYFLOW_ONLINE/getDetail"]}}))(Ne)}}]);