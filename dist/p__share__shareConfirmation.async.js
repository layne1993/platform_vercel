(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[81],{"5UbY":function(e,t,a){e.exports={headerBox:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-headerBox",editicon:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-editicon",logoBox:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-logoBox",sign:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-sign",logoModal:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-logoModal",uploadBtn:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-uploadBtn",swatch:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-swatch",colorDiv:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-colorDiv",popover:"antd-pro-pages-share-share-confirmation-report-template-components-header-styles-popover"}},"5l2P":function(e,t,a){e.exports=a.p+"static/rsg.c75a1f7c.jpg"},RDKM:function(e,t,a){e.exports=a.p+"static/sh.6185959b.jpg"},Y12w:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ke}));a("IzEo");var n=a("bx4M"),r=a("fWQN"),l=a("mtLc"),o=a("yKVA"),c=a("879j"),s=a("0Owb"),i=a("q1tI"),d=a.n(i),m=a("Hx5s"),p=a("EmYw"),u=(a("2qtc"),a("kLXV")),g=(a("g9YV"),a("wCAj")),h=(a("14J3"),a("BMrR")),f=(a("+L6B"),a("2/Rp")),E=(a("OaEy"),a("2fM7")),b=(a("jCWc"),a("kPKH")),y=(a("y8nQ"),a("Vl3Y")),O=(a("5NDa"),a("5rEg")),v=(a("miYZ"),a("tsqr")),T=a("k1fw"),R=(a("DYRE"),a("zeV3")),C=(a("/xke"),a("TeRw")),I=a("9kvl"),M=a("nT/m"),j=a("+n12"),w=(a("5Dmo"),a("3S7+")),P=a("oBTY"),A=(a("LvDl"),a("VTBJ")),N={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z",fill:t}},{tag:"path",attrs:{d:"M472 732a40 40 0 1080 0 40 40 0 10-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5 0-39.3-17.2-76-48.4-103.3z",fill:e}}]}},name:"question-circle",theme:"twotone"},k=N,L=a("6VBw"),S=function(e,t){return i["createElement"](L["a"],Object(A["a"])(Object(A["a"])({},e),{},{ref:t,icon:k}))};S.displayName="QuestionCircleTwoTone";var x=i["forwardRef"](S),F=a("xGfz"),_=a("YDPL"),z=a.n(_),D=function(e,t,a,n,r){C["default"][e||"info"]({top:165,message:t,description:a,placement:n,duration:r||3})},B=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(e){var n;return Object(r["a"])(this,a),n=t.call(this,e),n.state={templateName:void 0,productIds:[],productList:[],fields:[void 0]},n.getProductList=function(){var e=n.props.dispatch;e({type:"COMFIRMATION_TEMPLATE/productList",callback:function(e){1008===e.code&&n.setState({productList:e.data})}})},n.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.props,a=t.dispatch,r=t.params,l=n.state,o=l.fields,c=l.templateName;if(c)if(0!==o.length){var s=n.getPreviewStr(o);if((!s||s.includes("\u6587\u4ef6\u540d\u79f0"))&&(s.includes("\u4ea7\u54c1\u540d\u79f0")||s.includes("\u6258\u7ba1\u673a\u6784\u5185\u90e8\u4ea7\u54c1\u4ee3\u7801"))&&s.includes("\u5ba2\u6237\u540d\u79f0")&&s.includes("\u65e5\u671f")){var i=o.filter((function(e){return e})),d=r.confirmFileTemplateId?"COMFIRMATION_TEMPLATE/edit":"COMFIRMATION_TEMPLATE/create";a({type:d,payload:Object(T["a"])(Object(T["a"])({},r),{},{templateName:c,titleFormat:i,enableStatus:e}),callback:function(e){if(1008===e.code)D("success","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),"\u4fdd\u5b58\u6210\u529f","topRight"),n.props.onOk();else{var t=e.message||e.data||"\u4fdd\u5b58\u5931\u8d25\uff01";D("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),t,"topRight")}}})}else v["default"].warning("\u4efd\u989d\u786e\u8ba4\u4e66\u6807\u9898\u5e94\u5305\u542b\u201c\u6587\u4ef6\u540d\u79f0\u3001\u4ea7\u54c1\u540d\u79f0\u6216\u6258\u7ba1\u673a\u6784\u5185\u90e8\u4ea7\u54c1\u4ee3\u7801\u3001\u5ba2\u6237\u540d\u79f0\u3001\u65e5\u671f\u201d\u56db\u4e2a\u5b57\u6bb5")}else v["default"].warning("\u6a21\u677f\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a");else v["default"].warning("\u6a21\u677f\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")},n.getDetail=function(){var e=n.props,t=e.dispatch,a=e.params;t({type:"COMFIRMATION_TEMPLATE/detail",payload:{confirmFileTemplateId:a.confirmFileTemplateId},callback:function(e){var t=e.data,a=e.code;if(1008===a)n.setState(Object(T["a"])(Object(T["a"])({},t),{},{fields:t.titleFormat}));else{var r=e.message||e.data||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";D("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),r,"topRight")}}})},n.add=function(){var e=n.state.fields,t=Object(P["a"])(e);t.push(void 0),n.setState({fields:t})},n.templateNameChange=function(e){n.setState({templateName:e.target.value})},n.onChange=function(e,t){var a=n.state.fields,r=Object(P["a"])(a);r[t]=e,n.setState({fields:r})},n.productChange=function(e){n.setState({productIds:e})},n.getPreviewStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return 0===e.length||e.map((function(e){e&&(t+=e)})),t},n.onClose=function(){n.props.onClose&&n.props.onClose()},n}return Object(l["a"])(a,[{key:"componentDidMount",value:function(){this.getProductList();var e=this.props.params;e.confirmFileTemplateId&&this.getDetail()}},{key:"render",value:function(){var e=this,t=this.state,a=t.templateName,n=t.fields,r=void 0===n?[]:n,l=this.props,o=l.loading,c=l.modalFlag;return d.a.createElement(u["a"],{title:a?"\u7f16\u8f91\u6a21\u677f":"\u6dfb\u52a0\u6a21\u677f",visible:c,footer:null,width:1200,onCancel:this.onClose,maskClosable:!1},d.a.createElement("div",null,d.a.createElement("p",{className:z.a.titleP},d.a.createElement("span",null,"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"),d.a.createElement(w["a"],{title:d.a.createElement("div",null,d.a.createElement("p",null,"\u586b\u5199\u89c4\u5219\uff1a"),d.a.createElement("p",null,"1\u3001\u8bbe\u7f6e\u8be5\u4efd\u989d\u786e\u8ba4\u4e66\u6a21\u677f\u540d\u79f0\uff0c\u540d\u79f0\u53ef\u4ee5\u968f\u610f\u8bbe\u7f6e\uff0c\u6bd4\u5982\u6a21\u677f1\u3001\u4e2d\u4fe1\u6258\u7ba1\u6a21\u677f\u7b49\u7b49\u3002\u4efd\u989d\u786e\u8ba4\u4e66\u6a21\u677f\u53ef\u4ee5\u590d\u7528\u3002"),d.a.createElement("p",null,"2\u3001\u8bbe\u7f6e\u4efd\u989d\u786e\u8ba4\u4e66\u6807\u9898\u89c4\u5219\u5339\u914d\u5230\u5bf9\u5e94\u7684\u5ba2\u6237-\u4ea7\u54c1\u4e0b\u3002\u4efd\u989d\u786e\u8ba4\u4e66\u6807\u9898\u5e94\u5305\u542b\u201c\u6587\u4ef6\u540d\u79f0\u3001\u4ea7\u54c1\u540d\u79f0\u3001\u5ba2\u6237\u540d\u79f0\u3001\u65e5\u671f\u201d\u56db\u4e2a\u5b57\u6bb5\uff0c\u6bcf\u79cd\u5b57\u6bb5\u4e2d\u95f4\u7528\u7279\u6b8a\u7b26\u53f7\u95f4\u9694\u5f00\u3002\u4e0b\u62c9\u9009\u62e9\u7279\u6b8a\u7b26\u53f7\u3002\u5982\u679c\u6807\u9898\u5185\u6709\u4e0d\u60f3\u8bfb\u53d6\u7684\u5b57\u6bb5\uff0c\u5219\u7528\u201c\u5360\u4f4d\u201d\u6765\u586b\u5145\u3002\u5b9e\u4f8b\u8bf4\u660e\u89c1\u9875\u9762\u4e0b\u65b9\u3002"))},d.a.createElement(x,null))),d.a.createElement("div",null,d.a.createElement(R["b"],null,d.a.createElement(O["a"],{value:a,style:{width:500},onChange:this.templateNameChange,placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0",allowClear:!0}))),d.a.createElement("p",{className:z.a.titleP},"\u8bf7\u586b\u5199\u4efd\u989d\u786e\u8ba4\u4e66\u6a21\u677f\u6807\u9898"),d.a.createElement(h["a"],null,r.map((function(t,a){return d.a.createElement(E["a"],{key:a,value:r[a],style:{width:140,marginRight:15,marginBottom:10},placeholder:"\u8bf7\u9009\u62e9",allowClear:!0,onChange:function(t,n){return e.onChange(t,a)}},M["C"].map((function(e,t){return d.a.createElement(E["a"].Option,{key:t,value:e.value},e.label)})))})),d.a.createElement(F["a"],{style:{fontSize:20,color:"#1890ff",lineHeight:"35px"},onClick:this.add})),d.a.createElement("p",{className:z.a.titleP},"\u9884\u89c8"),d.a.createElement("div",{className:z.a.titlePreview},this.getPreviewStr(r)),d.a.createElement("p",{className:z.a.titleP},"\u5339\u914d\u4ea7\u54c1"),d.a.createElement("div",{className:z.a.btnBox},d.a.createElement(f["a"],{type:"primary",style:{marginRight:15},onClick:function(){return e.create(1)},loading:o}," \u4fdd\u5b58"),d.a.createElement(f["a"],{style:{marginRight:15},onClick:this.onClose}," \u53d6\u6d88")),d.a.createElement("div",{className:z.a.explain},d.a.createElement("p",null,"\u5b9e\u4f8b\u8bf4\u660e"),d.a.createElement("p",null,"\u4f8b\u59821\uff1a\u4efd\u989d\u786e\u8ba4\u4e66\u6587\u4ef6\u540d\u79f0\u662f\uff1a\u300a\u6295\u8d44\u8005\u4ea4\u6613\u786e\u8ba4\u51fd19\u3010\u4ea7\u54c1\u6210\u7acb\u3011_\u3010SLU066\u3011\u6613\u79c1\u6155\u4e00\u53f7\u79c1\u52df\u8bc1\u5238\u6295\u8d44\u4ea7\u54c1_\u5f20\u4e09_20200907\u300b\uff0c\u4e0d\u60f3\u8981\u3010\u3011\u5185\u7684\u6587\u5b57\uff0c\u5e0c\u671b\u6587\u4ef6\u540d\u79f0\uff1a\u6295\u8d44\u8005\u4ea4\u6613\u786e\u8ba4\u51fd19\uff1b\u4ea7\u54c1\u540d\u79f0\uff1a\u6613\u79c1\u6155\u4e00\u53f7\u79c1\u52df\u8bc1\u5238\u6295\u8d44\u4ea7\u54c1\u914d\u7f6e\u5982\u4e0b\uff1a"),d.a.createElement("div",null,d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u6587\u4ef6\u540d\u79f0",size:"small"}," "),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u3010",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u5360\u4f4d",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u3011",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"_",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u3010",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u5360\u4f4d",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u3011",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"_",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u4ea7\u54c1\u540d\u79f0",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u5ba2\u6237\u540d\u79f0",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"_",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u65e5\u671f",size:"small"})),d.a.createElement("p",null,"\u6b64\u65f6\u8bfb\u53d6\u51fa\u6587\u4ef6\u540d\u79f0\uff1a\u6295\u8d44\u8005\u4ea4\u6613\u786e\u8ba4\u51fd19\uff1b\u4ea7\u54c1\u540d\u79f0\uff1a\u6613\u79c1\u6155\u4e00\u53f7\u79c1\u52df\u8bc1\u5238\u6295\u8d44\u4ea7\u54c1"),d.a.createElement("p",null,"\u4f8b\u59822\uff1a\u4efd\u989d\u786e\u8ba4\u4e66\u6587\u4ef6\u540d\u79f0\u662f\uff1a\u300a\u6613\u79c1\u6155\u4e00\u53f7\u79c1\u52df\u8bc1\u5238\u6295\u8d44\u4ea7\u54c1-\u7533\u8d2d\u786e\u8ba4\u5355-20200907-\u674e\u56db-330201199109010909\u300b\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a"),d.a.createElement("div",null,d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u4ea7\u54c1\u540d\u79f0",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"-",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u6587\u4ef6\u540d\u79f0",size:"small"}," "),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"-",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u65e5\u671f",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"-",size:"small"}),d.a.createElement(E["a"],{style:{marginRight:5},disabled:!0,placeholder:"\u5ba2\u6237\u540d\u79f0",size:"small"})),d.a.createElement("p",null,"\u6b64\u65f6\u8bfb\u53d6\u51fa\u6587\u4ef6\u540d\u79f0\uff1a\u7533\u8d2d\u786e\u8ba4\u5355\uff1b\u4ea7\u54c1\u540d\u79f0\uff1a\u6613\u79c1\u6155\u4e00\u53f7\u79c1\u52df\u8bc1\u5238\u6295\u8d44\u4ea7\u54c1"))))}}]),a}(i["PureComponent"]),K=Object(I["b"])((function(e){var t=e.loading;return{loading:t.effects["COMFIRMATION_TEMPLATE/edit"]}}))(B),U=a("wd/R"),Y=a.n(U),V="YYYY/MM/DD HH:mm",H=function(e,t,a,n,r){C["default"][e||"info"]({top:165,message:t,description:a,placement:n,duration:r||3})},q=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l)),e.state={selectedRowKeys:[],selectedRows:[],dataSource:{},userList:[],modalFlag:!1,productList:[],productIds:[],record:{},pageData:{pageNum:1,pageSize:20}},e.searchFormRef=d.a.createRef(),e.columns=[{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"templateName",ellipsis:!0,render:function(e){return e||"--"}},{title:"\u6807\u9898\u683c\u5f0f",dataIndex:"titleFormat",ellipsis:!0,render:function(e){return Array.isArray(e)?e.join(""):"--"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",ellipsis:!0,render:function(e){return e?Y()(e).format(V):"--"}},{title:"\u521b\u5efa\u4eba",dataIndex:"userName",ellipsis:!0,render:function(e){return e||"--"}},{title:"\u64cd\u4f5c",render:function(t){return e.props.authEdit&&d.a.createElement(R["b"],null,d.a.createElement("a",{onClick:function(){return e.edit(t)}},"\u7f16\u8f91"))}}],e.edit=function(t){e.state.record=t,e.crateTempate()},e.getData=function(){var t=e.props.dispatch,a=e.searchFormRef.current.getFieldsValue(),n=e.state.pageData;e.setState({selectedRowKeys:[],selectedRows:[]}),t({type:"COMFIRMATION_TEMPLATE/getListData",payload:Object(T["a"])(Object(T["a"])(Object(T["a"])({},a),n),{},{sortFiled:"createTime",sortType:"desc"}),callback:function(t){if(1008!==t.code){var a=t.message||t.data||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";H("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),a,"topRight")}else e.setState({dataSource:t.data||{}})}})},e.getManagerUser=function(){var t=e.props.dispatch;t({type:"COMFIRMATION_TEMPLATE/getManagerUser",payload:{pageSize:"00"},callback:function(t){var a=t.code,n=t.data,r=void 0===n?{}:n;if(1008===a)e.setState({userList:r.list||[]});else{var l=t.message||t.data||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";H("error","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),l,"topRight")}}})},e.resetSearch=function(){e.searchFormRef.current.resetFields();var t=1,a=20;e.setState({pageNum:t,pageSize:a,selectedRowKeys:[],selectedRows:[]}),e.getData({pageNum:t,pageSize:a})},e.onSelectChange=function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},e.doForbidden=function(t,a){var n=e.props.dispatch,r=[];t.products&&Array.isArray(t.products)&&t.products.map((function(e){r.push(e.productId)})),n({type:"COMFIRMATION_TEMPLATE/edit",payload:Object(T["a"])(Object(T["a"])({},t),{},{productIds:r,enableStatus:a}),callback:function(t){if(1008===t.code)1===a?H("success","\u542f\u7528","\u542f\u7528\u6210\u529f","topRight"):H("success","\u7981\u7528","\u7981\u7528\u6210\u529f","topRight"),e.getData();else{var n=t.message||t.data||"\u7981\u7528\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";H("error","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),n,"topRight")}}})},e.doMatchProduct=function(t){var a=e.props.dispatch,n=e.state.productIds;if(0===n.length)return v["default"].warning("\u5339\u914d\u4ea7\u54c1\u4e0d\u80fd\u4e3a\u7a7a\uff01");a({type:"COMFIRMATION_TEMPLATE/edit",payload:Object(T["a"])(Object(T["a"])({},t),{},{productIds:n}),callback:function(t){if(1008===t.code)H("success","\u5339\u914d","\u5339\u914d\u6210\u529f","topRight"),e.getData(),e.cancel();else{var a=t.message||t.data||"\u5339\u914d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";H("error","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t.code,"\uff09"),a,"topRight")}}})},e.getProductList=function(){var t=e.props.dispatch;t({type:"COMFIRMATION_TEMPLATE/productList",callback:function(t){1008===t.code&&e.setState({productList:t.data})}})},e.show=function(t){e.getProductList();var a=[];t.products&&Array.isArray(t.products)&&t.products.map((function(e){a.push(e.productId)})),e.setState({modalFlag:!0,productIds:a,record:t})},e.cancel=function(){e.setState({modalFlag:!1,productIds:[],record:{}})},e.productChange=function(t){e.setState({productIds:t})},e.onOk=function(){e.getData(),e.templateClose()},e.crateTempate=function(){e.setState({templateFlag:!0})},e.templateClose=function(){e.setState({record:{},templateFlag:!1})},e}return Object(l["a"])(a,[{key:"componentDidMount",value:function(){this.getData(),this.getManagerUser()}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,n=t.pageData,r=t.userList,l=void 0===r?[]:r,o=t.modalFlag,c=t.productList,s=t.productIds,i=t.record,m=t.templateFlag,p=this.props.loading;return d.a.createElement("div",null,d.a.createElement(y["a"],{ref:this.searchFormRef,onFinish:this.getData},d.a.createElement(h["a"],{gutter:[8,0]},d.a.createElement(b["a"],{span:6},d.a.createElement(y["a"].Item,{label:"\u6a21\u677f\u540d\u79f0",name:"templateName"},d.a.createElement(O["a"],{placeholder:"\u8bf7\u8f93\u5165\u6587\u4ef6\u540d\u79f0",allowClear:!0}))),d.a.createElement(b["a"],{span:6},d.a.createElement(y["a"].Item,{label:"\u521b\u5efa\u4eba",name:"userId"},d.a.createElement(E["a"],{allowClear:!0,showSearch:!0,placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22",optionFilterProp:"children",filterOption:function(e,t){return t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.map((function(e,t){return d.a.createElement(E["a"].Option,{key:t,value:e.managerUserId},e.userName)}))))),d.a.createElement(b["a"],{span:6,style:{textAlign:"right"}},d.a.createElement(y["a"].Item,null,d.a.createElement(f["a"],{type:"primary",htmlType:"submit",style:{marginRight:8}},"\u641c\u7d22"),d.a.createElement(f["a"],{onClick:this.resetSearch,style:{marginRight:8}},"\u91cd\u7f6e"))))),d.a.createElement(h["a"],{gutter:[0,10]},this.props.authEdit&&d.a.createElement(f["a"],{type:"primary",style:{marginRight:8},onClick:this.crateTempate},"\u6dfb\u52a0\u65b0\u7684\u6a21\u677f")),d.a.createElement(g["a"],{loading:p,rowKey:"confirmFileTemplateId",columns:this.columns,dataSource:a.list||[],pagination:Object(M["Sb"])(a.total,n.pageNum),onChange:function(t,a,n){return e._tableChange(t,a,n)}}),d.a.createElement(u["a"],{title:"\u5339\u914d\u4ea7\u54c1",visible:o,onOk:function(){return e.doMatchProduct(i)},onCancel:this.cancel,maskClosable:!1},d.a.createElement(E["a"],{filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:s,mode:"multiple",style:{width:400,marginRight:15},placeholder:"\u8bf7\u9009\u62e9",allowClear:!0,onChange:function(t,a){return e.productChange(t)}},c.map((function(e,t){return d.a.createElement(E["a"].Option,{key:t,value:e.productId},e.productName)})))),m&&d.a.createElement(K,{modalFlag:m,onClose:this.templateClose,onOk:this.onOk,params:i}))}}]),a}(i["PureComponent"]),J=Object(I["b"])((function(e){var t=e.loading;return{loading:t.effects["COMFIRMATION_TEMPLATE/getListData"]}}))(q),Z=(a("fu2T"),a("gK9i")),W=(a("Znn+"),a("ZTPi")),G=(a("AEkp"),a("T2oS"),a("W9HT")),Q=a("jrin"),X=a("tJVT"),$=(a("DZo9"),a("8z0m")),ee=a("9og8"),te=(a("tU7J"),a("wFql")),ae=a("WmNS"),ne=a.n(ae),re=a("5UbY"),le=a.n(re),oe=a("15kH"),ce=a("G3dp"),se=a("xvlK"),ie=a("Kbl5"),de=te["a"].Text,me=(te["a"].Title,u["a"].confirm,1048576),pe=function(e){var t=e.dispatch,a=e.COMFIRMATION_REPORT_TEMPLATE,n=a.headerInfo,r=Object(i["useState"])(n),l=Object(X["a"])(r,2),o=l[0],c=l[1],s=Object(i["useState"])(!1),m=Object(X["a"])(s,2),p=m[0],g=m[1],E=Object(i["useState"])(!1),y=Object(X["a"])(E,2),O=y[0],R=y[1],C=Object(i["useState"])(!1),I=Object(X["a"])(C,2),M=I[0],w=I[1],P=function(){!1===p?c(Object(T["a"])({},n)):(R(!1),w(!1)),g((function(e){return!e}))},A=function(e,t){var a="rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")");c("bg"===t?Object(T["a"])(Object(T["a"])({},o),{},{headerBgColor:a}):Object(T["a"])(Object(T["a"])({},o),{},{headerTextColor:a}))},N=function(e){"bg"===e?(R((function(e){return!e})),w(!1)):(w((function(e){return!e})),R(!1))},k=function(){t({type:"COMFIRMATION_REPORT_TEMPLATE/setHeaderInfo",payload:Object(T["a"])({},o)}),P()},L=function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){c(Object(T["a"])(Object(T["a"])({},o),{},{logoImg:t.result}))},t.onerror=function(e){console.log("Error: ",e)}},S=function(){var e=Object(ee["a"])(ne.a.mark((function e(t){return ne.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.size>me)){e.next=3;break}return v["default"].error("\u4e0a\u4f20\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc71M"),e.abrupt("return");case 3:L(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:le.a.headerBox,style:{background:n.headerBgColor}},d.a.createElement("div",{className:le.a.editicon},d.a.createElement(ce["a"],{onClick:P,className:le.a.operateIcon})),d.a.createElement("div",{className:le.a.logoBox},d.a.createElement("img",{src:n.logoImg||ie["c"],alt:"\u6682\u65e0logo"}),d.a.createElement("span",{className:le.a.sign,style:{color:n.headerTextColor}},"\u3010\u7ba1\u7406\u4eba\u540d\u79f0\u3011")),d.a.createElement(u["a"],{title:"\u62a5\u8868\u4fe1\u606f\u7f16\u8f91",visible:p,onCancel:P,onOk:k,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",width:400,className:le.a.logoModal,maskClosable:!1},d.a.createElement(h["a"],null,d.a.createElement(b["a"],{span:24},d.a.createElement(de,null,"\u4e0a\u4f20LOGO\uff1a"),d.a.createElement($["a"],{headers:{tokenId:Object(j["l"])("vipAdminToken")},beforeUpload:S,accept:".jpg,.png,.jpeg",action:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/attachments/uploadFile"),showUploadList:!1},o.logoImg?d.a.createElement("img",{src:o.logoImg,alt:"avatar",style:{width:"100%"}}):d.a.createElement(f["a"],null,d.a.createElement(se["a"],null))))),d.a.createElement(h["a"],null,d.a.createElement(b["a"],{span:24},d.a.createElement(de,null,"\u4e3b\u989c\u8272\uff1a"),d.a.createElement("div",{className:le.a.swatch,onClick:function(){return N("bg")}},d.a.createElement("div",{className:le.a.colorDiv,style:{backgroundColor:o.headerBgColor}})),O?d.a.createElement("div",{className:le.a.popover},d.a.createElement(oe["a"],{color:o.headerBgColor,onChange:function(e){return A(e,"bg")}})):null)),d.a.createElement(h["a"],null,d.a.createElement(b["a"],{span:24},d.a.createElement(de,null,"\u6587\u5b57\u989c\u8272\uff1a"),d.a.createElement("div",{className:le.a.swatch,onClick:function(){return N("word")}},d.a.createElement("div",{className:le.a.colorDiv,style:{background:o.headerTextColor}})),M?d.a.createElement("div",{className:le.a.popover},d.a.createElement(oe["a"],{color:o.headerTextColor,onChange:function(e){return A(e,"word")}})):null))))},ue=Object(I["b"])((function(e){var t=e.COMFIRMATION_REPORT_TEMPLATE;return{COMFIRMATION_REPORT_TEMPLATE:t}}))(pe),ge=a("qIZ8"),he=a.n(ge),fe=a("yEr3"),Ee=a.n(fe),be=(a("Lzxq"),W["a"].TabPane,Z["a"].Panel,function(e,t,a,n,r){C["default"][e||"info"]({message:t,description:a,placement:n,duration:r||3})}),ye=["bold","italic","underline","text-color","link","separator"],Oe=function(e){var t=e.imgUrl,a=e.dispatch,n=e.loading,r=void 0!==n&&n,l=e.jsonKey,o=e.btnLoading,c=e.COMFIRMATION_REPORT_TEMPLATE,s=e.defaultParams,m=c.templateInfo,p=c.headerInfo,u=Object(i["useState"])(s.title),g=Object(X["a"])(u,2),E=g[0],b=g[1],y=Object(i["useState"])(Ee.a.createEditorState(s.summary)),R=Object(X["a"])(y,2),C=R[0],M=R[1],j=function(e){return console.log(e,"setCustomize"),e.toHTML()},w=function(){a({type:"COMFIRMATION_REPORT_TEMPLATE/getTemplate",payload:{},callback:function(e){var t=e.code,n=e.data,r=e.message;if(1008===t)try{if(n&&n.length>0){var o=n[0],c=o[l]?JSON.parse(o[l]):{};b(c.title),M(Ee.a.createEditorState(c.summary)),a({type:"COMFIRMATION_REPORT_TEMPLATE/setHeaderInfo",payload:Object(T["a"])({},c)}),a({type:"COMFIRMATION_REPORT_TEMPLATE/setTmplateInfo",payload:Object(T["a"])({},o)})}}catch(i){console.log(i)}else{var s=r||n||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";be("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t,"\uff09"),s,"topRight")}}})};Object(i["useEffect"])(w,[]);var P=function(){E?C.isEmpty()?v["default"].warning("\u81ea\u5b9a\u4e49\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a!"):a({type:"COMFIRMATION_REPORT_TEMPLATE/update",payload:Object(T["a"])(Object(T["a"])({},m),{},Object(Q["a"])({},l,JSON.stringify(Object(T["a"])(Object(T["a"])({},p),{},{title:E,summary:C.toHTML()})))),callback:function(e){var t=e.code,a=e.data,n=e.message;if(1008===t)be("success","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t,"\uff09"),"\u4fdd\u5b58\u6210\u529f","topRight"),w();else{var r=n||a||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";be("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(t,"\uff09"),r,"topRight")}}}):v["default"].warning("\u6a21\u677f\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!")};return d.a.createElement("div",{className:he.a.templateBox},d.a.createElement(G["a"],{spinning:r},d.a.createElement(ue,null),d.a.createElement("div",{className:he.a.titleBox},d.a.createElement(O["a"],{placeholder:"\u8bf7\u8f93\u5165",value:E,onChange:function(e){return b(e.target.value)}})),d.a.createElement("div",{style:{height:250}},d.a.createElement(Ee.a,{value:C,style:{border:"1px solid #d9d9d9"},onChange:M,onSave:j,controls:ye,contentStyle:{height:200}})),d.a.createElement("img",{style:{width:"100%"},src:t,alt:""}),d.a.createElement("p",null,"\u4e13\u6b64\u786e\u8ba4"),d.a.createElement("p",{style:{textAlign:"end"}},"\u3010\u7ba1\u7406\u4eba\u540d\u79f0\u3011"),d.a.createElement("p",{style:{textAlign:"end"}},"\uff08\u76d6\u7ae0\uff09"),d.a.createElement("p",{style:{textAlign:"end"}},"\u3010\u751f\u6210\u65e5\u671f\u3011"),d.a.createElement("div",{className:he.a.otherInfo},d.a.createElement("div",{className:he.a.otherItem},d.a.createElement("div",null,"\u516c\u53f8\u8054\u7cfb\u7535\u8bdd\uff1a",d.a.createElement("span",null,"\u3010\u516c\u53f8\u8054\u7cfb\u7535\u8bdd\u3011")),d.a.createElement("div",null,"\u4f20\u771f\uff1a",d.a.createElement("span",null,"\u3010\u4f20\u771f\u3011")),d.a.createElement("div",null,"\u7f51\u5740\uff1a",d.a.createElement("span",null,"\u3010\u516c\u53f8\u7f51\u5740\u3011"))),d.a.createElement("div",{className:he.a.otherItem},d.a.createElement("div",null,"\u516c\u53f8\u5730\u5740\uff1a",d.a.createElement("span",null,"\u3010\u516c\u53f8\u5730\u5740\u3011")),d.a.createElement("div",null,"\u90ae\u7bb1\uff1a",d.a.createElement("span",null,"\u3010\u516c\u53f8\u8054\u7cfb\u90ae\u7bb1\u3011"))),d.a.createElement("a",{className:he.a.aLink,onClick:function(){return I["c"].push("/settings/company")}},"\u8865\u5145\u516c\u53f8\u4fe1\u606f")),d.a.createElement(h["a"],{justify:"center"}," ",d.a.createElement(f["a"],{type:"primary",loading:o,onClick:P},"\u4fdd\u5b58"))))},ve=Object(I["b"])((function(e){var t=e.COMFIRMATION_REPORT_TEMPLATE,a=e.loading;return{COMFIRMATION_REPORT_TEMPLATE:t,loading:a.effects["COMFIRMATION_REPORT_TEMPLATE/getTemplate"],btnLoading:a.effects["COMFIRMATION_REPORT_TEMPLATE/update"]}}))(Oe);Oe.defaultProps={params:{},closeModal:function(){},loading:!1,btnLoading:!1};var Te=a("RDKM"),Re=a.n(Te),Ce=a("5l2P"),Ie=a.n(Ce),Me=W["a"].TabPane,je=Z["a"].Panel,we=function(e){return d.a.createElement(n["a"],null,d.a.createElement(Z["a"],{defaultActiveKey:["1"]},d.a.createElement(je,{header:"\u6a21\u677f1",key:"1"},d.a.createElement(W["a"],{defaultActiveKey:"1",centered:!0},d.a.createElement(Me,{tab:"\u8ba4\u7533\u8d2d\u786e\u8ba4\u4e66",key:"1"},d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.a.createElement(ve,{imgUrl:Ie.a,jsonKey:"subscribeCustomizeSetting",defaultParams:{title:"\u57fa\u91d1\u4ea7\u54c1\u4efd\u989d\u786e\u8ba4\u4e66",summary:"<p>\u5c0a\u656c\u7684\u3010\u5ba2\u6237\u540d\u79f0\u3011</p><p><br/>\u60a8\u597d\uff0c\u611f\u8c22\u60a8\u8ba4/\u7533\u8d2d\u3010\u4ea7\u54c1\u5168\u79f0\u3011\uff0c\u60a8\u7684\u8ba4/\u7533\u8d2d\u8d44\u91d1\u5df2\u5212\u5165\u57fa\u91d1\u6258\u7ba1\u6237\uff0c\u57fa\u91d1\u7ba1\u7406\u4eba\u4e0e\u57fa\u91d1\u6258\u7ba1\u4eba\u73b0\u5c06\u8be5\u8ba4\u8d2d\u8d44\u91d1\u6309\u57fa\u91d1\u5408\u540c\u7ea6\u5b9a\uff0c\u786e\u8ba4\u60a8\u8ba4\u8d2d\u7684\u4efd\u989d\u5982\u4e0b\uff1a</p>"}}))),d.a.createElement(Me,{tab:"\u8d4e\u56de\u786e\u8ba4\u4e66",key:"2"},d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.a.createElement(ve,{imgUrl:Re.a,jsonKey:"redeemCustomizeSetting",defaultParams:{title:"\u57fa\u91d1\u4ea7\u54c1\u8d4e\u56de\u786e\u8ba4\u4e66",summary:"<p>\u5c0a\u656c\u7684\u3010\u5ba2\u6237\u540d\u79f0\u3011</p><p><br/>\u60a8\u597d\uff0c\u6839\u636e\u57fa\u91d1\u4efd\u989d\u6301\u6709\u4eba\u5411\u57fa\u91d1\u7ba1\u7406\u4eba\u63d0\u4ea4\u7684\u300a\u8d4e\u56de\u7533\u8bf7\u4e66\u300b\uff0c\u672c\u57fa\u91d1\u7684\u7ba1\u7406\u4eba\u4e0e\u6258\u7ba1\u4eba\u5c06\u4efd\u989d\u6301\u6709\u4eba\u7533\u8bf7\u8d4e\u56de\u5355\u4f4d\u4efd\u6570\u6309\u7167\u57fa\u91d1\u5408\u540c\u76f8\u5173\u89c4\u5b9a\u4e88\u4ee5\u8d4e\u56de\uff0c\u5e76\u786e\u8ba4\u5df2\u5c06\u8d4e\u56de\u8d44\u91d1\u5411\u53d7\u76ca\u4eba\u6307\u5b9a\u7684\u8d26\u6237\u5212\u62e8\uff1a</p>"}})))))))},Pe=we;we.defaultProps={params:{},closeModal:function(){}};var Ae=[{key:"0",tab:"\u4efd\u989d\u786e\u8ba4\u4e66\u5217\u8868",permissionCode:10910,render:function(e){return d.a.createElement(p["a"],Object(s["a"])({},e,Object(j["o"])(10910)))}},{key:"1",tab:"\u4efd\u989d\u786e\u8ba4\u4e66\u81ea\u52a8\u751f\u6210\u6a21\u677f",permissionCode:10910,render:function(e){return d.a.createElement(Pe,Object(s["a"])({},e,Object(j["o"])(10910)))}},{key:"2",tab:"\u4efd\u989d\u786e\u8ba4\u4e66\u6279\u91cf\u4e0a\u4f20\u6587\u4ef6\u540d\u89e3\u6790\u89c4\u5219\u914d\u7f6e",permissionCode:10920,render:function(e){return d.a.createElement(J,Object(s["a"])({},e,Object(j["o"])(10920)))}}],Ne=Object(j["s"])(Ae),ke=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l)),e.state={tabKey:Ne.length>0?Ne[0]["key"]:"",tabIndex:0},e.tabChange=function(t){var a=e.state.tabIndex;Ne.map((function(e,n){e.key===t&&(a=n)})),e.setState({tabKey:t,tabIndex:a})},e}return Object(l["a"])(a,[{key:"render",value:function(){var e=this.state,t=e.tabKey,a=e.tabIndex,r=Ne.length>0?Ne[a].render:null;return d.a.createElement(m["a"],{title:"\u4efd\u989d\u786e\u8ba4\u4e66\u7ba1\u7406"},d.a.createElement(n["a"],{bordered:!1,tabList:Ne,activeTabKey:t+"",onTabChange:this.tabChange},r&&r({tabChange:this.tabChange})))}}]),a}(i["PureComponent"])},YDPL:function(e,t,a){e.exports={titleP:"antd-pro-pages-share-share-confirmation-crate-template-styles-titleP",titlePreview:"antd-pro-pages-share-share-confirmation-crate-template-styles-titlePreview",record:"antd-pro-pages-share-share-confirmation-crate-template-styles-record",btnBox:"antd-pro-pages-share-share-confirmation-crate-template-styles-btnBox",explain:"antd-pro-pages-share-share-confirmation-crate-template-styles-explain"}},qIZ8:function(e,t,a){e.exports={templateBox:"antd-pro-pages-share-share-confirmation-report-template-components-template-styles-templateBox",titleBox:"antd-pro-pages-share-share-confirmation-report-template-components-template-styles-titleBox",otherInfo:"antd-pro-pages-share-share-confirmation-report-template-components-template-styles-otherInfo",otherItem:"antd-pro-pages-share-share-confirmation-report-template-components-template-styles-otherItem",aLink:"antd-pro-pages-share-share-confirmation-report-template-components-template-styles-aLink"}}}]);