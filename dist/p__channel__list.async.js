(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{Nd7Z:function(e,a,t){"use strict";t.r(a);t("5Dmo");var n=t("3S7+"),l=(t("qVdP"),t("jsC+")),c=(t("lUTK"),t("BvKs")),r=t("0Owb"),i=(t("14J3"),t("BMrR")),o=(t("+L6B"),t("2/Rp")),u=(t("OaEy"),t("2fM7")),d=(t("jCWc"),t("kPKH")),m=(t("5NDa"),t("5rEg")),s=(t("DYRE"),t("zeV3")),p=t("k1fw"),h=(t("y8nQ"),t("Vl3Y")),b=t("tJVT"),f=(t("/xke"),t("TeRw")),g=t("q1tI"),E=t.n(g),O=t("Hx5s"),j=t("+n12"),y=t("8Skl"),w=t("tQHx"),C=t("Qnru"),N=t("wd/R"),v=t.n(N),k=t("nT/m"),x=t("55Ip"),I=t("9kvl"),T="YYYY-MM-DD HH:mm",L=function(e,a,t,n){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;f["default"][e||"info"]({message:a,description:t,placement:n,duration:l||3})},S={labelCol:{xs:{span:8},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16}}},A=function(e){var a=e.authEdit,t=e.authExport,f=e.loading,N=e.dispatch,A=e.updateChannelLoading,H=h["a"].useForm(),M=Object(b["a"])(H,1),F=M[0],R=Object(g["useState"])({list:[],total:0}),D=Object(b["a"])(R,2),V=D[0],Y=D[1],z=Object(g["useState"])({pageNum:1,pageSize:20}),K=Object(b["a"])(z,2),U=K[0],J=K[1],B=Object(g["useState"])([]),P=Object(b["a"])(B,2),Q=P[0],q=P[1],W=Object(g["useState"])(!1),Z=Object(b["a"])(W,2),G=Z[0],X=Z[1],$=Object(g["useState"])([]),_=Object(b["a"])($,2),ee=_[0],ae=_[1],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p["a"])({},U);N({type:"CHANNEL/getListData",payload:Object(p["a"])(Object(p["a"])({},Object(j["C"])(e)),{},{sortFiled:"createTime",sortType:"desc"}),callback:function(e){var a=e.code,t=e.data,n=e.message;if(1008===a)Y(t);else{var l=n||t||"\u67e5\u8be2\u5931\u8d25";L("error","\u63d0\u9192",l)}}})},ne=function(){N({type:"global/getManagerList",payload:{pageSize:99999,pageNum:1},callback:function(e){var a=e.code,t=e.data,n=void 0===t?{}:t,l=e.message;if(1008===a)ae(n.list||[]);else{var c=l||n||"\u83b7\u53d6\u6e20\u9053\u7ef4\u62a4\u4eba\u5931\u8d25\uff01";L("error","\u63d0\u9192",c)}}})};Object(g["useEffect"])(ne,[]),Object(g["useEffect"])(te,[]);var le=function(e){N({type:"CHANNEL/updateChannel",payload:{},callback:function(e){var a=e.code,t=e.data,n=e.message;if(1008===a)L("success","\u63d0\u9192","\u66f4\u65b0\u6210\u529f");else{var l=n||t||"\u66f4\u65b0\u5931\u8d25\uff01";L("error","\u63d0\u9192",l)}}})},ce=function(){F.resetFields(),q([]),te(Object(p["a"])(Object(p["a"])({},U),{},{pageNum:1})),J(Object(p["a"])(Object(p["a"])({},U),{},{pageNum:1}))},re=function(e,a,t){var n={pageNum:e.current,pageSize:e.pageSize};J(n),q([]),te(Object(p["a"])(Object(p["a"])({},F.getFieldsValue()),n))},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(j["g"])({method:"post",url:"/manager/channel/export",data:Object(p["a"])({},e),callback:function(e){var a=e.status,t=e.message,n=void 0===t?"\u5bfc\u51fa\u5931\u8d25\uff01":t;"success"===a&&L("success","\u63d0\u9192","\u5bfc\u51fa\u6210\u529f"),"error"===a&&L("error","\u63d0\u9192",n)}})},oe=[{title:"\u6e20\u9053\u540d\u79f0",dataIndex:"channelName",width:120,fixed:"left",render:function(e,a){return E.a.createElement(x["a"],{to:"/channel/list/detail/".concat(a.channelId,"?channelName=").concat(a.channelName)},e)}},{title:"\u6e20\u9053\u7c7b\u578b",dataIndex:"channelType",width:100,render:function(e){return Object(j["x"])(k["k"])[e]}},{title:"\u6e20\u9053\u7ef4\u62a4\u4eba",dataIndex:"channelMaintenance",width:150,ellipsis:!0,render:function(e){if(Array.isArray(ee)&&Array.isArray(e)){var a=[];return ee.map((function(t){e.includes(t.managerUserId)&&a.push(t.userName)})),E.a.createElement("p",{title:a.join(",")},a.join(","))}return"--"}},{title:"\u6e20\u9053\u7f16\u7801",dataIndex:"encodingRules",width:200,render:function(e){return e?E.a.createElement("p",{title:e},e):"--"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",width:200,render:function(e){return e?v()(e).format(T):"--"}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateTime",width:200,render:function(e){return e?v()(e).format(T):"--"}},{title:"\u5907\u6ce8",dataIndex:"note",width:200},{title:"\u64cd\u4f5c",width:200,render:function(e){return E.a.createElement(s["b"],null,E.a.createElement("a",{onClick:function(){return I["c"].push("/channel/list/detail/".concat(e.channelId,"?channelName=").concat(e.channelName))}},"\u7f16\u8f91"))}}],ue={selectedRowKeys:Q,onChange:q};return E.a.createElement(O["a"],{title:"\u6e20\u9053\u7ba1\u7406"},E.a.createElement("div",{style:{backgroundColor:"white",padding:15}},E.a.createElement(h["a"],Object(r["a"])({form:F},S,{onFinish:function(e){te(Object(p["a"])(Object(p["a"])(Object(p["a"])({},e),U),{},{pageNum:1})),J(Object(p["a"])(Object(p["a"])({},U),{},{pageNum:1}))}}),E.a.createElement(i["a"],{gutter:[8,0]},E.a.createElement(d["a"],{span:8},E.a.createElement(h["a"].Item,{label:"\u6e20\u9053\u540d\u79f0",name:"channelName"},E.a.createElement(m["a"],{placeholder:"\u8bf7\u8f93\u5165",allowClear:!0}))),E.a.createElement(d["a"],{span:8},E.a.createElement(h["a"].Item,{label:"\u6e20\u9053\u7c7b\u578b",name:"channelType"},E.a.createElement(u["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},k["k"].map((function(e){return E.a.createElement(u["a"].Option,{key:e.value,value:e.value},e.label)}))))),E.a.createElement(d["a"],{span:8},E.a.createElement(h["a"].Item,{label:"\u6e20\u9053\u7ef4\u62a4\u4eba",name:"channelMaintenance"},E.a.createElement(u["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0,showSearch:!0,mode:"multiple",filterOption:function(e,a){return a.children&&a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},ee.map((function(e){return E.a.createElement(u["a"].Option,{key:e.managerUserId,value:e.managerUserId},e.userName)}))))),E.a.createElement(d["a"],{span:8},E.a.createElement(h["a"].Item,{label:"\u5907\u6ce8",name:"note"},E.a.createElement(m["a"],{placeholder:"\u8bf7\u8f93\u5165",allowClear:!0}))),E.a.createElement(d["a"],{span:8,offset:8,style:{textAlign:"end"}},E.a.createElement(s["b"],null,E.a.createElement(o["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),E.a.createElement(o["a"],{htmlType:"reset",onClick:ce},"\u91cd\u7f6e"))))),E.a.createElement(i["a"],null,E.a.createElement(s["b"],null,a&&E.a.createElement(o["a"],{type:"primary",onClick:function(){return I["c"].push("/channel/list/detail/0")}},"\u65b0\u5efa"),t&&E.a.createElement(l["a"],{overlay:E.a.createElement(c["a"],null,E.a.createElement(c["a"].Item,{key:"1",disabled:0===Q.length,onClick:function(){return ie({channelIds:Q})}},"\u5bfc\u51fa\u9009\u4e2d"),E.a.createElement(c["a"].Item,{key:"0",onClick:function(){return ie(Object(p["a"])({},F.getFieldsValue()))}},"\u5bfc\u51fa\u5168\u90e8"))},E.a.createElement(o["a"],null,"\xa0\xa0\u6279\u91cf\u5bfc\u51fa",E.a.createElement(y["a"],null))),a&&E.a.createElement(n["a"],{title:"\u672c\u64cd\u4f5c\u9700\u8981\u91cd\u65b0\u5c06\u6240\u6709\u4ea4\u6613\u8bb0\u5f55\u8fdb\u884c\u5339\u914d\uff0c\u8f83\u6162\uff0c\u6210\u529f\u540e\u4f1a\u901a\u8fc7\u77ed\u4fe1\u63d0\u9192\u544a\u77e5"},E.a.createElement(o["a"],{loading:A,type:"primary",onClick:le},"\u5237\u65b0\u5339\u914d\uff08\u8bf7\u52a1\u5fc5\u5728\u65b0\u589e\u6216\u5173\u8054\u6e20\u9053\u540e\u70b9\u51fb\u672c\u6309\u94ae\uff01\uff09")))),E.a.createElement(w["a"],{loading:f,rowSelection:ue,columns:oe,dataSource:V.list||[],rowKey:"channelId",scroll:{x:"100%",scrollToFirstRowOnChange:!0},sticky:!0,total:V.total,pageNum:U.pageNum,onChange:re}),G&&E.a.createElement(C["a"],{accept:".xlsx, .xls",modalFlag:G,closeModal:function(){return X(!1)},templateUrl:"/manager/channel/downloadTemplate?&tokenId=".concat(Object(j["l"])("vipAdminToken")),templateMsg:"\u4e0b\u8f7d\u6a21\u677f",onOk:function(){te(Object(p["a"])(Object(p["a"])({},U),{},{pageNum:1})),X(!1),J(Object(p["a"])(Object(p["a"])({},U),{},{pageNum:1}))},url:"/manager/channel/upload"})))};a["default"]=Object(I["b"])((function(e){e.CHANNEL;var a=e.loading;return{loading:a.effects["CHANNEL/getListData"],updateChannelLoading:a.effects["CHANNEL/updateChannel"]}}))(A),A.defaultProps={loading:!1,authEdit:!0,authExport:!0,updateChannelLoading:!1}}}]);