(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{"479D":function(e,t,a){e.exports={newProductTxt:"antd-pro-pages-product-list-components-new-product-styles-newProductTxt",modalWarp:"antd-pro-pages-product-list-components-new-product-styles-modalWarp",inlinStyle:"antd-pro-pages-product-list-components-new-product-styles-inlinStyle",extraInfo:"antd-pro-pages-product-list-components-new-product-styles-extraInfo",warpSpace:"antd-pro-pages-product-list-components-new-product-styles-warpSpace"}},"6OaN":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=a("fWQN"),l=a("mtLc"),c=a("yKVA"),o=a("879j"),s=a("Hx5s"),i=a("FRQA"),u=a("q1tI"),d=a.n(u),p=a("9kvl"),m=(a("qVdP"),a("jsC+")),f=(a("lUTK"),a("BvKs")),E=(a("iQDF"),a("+eQT")),h=(a("+L6B"),a("2/Rp")),b=(a("5NDa"),a("5rEg")),y=(a("14J3"),a("BMrR")),v=(a("jCWc"),a("kPKH")),g=(a("aHsQ"),a("sGsY")),S=a("k1fw"),O=a("PpiC"),w=(a("DYRE"),a("zeV3")),C=(a("5Dmo"),a("3S7+")),I=(a("Awhp"),a("KrTs")),j=a("tS8v"),k=(a("/xke"),a("TeRw")),x=(a("2qtc"),a("kLXV")),N=(a("OaEy"),a("2fM7")),P=(a("y8nQ"),a("Vl3Y")),T=a("nT/m"),L=a("Lyp1"),R=a("RCxd"),_=a("y3Kf"),F=a("8Skl"),D=a("xvlK"),M=a("+n12"),A=a("LvDl"),q=a("wd/R"),V=a.n(q),K=a("tQHx"),U=a("Qnru"),B=a("TYIg"),W=a.n(B),Y=(a("giR+"),a("fyUT")),z=a("tJVT"),J=(a("tU7J"),a("wFql")),Q=a("guZA"),H=P["a"].Item,G=J["a"].Text,X=function(e,t,a,n,r){k["default"][e||"info"]({message:t,description:a,placement:n,duration:r||3})},Z=function(e){var t=e.isModalVisible,a=e.closeModal,n=e.sortNum,r=e.loading,l=e.productFullName,c=e.productId,o=e.dispatch,s=P["a"].useForm(),i=Object(z["a"])(s,1),u=i[0],p=function(e){o({type:"productList/resetOrderRule",payload:Object(S["a"])({productId:c},e),callback:function(e){if(1008===e.code)X("success","\u63d0\u9192","\u8bbe\u7f6e\u6210\u529f"),a();else{var t=e.message||e.data||"\u8bbe\u7f6e\u5931\u8d25\uff01";X("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),t,"topRight")}}})};return d.a.createElement(x["a"],{title:"\u987a\u5e8f\u8c03\u6574",width:400,visible:t,onCancel:a,maskClosable:!1,footer:null},d.a.createElement(P["a"],{form:u,onFinish:p},d.a.createElement(y["a"],null,d.a.createElement(G,null,"\u76ee\u524d",l,"\u7684\u987a\u5e8f\u4e3a\uff1a",n)),d.a.createElement(H,{name:"orderRule",extra:"\u4fdd\u5b58\u65b0\u7684\u987a\u5e8f\u540e\uff0c\u5176\u4f59\u4ea7\u54c1\u987a\u5e8f\u540c\u6b65\u66f4\u65b0"},d.a.createElement(Y["a"],{min:0,style:{width:"85%",margin:"10px 0"},placeholder:"\u8bf7\u8f93\u5165"})),d.a.createElement(y["a"],{justify:"center"},d.a.createElement(w["b"],null,d.a.createElement(h["a"],{type:"primary",htmlType:"submit",loading:r},"\u4fdd\u5b58"),d.a.createElement(h["a"],{onClick:a},"\u53d6\u6d88")))))},$=Object(Q["a"])((function(e){var t=e.productList,a=e.loading;return{productList:t,loading:a.effects["productList/resetOrderRule"]}}))(Z),ee=(a("T2oS"),a("W9HT")),te=a("0Owb"),ae=(a("sRBo"),a("kaz8")),ne=a("479D"),re=a.n(ne),le=[{value:1,label:"\u98ce\u9669\u5339\u914d\u5ba2\u6237"},{value:2,label:"\u5408\u683c\u6295\u8d44\u8005"},{value:3,label:"\u6301\u6709\u4eba"},{value:4,label:"\u6240\u6709\u4eba"}],ce=[{value:1,label:"\u98ce\u9669\u5339\u914d\u5ba2\u6237"},{value:2,label:"\u5408\u683c\u6295\u8d44\u8005"},{value:3,label:"\u6301\u6709\u4eba"},{value:4,label:"\u6240\u6709\u4eba"}],oe=a("+YFz"),se=(a("QWqi"),"YYYY-MM-DD"),ie=function(e,t,a,n,r){k["default"][e||"info"]({top:165,message:t,description:a,placement:n,duration:r||3})},ue={labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:16},sm:{span:16}}},de={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},pe=function(e){var t=e.dispatch,a=e.addLoading,r=P["a"].useForm(),l=Object(z["a"])(r,1),c=l[0],o=Object(u["useState"])(!1),s=Object(z["a"])(o,2),i=s[0],p=s[1],m=Object(u["useState"])([]),f=Object(z["a"])(m,2),E=f[0],b=f[1],g=Object(u["useState"])([]),C=Object(z["a"])(g,2),I=C[0],j=C[1],k=Object(u["useState"])(!1),L=Object(z["a"])(k,2),R=L[0],_=L[1],F=Object(u["useState"])([]),D=Object(z["a"])(F,2),M=(D[0],D[1]),A=Object(u["useState"])(!1),q=Object(z["a"])(A,2),K=q[0],U=q[1],B=Object(u["useState"])([]),W=Object(z["a"])(B,2),J=W[0],Q=W[1],H=Object(u["useState"])(!1),G=Object(z["a"])(H,2),X=G[0],Z=G[1],$=Object(u["useState"])([]),ne=Object(z["a"])($,2),pe=ne[0],me=ne[1],fe=function(){t({type:"NEW_PRODUCT/getInvestorList",payload:{},callback:function(e){var t=e.code,a=e.data,n=e.message;if(1008===t)j(a);else{var r=n||a||"\u67e5\u8be2\u5931\u8d25\uff01";ie("error","\u63d0\u9192",r)}}})},Ee=function(){t({type:"NEW_PRODUCT/queryCompanyList",callback:function(e){1008===e.code&&M(e.data||[])}})},he=function(){t({type:"NEW_PRODUCT/syncFundInfo",payload:{},callback:function(e){var t=e.code,a=e.data,n=e.message;if(1008===t)b(a);else{var r=n||a||"\u67e5\u8be2\u5931\u8d25\uff01";ie("error","\u63d0\u9192",r)}}})};Object(u["useEffect"])((function(){he(),fe(),Ee()}),[]);var be=function(){c.validateFields().then((function(e){var a=e.productList,n=[];Array.isArray(a)&&a.map((function(e){!0===e.use&&n.push(Object(S["a"])(Object(S["a"])({},e),{},{productFullName:e.productName}))})),0!==n.length?t({type:"NEW_PRODUCT/createBatch",payload:n,callback:function(e){var t=e.code,a=e.data,n=e.message;if(1008===t){b([]),p(!1),he();var r=n||a||"\u521b\u5efa\u6210\u529f\uff01";ie("success","\u63d0\u9192",r)}else{var l=n||a||"\u67e5\u8be2\u5931\u8d25\uff01";ie("error","\u63d0\u9192",l)}}}):ie("warning","\u63d0\u9192","\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u4ea7\u54c1")}))},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_(!0),setTimeout((function(){var t=[],a=[];e.map((function(e){t.push(Object(S["a"])({use:!0},e)),e.currency&&e.trusteeshipCode||a.push(Object(S["a"])({},e))})),c.setFieldsValue({productList:t}),me(t),_(!1),a.length>0&&(Q(a),U(!0))}),1e3)},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Z(!0);var t=[];e.map((function(e){e.currency&&e.trusteeshipCode?t.push(Object(S["a"])({use:!0},e)):t.push(Object(S["a"])({use:!1},e))})),c.setFieldsValue({productList:t}),Z(!1),U(!1)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.map((function(e,a){a<1&&t.push(e.productName)})),"\u68c0\u6d4b\u5230\u8d35\u53f8\u6709\u65b0\u5907\u6848\u4ea7\u54c1\uff1a".concat(t.join(),"\u7b49\u4ea7\u54c1\u672a\u7ef4\u62a4\uff0c\u70b9\u51fb\u5f00\u59cb\u521b\u5efa\u4ea7\u54c1")},Se=function(e,t){var a=c.getFieldsValue(),n=a.productList;me(n)};return d.a.createElement(d.a.Fragment,null,i&&d.a.createElement(x["a"],{title:"\u6839\u636e\u534f\u4f1a\u4fe1\u606f\uff0c\u5feb\u901f\u521b\u5efa\u4ea7\u54c1",visible:i,onCancel:function(){p(!1),c.resetFields()},maskClosable:!1,width:"80%",footer:[d.a.createElement(h["a"],{key:"sure",type:"primary",htmlType:"submit",loading:a,onClick:be},"\u5feb\u901f\u521b\u5efa")],className:re.a.modalWarp,bodyStyle:{height:"700px",overflowY:"auto"}},d.a.createElement(ee["a"],{spinning:R},d.a.createElement(P["a"],Object(te["a"])({form:c},ue),d.a.createElement(P["a"].List,{name:"productList"},(function(e,t){t.add,t.remove;return e.map((function(e,t){var a=e.key,r=e.name,l=(e.fieldKey,Object(O["a"])(e,["key","name","fieldKey"]),E[t]?E[t]:{});return d.a.createElement(w["b"],{key:a,className:re.a.warpSpace},d.a.createElement(n["a"],{title:d.a.createElement("span",null,"\u4ea7\u54c1\uff1a",l.productName,", ",l.fundRecordNumber),extra:d.a.createElement(P["a"].Item,{noStyle:!0,name:[r,"use"],valuePropName:"checked"},d.a.createElement(ae["a"],{onChange:function(e){return Se(e,t)},value:1}))},d.a.createElement(P["a"].Item,{label:"\u4ea7\u54c1\u8be6\u60c5\u6743\u9650",name:[r,"productAuthority"],rules:[{required:pe[t]&&pe[t].use,message:"\u8bf7\u9009\u62e9"}],tooltip:{title:"\u8bbe\u7f6e\u8be6\u7ec6\u4ea7\u54c1\u8981\u7d20\u4fe1\u606f,\u53ea\u8981\u6ee1\u8db3\u5176\u4e2d\u4e00\u79cd\u6761\u4ef6\u5373\u53ef\u89c1",icon:d.a.createElement(oe["a"],null)}},d.a.createElement(N["a"],{allowClear:!0,mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},le.map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)})))),d.a.createElement(P["a"].Item,{label:"\u4ea7\u54c1\u51c0\u503c\u6743\u9650",name:[r,"netValueAuthority"],rules:[{required:pe[t]&&pe[t].use,message:"\u8bf7\u9009\u62e9"}],tooltip:{title:"\u8bbe\u7f6e\u4ea7\u54c1\u51c0\u503c\u4fe1\u606f,\u53ea\u8981\u6ee1\u8db3\u5176\u4e2d\u4e00\u79cd\u6761\u4ef6\u5373\u53ef\u89c1",icon:d.a.createElement(oe["a"],null)}},d.a.createElement(N["a"],{allowClear:!0,mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},ce.map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)})))),d.a.createElement(P["a"].Item,{label:"\u6307\u5b9a\u53ef\u67e5\u770b\u7684\u7528\u6237",name:[r,"specificCustomers"]},d.a.createElement(N["a"],{allowClear:!0,mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",optionLabelProp:"label"},Array.isArray(I)&&I.map((function(e,t){return d.a.createElement(N["a"].Option,{label:e.customerName,key:t,value:e.customerId},e.customerBrief)})))),d.a.createElement(P["a"].Item,{label:"\u4ea7\u54c1\u98ce\u9669\u7b49\u7ea7",name:[r,"riskType"],rules:[{required:pe[t]&&pe[t].use,message:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u98ce\u9669\u7b49\u7ea7"}]},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["gb"].map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)})))),d.a.createElement(y["a"],{gutter:[16,16]},d.a.createElement(v["a"],{span:7},d.a.createElement(P["a"].Item,Object(te["a"])({label:"\u662f\u5426\u5f00\u653e\u9884\u7ea6",name:[r,"appointmentStatus"],help:"\u6b64\u72b6\u6001\u4e3a\u5f00\u5173\uff0c\u9700\u540c\u65f6\u7b26\u5408\u5f00\u653e\u671f\u624d\u4f1a\u5f00\u653e"},de,{labelAlign:"left",rules:[{required:pe[t]&&pe[t].use,message:"\u8bf7\u9009\u62e9\u9884\u7ea6\u72b6\u6001"}]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["xb"].map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:7,offset:1},d.a.createElement(P["a"].Item,Object(te["a"])({label:"\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e"},de,{labelAlign:"left",name:[r,"tradeTypes"]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",mode:"multiple",allowClear:!0},T["vb"].map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,disabled:e.isDisabled,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:7,offset:1},d.a.createElement(P["a"].Item,Object(te["a"])({label:"\u4e0a\u67b6\u72b6\u6001",name:[r,"publishStatus"]},de,{labelAlign:"left",rules:[{required:pe[t]&&pe[t].use,message:"\u8bf7\u9009\u62e9\u4e0a\u67b6\u72b6\u6001"}]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["yb"].map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:7},d.a.createElement(P["a"].Item,Object(te["a"])({label:"\u4ea7\u54c1\u662f\u5426\u7f6e\u9876",name:[r,"topStatus"]},de,{labelAlign:"left"}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["ob"].map((function(e){return d.a.createElement(N["a"].Option,{key:e.value,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:7,offset:1},d.a.createElement(P["a"].Item,Object(te["a"])({label:"\u987a\u5e8f",name:[r,"orderRule"]},de,{labelAlign:"left",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u987a\u5e8f"}],extra:"\u63a7\u5236\u7ba1\u7406\u540e\u53f0\u4ea7\u54c1\u5217\u8868\u53ca\u6295\u8d44\u8005\u7aef\u4ea7\u54c1\u5217\u8868\u4e2d\u4ea7\u54c1\u7684\u5c55\u793a\u987a\u5e8f"}),d.a.createElement(Y["a"],{width:200,min:0,placeholder:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u987a\u5e8f"})))),d.a.createElement("div",{className:re.a.extraInfo},d.a.createElement("div",null,"\u4ee5\u4e0b\u4fe1\u606f\uff0c\u6839\u636e\u57fa\u91d1\u4e1a\u534f\u4f1a\u4fe1\u606f\uff0c\u81ea\u52a8\u586b\u5145\uff0c\u62ec\u53f7\u540e\u9762\u4ee3\u8868\u57fa\u91d1\u4e1a\u534f\u4f1a\u7684\u5b57\u6bb5\u540d\u79f0\uff1a"),d.a.createElement("div",null,"\u4ea7\u54c1\u6210\u7acb\u65e5\u671f\uff08\u6210\u7acb\u65f6\u95f4\uff09: ",E[t]&&V()(l.setDate).format(se)),d.a.createElement("div",null,"\u5907\u6848\u767b\u8bb0\u65e5\u671f\uff08\u5907\u6848\u65f6\u95f4\uff09: ",E[t]&&V()(l.recordRegisterDate).format(se)),d.a.createElement("div",null,"\u5e01\u79cd\uff08\u5e01\u79cd\uff09:\u4eba\u6c11\u5e01\u73b0\u949e\uff08",E[t]&&l.amacCurrency,"\uff09"),d.a.createElement("div",null,"\u6258\u7ba1\u673a\u6784\uff08\u6258\u7ba1\u4eba\u540d\u79f0\uff09: ",E[t]&&l.trusteeName))))}))}))))),E.length>0&&d.a.createElement("div",{className:re.a.newProductTxt,onClick:function(){p(!0),ye(E)}},ge(E)),K&&d.a.createElement(x["a"],{visible:K,title:"\u9519\u8bef\u4fe1\u606f\u63d0\u9192",onCancel:function(){U(!1)},footer:[d.a.createElement(h["a"],{key:"cancel",loading:X,onClick:function(){return ve(E)}},"\u4e0d\u521b\u5efa"),d.a.createElement(h["a"],{key:"sure",type:"primary",onClick:function(){U(!1)}},"\u5ffd\u7565\u9519\u8bef\u6570\u636e\uff0c\u7ee7\u7eed\u521b\u5efa")],bodyStyle:{maxHeight:"500px",overflowY:"auto"}},Array.isArray(J)&&J.map((function(e){return d.a.createElement("p",{key:e.fundRecordNumber},d.a.createElement("span",null,e.productName,"(",e.fundRecordNumber,")"),",",d.a.createElement("span",null,"\u5e01\u79cd\uff1a",d.a.createElement("span",{style:{color:"red"}},e.amacCurrency)),",",d.a.createElement("span",null,"\u6258\u7ba1\u673a\u6784(\u6258\u7ba1\u4eba\u540d\u79f0)\uff1a",d.a.createElement("span",{style:{color:"red"}},e.trusteeName)),", \u4e0d\u652f\u6301\uff0c\u65e0\u6cd5\u521b\u5efa")}))))};pe.defaultProps={};var me,fe,Ee=Object(p["b"])((function(e){var t=e.loading;return{addLoading:t.effects["NEW_PRODUCT/createBatch"]}}))(pe),he=a("oBTY"),be=a("wlus"),ye=a("ao5B"),ve=a.n(ye),ge=N["a"].Option,Se=function(e,t,a,n,r){k["default"][e||"info"]({top:165,message:t,description:a,placement:n,duration:r||1})},Oe={2:"A",3:"B",4:"C",5:"D",6:"E"},we=function(e){var t=Object(u["useState"])(!1),a=Object(z["a"])(t,2),n=a[0],r=a[1],l=Object(u["useState"])(""),c=Object(z["a"])(l,2),o=c[0],s=c[1],i=Object(u["useState"])(""),p=Object(z["a"])(i,2),m=p[0],f=p[1],E=P["a"].useForm(),g=Object(z["a"])(E,1),w=g[0],C=Object(u["useState"])([]),I=Object(z["a"])(C,2),j=I[0],k=I[1],L=Object(u["useState"])([]),R=Object(z["a"])(L,2),_=R[0],F=R[1],M=function(){e.dispatch({type:"productList/queryByProductName",payload:{fundLevel:0},callback:function(e){k(e.data)}})};Object(u["useEffect"])((function(){console.log(e),M(),w.setFieldsValue({shareSplitProducts:[]})}),[]);var A=function(t){var a=[],n=[];if(t.shareSplitProducts.length<=0)return null;t.shareSplitProducts.forEach((function(e){a.push(e.shareCategory),n.push(e.pbInternalProductCode)})),Object(he["a"])(new Set(a)).length===a.length?Object(he["a"])(new Set(n)).length===n.length?e.dispatch({type:"productList/spiltShareValue",payload:{parentProductId:o,shareSplitProducts:t.shareSplitProducts.map((function(e){return Object(S["a"])(Object(S["a"])({},e),{},{tradeTypes:JSON.stringify(e.tradeTypes)})}))},callback:function(e){1008===e.code?(Se("success","\u63d0\u793a","\u4fdd\u5b58\u6210\u529f"),s(""),r(!1)):Se("warning","\u63d0\u793a",e.message)}}):Se("warning","\u63d0\u793a","\u6258\u7ba1\u673a\u6784\u5185\u90e8\u4ea7\u54c1\u4ee3\u7801\u4e0d\u80fd\u4e00\u6837"):Se("warning","\u63d0\u793a","\u4efd\u989d\u7c7b\u522b\u4e0d\u80fd\u4e00\u6837")},q=function(t){j.map((function(e){return e.productId===t&&f(e)})),s(t),e.dispatch({type:"productList/getSubFund",payload:{parentProductId:t},callback:function(e){if(1008===e.code){console.log(e.data);var t=e.data.map((function(e){return Object(S["a"])(Object(S["a"])({},e),{},{tradeTypes:JSON.parse(e.tradeTypes),disabled:e.shareCategory&&e.pbInternalProductCode,isOld:!0})}))||[];w.setFieldsValue({shareSplitProducts:t}),F(t)}}})},V=function(e){if(o){var t=m.riskType,a=m.publishStatus,n=m.appointmentStatus,r=m.tradeTypes;e({riskType:t,publishStatus:a,appointmentStatus:n,pbInternalProductCode:m.fundRecordNumber,tradeTypes:JSON.parse(r)})}else Se("error","\u8bf7\u5148\u9009\u62e9\u4ea7\u54c1")},K=function(e,t){var a=w.getFieldsValue(!0);console.log(a,e,t),a.shareSplitProducts[t]&&!a.shareSplitProducts[t].pbInternalProductCode&&(a.shareSplitProducts[t].pbInternalProductCode=m.fundRecordNumber?"".concat(m.fundRecordNumber.substr(-5)).concat(Oe[e]):Oe[e],w.setFieldsValue({shareSplitProducts:a.shareSplitProducts}))};return d.a.createElement(d.a.Fragment,null,n&&d.a.createElement(x["a"],{visible:n,onCancel:function(){s(""),r(!1)},maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,className:ve.a.modalWarp},d.a.createElement(y["a"],{justify:"center",align:"middle"},d.a.createElement(v["a"],{span:4},d.a.createElement("span",{style:{color:"red"}},"*")," \u8bf7\u9009\u62e9\u4ea7\u54c1\uff1a"),d.a.createElement(v["a"],{offset:2,span:8},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,filterOption:function(e,t){return t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0},notFoundContent:"\u6682\u65e0\u6570\u636e",allowClear:!0,style:{width:"100%"},onChange:q},Array.isArray(j)&&j.map((function(e,t){return d.a.createElement(N["a"].Option,{key:t,value:e.productId},e.productName)}))))),d.a.createElement(P["a"],{form:w,preserve:!1,name:"baseInfo",onFinish:A,style:{marginTop:"20px"},autoComplete:"off"},d.a.createElement(P["a"].List,{name:"shareSplitProducts"},(function(e,t){var a=t.add,n=t.remove;return d.a.createElement(d.a.Fragment,null,d.a.createElement(y["a"],{justify:"center",gutter:16,style:{marginBottom:16}},d.a.createElement(v["a"],{span:3},d.a.createElement("div",null,"\u4efd\u989d\u7c7b\u522b")),d.a.createElement(v["a"],{span:5},d.a.createElement("div",null,"\u6258\u7ba1\u673a\u6784\u5185\u90e8\u4ea7\u54c1\u4ee3\u7801")),d.a.createElement(v["a"],{span:3},d.a.createElement("div",null,"\u98ce\u9669\u7b49\u7ea7")),d.a.createElement(v["a"],{span:3},d.a.createElement("div",null,"\u4e0a\u67b6\u72b6\u6001")),d.a.createElement(v["a"],{span:3},d.a.createElement("div",null,"\u662f\u5426\u53ef\u9884\u7ea6\u72b6\u6001")),d.a.createElement(v["a"],{span:3},d.a.createElement("div",null,"\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e")),d.a.createElement(v["a"],{span:1},d.a.createElement(D["a"],{onClick:function(){return V(a)}}))),e.map((function(e){var t=e.key,a=e.name,r=e.fieldKey,l=Object(O["a"])(e,["key","name","fieldKey"]);return d.a.createElement(y["a"],{key:t,gutter:16,justify:"center"},d.a.createElement(v["a"],{span:3},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"shareCategory"],fieldKey:[r,"shareCategory"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4efd\u989d\u7c7b\u522b"}]}),d.a.createElement(N["a"],{disabled:_.length&&a<_.length&&_[a].disabled,onChange:function(e){return K(e,a)},placeholder:"\u8bf7\u9009\u62e9\u4efd\u989d\u7c7b\u522b"},d.a.createElement(N["a"].Option,{value:2},"A"),d.a.createElement(N["a"].Option,{value:3},"B"),d.a.createElement(N["a"].Option,{value:4},"C"),d.a.createElement(N["a"].Option,{value:5},"D"),d.a.createElement(N["a"].Option,{value:6},"E")))),d.a.createElement(v["a"],{span:5},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"pbInternalProductCode"],fieldKey:[r,"pbInternalProductCode"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6258\u7ba1\u673a\u6784\u5185\u90e8\u4ea7\u54c1\u4ee3\u7801"}]}),d.a.createElement(b["a"],{disabled:_.length&&a<_.length&&_[a].disabled,placeholder:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u4ee3\u7801"}))),d.a.createElement(v["a"],{span:3},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"riskType"],fieldKey:[r,"riskType"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u98ce\u9669\u7b49\u7ea7"}]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9\u98ce\u9669\u7b49\u7ea7",allowClear:!0},T["gb"].map((function(e){return d.a.createElement(ge,{value:e.value,key:e.value},e.label||"--")}))))),d.a.createElement(v["a"],{span:3},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"publishStatus"],fieldKey:[r,"publishStatus"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u67b6\u72b6\u6001"}]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["yb"].map((function(e){return d.a.createElement(ge,{key:e.value,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:3},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"appointmentStatus"],fieldKey:[r,"appointmentStatus"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9884\u7ea6\u72b6\u6001"}]}),d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["xb"].map((function(e){return d.a.createElement(ge,{key:e.value,value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:3},d.a.createElement(P["a"].Item,Object(te["a"])({},l,{name:[a,"tradeTypes"],fieldKey:[r,"tradeTypes"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e"}]}),d.a.createElement(N["a"],{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["vb"].map((function(e){return d.a.createElement(ge,{key:e.value,value:e.value},e.label)}))))),_.length&&a<_.length&&_[a].isOld?d.a.createElement(v["a"],{span:1}):d.a.createElement(v["a"],{span:1},d.a.createElement(be["a"],{onClick:function(){console.log(a),n(a)}})))})))})),d.a.createElement(y["a"],{style:{marginTop:40}},d.a.createElement(v["a"],{span:4,offset:20},d.a.createElement(P["a"].Item,null,d.a.createElement(h["a"],{type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))))),d.a.createElement(h["a"],{type:"primary",onClick:function(){M(),r(!0)}},"\u62c6\u5206AB\u4efd\u989d"))},Ce=Object(p["b"])((function(e){var t=e.productList;return{productList:t}}))(we);we.defaultProps={};var Ie=P["a"].Item,je=N["a"].Option,ke="YYYY/MM/DD",xe=x["a"].confirm,Ne=function(e,t,a,n,r){k["default"][e||"info"]({message:t,description:a,placement:n,duration:r||3})},Pe={1:"\u4eba\u6c11\u5e01",2:"\u7f8e\u5143",3:"\u6e2f\u5e01"},Te=(me=Object(p["b"])((function(e){var t=e.productList,a=e.loading;return{productList:t,loading:a.effects["productList/getProductList"]}})),me(fe=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l)),e.state={isShow:!1,selectedRowKeys:[],pageData:{current:1,pageSize:20},searchParams:{},sortFiled:"",sortType:"",managerList:[],projectManagerList:[],topStatistics:{},batchUploadModalFlag:!1,enableStatistic:1,companyList:[],isModalVisible:!1,sortNum:0,productFullName:"",productId:0,productInfoList:{},productTypeList:[],productList:[]},e.getStatistics=function(){var t=e.state.enableStatistic,a=e.props.dispatch;1===t&&a({type:"productList/queryStatistics",payload:{enableStatistic:t},callback:function(t){1008===t.code&&t.data&&e.setState({topStatistics:t.data})}})},e._queryProductTypeList=function(){var t=e.props.dispatch;t({type:"productDetails/getProductType",callback:function(t){1008===t.code&&t.data&&e.setState({productTypeList:t.data})}})},e.formRef=d.a.createRef(),e.columns=[{title:"\u987a\u5e8f",dataIndex:"orderRule",fixed:"left",width:50,render:function(t,a){return d.a.createElement("a",{onClick:function(){return e.handleSort(a)}},t||"--")}},{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",fixed:"left",width:100,render:function(t,a){return d.a.createElement("span",{className:"details",onClick:function(){return e._handleEdit(a)}},t||"--")}},{title:"\u5907\u6848\u7f16\u53f7",dataIndex:"fundRecordNumber",width:100,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6295\u8d44\u7ecf\u7406",dataIndex:"sales",width:120,render:function(e){var t=[];return!Object(A["isEmpty"])(e)&&e.forEach((function(e){t.push(e.saleUserName)})),t.join("\uff0c")||"--"}},{title:"\u9879\u76ee\u7ecf\u7406",dataIndex:"projectSales",width:120,render:function(e){var t=[];return!Object(A["isEmpty"])(e)&&e.forEach((function(e){t.push(e.saleUserName)})),t.join("\uff0c")||"--"}},{title:"\u6258\u7ba1\u673a\u6784",dataIndex:"investment",width:120,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u662f\u5426\u5f00\u653e\u9884\u7ea6",dataIndex:"appointmentStatus",width:110,render:function(e){var t=T["xb"].find((function(t){return t.value===e}));return t&&t.label||"--"}},{title:"\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e",dataIndex:"tradeTypes",width:120,render:function(e){if(Object(A["isEmpty"])(e))return d.a.createElement("span",null,"--");var t=[];return e.forEach((function(e){1===e&&t.push("\u53ef\u8ba4\u7533\u8d2d"),2===e&&t.push("\u53ef\u8d4e\u56de")})),t.join(",")}},{title:"\u4e0a\u67b6\u72b6\u6001",dataIndex:"publishStatus",width:80,render:function(e){var t=T["yb"].find((function(t){return t.value===e}));return t&&t.label||"--"}},{title:"\u662f\u5426\u6295\u987e\u7c7b\u4ea7\u54c1",dataIndex:"isInvestmentProduct",width:120,render:function(e,t){if(Object(M["w"])(e)){var a=1===e?"\u662f":"\u5426";return d.a.createElement("span",null,a)}return"--"}},{title:"\u4ea7\u54c1\u72b6\u6001",dataIndex:"productStatus",width:80,render:function(e,t){if(Object(M["w"])(e)&&e>0){var a=T["hb"][e-1].label;return d.a.createElement(I["a"],{status:T["ib"][e-1],text:a})}return"--"}},{title:"\u4ea7\u54c1\u6210\u7acb\u65e5",dataIndex:"setDate",width:120,sorter:!0,render:function(e){return d.a.createElement("span",null,e&&V()(e).format(ke)||"--")}},{title:"\u6295\u8d44\u8005\u6570\u91cf",dataIndex:"customerNumber",width:120,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u8d44\u4ea7\u603b\u4efd\u989d",dataIndex:"shareValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u8d44\u4ea7\u603b\u503c",dataIndex:"totalValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:d.a.createElement(C["a"],{title:"\u6bcd\u4efd\u989d\u4ea7\u54c1\uff0c\u503c = \u6240\u6709\u5b50\u4efd\u989d\u57fa\u91d1\u6295\u8d44\u8005\u7684\u4efd\u989d\u4f59\u989d\u7d2f\u52a0 \u4e0d\u662f\u5206\u5c42\u57fa\u91d1\u6216\u662f\u5b50\u4efd\u989d\u57fa\u91d1\uff0c\u503c = \u8d44\u4ea7\u603b\u4efd\u989d"},"\u6bcd\u4efd\u989d\u6c47\u603b",d.a.createElement(L["a"],null)),dataIndex:"childrenShareTotal",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u52df\u96c6\u8d26\u6237\u94f6\u884c\u8d26\u53f7",dataIndex:"raiseAccount",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6258\u7ba1\u8d26\u6237",dataIndex:"investmentAccount",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6700\u65b0\u51c0\u503c\u65e5\u671f",dataIndex:"netDate",width:150,render:function(e){return d.a.createElement("span",null,e&&V()(e).format(ke)||"--")}},{title:"\u6700\u65b0\u5355\u4f4d\u51c0\u503c",dataIndex:"netValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6700\u65b0\u7d2f\u8ba1\u51c0\u503c",dataIndex:"acumulateNetValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u7d2f\u8ba1\u6da8\u8dcc\u5e45",dataIndex:"cumulativeChangeRate",width:150,render:function(e){return Object(M["w"])(e)?d.a.createElement("span",null,"".concat(e,"%")):d.a.createElement("span",null,"--")}},{title:"\u9500\u552e\u65b9\u5f0f",dataIndex:"saleByProxy",width:150,render:function(e){return"0"===e?d.a.createElement("span",null,"\u76f4\u9500"):"1"===e?d.a.createElement("span",null,"\u4ee3\u9500"):"0,1"===e?d.a.createElement("span",null,"\u76f4\u9500\u3001\u4ee3\u9500"):d.a.createElement("span",null,"--")}},{title:"\u64cd\u4f5c",dataIndex:"age",fixed:"right",width:150,render:function(t,a){var n=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["30100"]||{},r=n.authEdit;return r&&d.a.createElement(w["b"],{size:"middle"},d.a.createElement("span",{className:"details",onClick:function(){return e._handleEdit(a)}},"\u7f16\u8f91"),d.a.createElement("span",{className:"details",onClick:function(){return e.handleSort(a)}},"\u987a\u5e8f\u8c03\u6574"),d.a.createElement("span",{className:"details",onClick:function(){return e._handleDelete(a)}},"\u5220\u9664"))}}],e.columns2=[{title:"\u987a\u5e8f",dataIndex:"orderRule",fixed:"left",width:50,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",fixed:"left",width:100,render:function(t,a){return d.a.createElement("span",{className:"details",onClick:function(){return e._handleEdit(a)}},t||"--")}},{title:"\u5907\u6848\u7f16\u53f7",dataIndex:"fundRecordNumber",width:100,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6295\u8d44\u7ecf\u7406",dataIndex:"sales",width:120,render:function(e){var t=[];return!Object(A["isEmpty"])(e)&&e.forEach((function(e){t.push(e.saleUserName)})),t.join("\uff0c")||"--"}},{title:"\u9879\u76ee\u7ecf\u7406",dataIndex:"projectSales",width:120,render:function(e){var t=[];return!Object(A["isEmpty"])(e)&&e.forEach((function(e){t.push(e.saleUserName)})),t.join("\uff0c")||"--"}},{title:"\u6258\u7ba1\u673a\u6784",dataIndex:"investment",width:120,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u662f\u5426\u5f00\u653e\u9884\u7ea6",dataIndex:"appointmentStatus",width:110,render:function(e){var t=T["xb"].find((function(t){return t.value===e}));return t&&t.label||"--"}},{title:"\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e",dataIndex:"tradeTypes",width:120,render:function(e){if(Object(A["isEmpty"])(e))return d.a.createElement("span",null,"--");var t=[];return e.forEach((function(e){1===e&&t.push("\u53ef\u8ba4\u7533\u8d2d"),2===e&&t.push("\u53ef\u8d4e\u56de")})),t.join(",")}},{title:"\u4e0a\u67b6\u72b6\u6001",dataIndex:"publishStatus",width:80,render:function(e){var t=T["yb"].find((function(t){return t.value===e}));return t&&t.label||"--"}},{title:"\u4ea7\u54c1\u72b6\u6001",dataIndex:"productStatus",width:80,render:function(e,t){if(Object(M["w"])(e)&&e>0){var a=T["hb"][e-1].label;return d.a.createElement(I["a"],{status:T["ib"][e-1],text:a})}return"--"}},{title:"\u662f\u5426\u6295\u987e\u7c7b\u4ea7\u54c1",dataIndex:"isInvestmentProduct",width:120,render:function(e,t){if(Object(M["w"])(e)){var a=1===e?"\u662f":"\u5426";return d.a.createElement("span",null,a)}return"--"}},{title:"\u4ea7\u54c1\u6210\u7acb\u65e5",dataIndex:"setDate",width:120,render:function(e){return d.a.createElement("span",null,e&&V()(e).format(ke)||"--")}},{title:"\u6700\u65b0\u51c0\u503c\u65e5\u671f",dataIndex:"netDate",width:150,render:function(e){return d.a.createElement("span",null,e&&V()(e).format(ke)||"--")}},{title:"\u6700\u65b0\u5355\u4f4d\u51c0\u503c",dataIndex:"netValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u6700\u65b0\u7d2f\u8ba1\u51c0\u503c",dataIndex:"acumulateNetValue",width:150,render:function(e){return d.a.createElement("span",null,e||"--")}},{title:"\u9500\u552e\u65b9\u5f0f",dataIndex:"saleByProxy",width:150,render:function(e){return"0"===e?d.a.createElement("span",null,"\u76f4\u9500"):"1"===e?d.a.createElement("span",null,"\u4ee3\u9500"):"0,1"===e?d.a.createElement("span",null,"\u76f4\u9500\u3001\u4ee3\u9500"):d.a.createElement("span",null,"--")}},{title:"\u64cd\u4f5c",dataIndex:"age",width:150,render:function(t,a){var n=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["30100"]||{},r=n.authEdit;return d.a.createElement(w["b"],{size:"middle"},r&&d.a.createElement("div",null,d.a.createElement("span",{className:"details",onClick:function(){return e._handleEdit(a)}},"\u7f16\u8f91"," "),d.a.createElement("span",{className:"details",onClick:function(){return e.handleSort(a)}},"\u987a\u5e8f\u8c03\u6574"," "),d.a.createElement("span",{className:"details",onClick:function(){return e._handleDelete(a)}},"\u5220\u9664")))}}],e._getManagerList=function(){var t=e.props.dispatch;t({type:"productDetails/queryManager",callback:function(t){1008===t.code&&t.data&&e.setState({managerList:t.data})}}),t({type:"productDetails/getManagerUser",payload:{positionStatus:4},callback:function(t){1008===t.code&&t.data&&e.setState({projectManagerList:t.data.list})}})},e._queryCompanyList=function(){var t=e.props.dispatch;t({type:"productDetails/queryCompanyList",callback:function(t){1008===t.code&&t.data&&e.setState({companyList:t.data})}})},e._queryByProductName=function(){var t=e.props.dispatch;t({type:"productList/queryByProductName",callback:function(t){1008===t.code&&t.data&&e.setState({productList:t.data})}})},e._onFinish=function(t){var a=t.setDate,n=Object(O["a"])(t,["setDate"]),r={};r.setDateStart=a?V()(a[0]).valueOf():void 0,r.setDateEnd=a?V()(a[1]).valueOf():void 0,e.setState({searchParams:Object(S["a"])(Object(S["a"])({},n),r),selectedRowKeys:[],pageData:Object(S["a"])(Object(S["a"])({},e.state.pageData),{},{current:1})},(function(){e._search()}))},e._search=function(){var t=e.state,a=t.pageData,n=t.sortFiled,r=t.sortType,l=t.searchParams,c=t.enableStatistic,o=e.props.dispatch,s={};r&&(s.sortFiled=n,s.sortType=r),o({type:"productList/getProductList",payload:Object(S["a"])(Object(S["a"])(Object(S["a"])({pageNum:a.current||1,pageSize:a.pageSize||20,enableStatistic:c},s),l),{},{seriesTypes:l.seriesTypes&&[l.seriesTypes]}),callback:function(t){e.setState({productInfoList:t})}})},e._handleShowMore=function(){var t=e.state.isShow;e.setState({isShow:!t})},e._reset=function(){e._queryProductTypeList(),e.formRef.current.resetFields(),e.setState({searchParams:{},selectedRowKeys:[]},(function(){e._search()}))},e._onSelectChange=function(t){e.setState({selectedRowKeys:t})},e._cleanSelectedKeys=function(){e.setState({selectedRowKeys:[]})},e._onAdd=function(){p["c"].push({pathname:"/product/list/details/".concat(0)})},e._tableChange=function(t,a,n){e.setState({sortFiled:n.field,sortType:n.order?"ascend"===n.order?"asc":"desc":void 0,pageData:{current:t.current,pageSize:t.pageSize}},(function(){e._search()}))},e._handleDelete=function(t){var a=e.props.dispatch,n=e.state.selectedRowKeys,r=Object(j["a"])(e);xe({title:"\u8bf7\u60a8\u786e\u8ba4\u662f\u5426\u5220\u9664?",icon:d.a.createElement(R["a"],null),content:"\u5220\u9664\u540e\u8be5\u4ea7\u54c1\u548c\u4ea7\u54c1\u540d\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u3001\u7b7e\u7ea6\u8d44\u6599\u90fd\u4f1a\u5220\u9664",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"productList/deleteProduct",payload:{productId:t.productId},callback:function(e){if(1008===e.code){Ne("success","\u63d0\u793a","\u5220\u9664\u6210\u529f","topRight"),r._search();var a=n.filter((function(e){return e!==t.productId}));r.setState({selectedRowKeys:a})}else{var l=e.message||e.data||"\u5220\u9664\u5931\u8d25\uff01";Ne("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),l,"topRight")}}})},onCancel:function(){}})},e._handleEdit=function(e){p["c"].push({pathname:"/product/list/details/".concat(e.productId)})},e.handleSort=function(t){var a=e.state.isModalVisible;a?e.setState({isModalVisible:!1,productFullName:"",sortNum:0,productId:0},(function(){e._search()})):e.setState({isModalVisible:!0,productFullName:t.productName,sortNum:t.sortNum,productId:t.productId})},e._export=function(){var t=e.state,a=t.selectedRowKeys,n=t.enableStatistic;window.location.href="".concat(window.location.origin).concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/product/export?productIds=").concat(a.toString(),"&enableStatistic=").concat(n,"&tokenId=").concat(Object(M["l"])("vipAdminToken"))},e._exportMode=function(t){var a=e.state,n=a.enableStatistic,r=a.selectedRowKeys;Object(M["g"])({method:"post",url:"/product/exportProductElements",data:{productIds:t?void 0:r,mode:t,enableStatistic:n},callback:function(e){var t=e.status;"success"===t&&Ne("success","\u63d0\u9192","\u5bfc\u51fa\u6210\u529f"),"error"===t&&Ne("error","\u63d0\u9192","\u5bfc\u51fa\u5931\u8d25\uff01")}})},e._downloadAll=function(){var t=e.state,a=t.pageData,n=t.sortFiled,r=t.sortType,l=t.searchParams,c=t.enableStatistic,o={};r&&(o.sortFiled=n,o.sortType=r),Object(M["g"])({method:"post",url:"/product/allExport",data:Object(S["a"])(Object(S["a"])({pageNum:a.current||1,pageSize:a.pageSize||20,enableStatistic:c},o),l),callback:function(e){var t=e.status;"success"===t&&Ne("success","\u63d0\u9192","\u5bfc\u51fa\u6210\u529f"),"error"===t&&Ne("error","\u63d0\u9192","\u5bfc\u51fa\u5931\u8d25\uff01")}})},e._filterPerson=function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},e._batchUpload=function(){e.setState({batchUploadModalFlag:!0})},e.closeModal=function(){e.setState({batchUploadModalFlag:!1},(function(){e._search()}))},e._handleCalc=function(t){var a=0===t?"\u5f00\u542f":"\u5173\u95ed";e.setState({enableStatistic:0===t?1:0},(function(){Ne("success","\u63d0\u793a","".concat(a,"\u6210\u529f"),"topRight"),e._search(),e.getStatistics()})),0===t&&e.setState({topStatistics:{}})},e.productChange=function(t,a){Array.isArray(a)&&(a.length>0?e.formRef.current.setFieldsValue({isShowSonProduct:1}):e.formRef.current.setFieldsValue({isShowSonProduct:0}))},e}return Object(l["a"])(a,[{key:"componentDidMount",value:function(){var e=Object(M["p"])("rangeDate");if(e){var t=Object(M["p"])("currency"),a=e.split("-");this.formRef.current.setFieldsValue({setDate:[V()(1*a[0]),V()(1*a[1])],currency:Pe[t]}),this.state.searchParams.setDateStart=V()(1*a[0]),this.state.searchParams.setDateEnd=V()(1*a[1]),this.state.searchParams.currency=Pe[t]}this._getManagerList(),this._queryCompanyList(),this._search(),this._queryProductTypeList(),this._queryByProductName(),this.getStatistics()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isShow,n=t.pageData,r=t.selectedRowKeys,l=t.managerList,c=t.projectManagerList,o=t.topStatistics,s=t.batchUploadModalFlag,i=t.enableStatistic,u=t.companyList,p=t.isModalVisible,S=t.sortNum,O=t.productFullName,w=t.productId,C=t.productInfoList,I=t.productTypeList,j=t.productList,k=this.props.loading,x={selectedRowKeys:r,onChange:this._onSelectChange},L=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["30100"]||{},R=L.authEdit,q=L.authExport;return d.a.createElement("div",{className:W.a.container},1===i&&d.a.createElement("div",{className:W.a.header},d.a.createElement(y["a"],null,d.a.createElement(v["a"],{span:8},d.a.createElement(g["a"],{title:"\u6295\u8d44\u8005\u6570\u91cf",value:o.customerStatistic||"--"})),d.a.createElement(v["a"],{span:8},d.a.createElement(g["a"],{title:"\u8d44\u4ea7\u603b\u4efd\u989d",value:o.shareValueStatistic||"--"})),d.a.createElement(v["a"],{span:8},d.a.createElement(g["a"],{title:"\u8d44\u4ea7\u603b\u503c",value:o.totalValueStatistic||"--"})))),d.a.createElement("div",{className:W.a.filter},d.a.createElement(P["a"],{name:"basic",onFinish:this._onFinish,ref:this.formRef,initialValues:{},onValuesChange:this.onValuesChange},d.a.createElement(y["a"],{gutter:[8,0]},d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u4ea7\u54c1\u540d\u79f0",name:"productIds"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,filterOption:function(e,t){return t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0},notFoundContent:"\u6682\u65e0\u6570\u636e",mode:"multiple",allowClear:!0,onChange:this.productChange},Array.isArray(j)&&j.map((function(e,t){return d.a.createElement(N["a"].Option,{parentProductId:e.parentProductId,label:e.productName,key:t,value:e.productId},e.productName)}))))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u4ea7\u54c1\u72b6\u6001",name:"productStatus"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["hb"].map((function(e){return d.a.createElement(je,{key:Object(M["q"])(6),value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u5907\u6848\u7f16\u53f7",name:"fundRecordNumber"},d.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",autoComplete:"off"}))),d.a.createElement(v["a"],{span:6,className:W.a.btnGroup},d.a.createElement(h["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),d.a.createElement(h["a"],{onClick:this._reset},"\u91cd\u7f6e"),d.a.createElement("span",{className:W.a.showMore,onClick:this._handleShowMore},a?"\u9690\u85cf":"\u5c55\u5f00",a?d.a.createElement(_["a"],null):d.a.createElement(F["a"],null)))),d.a.createElement(y["a"],{gutter:[8,0],style:{display:a?"":"none"}},d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u4ea7\u54c1\u6210\u7acb\u65e5\u671f",name:"setDate"},d.a.createElement(E["a"].RangePicker,{placeholder:"\u8bf7\u9009\u62e9",format:ke,style:{width:"100%"}}))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u662f\u5426\u5f00\u653e\u9884\u7ea6",name:"appointmentStatus"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["xb"].map((function(e){return d.a.createElement(je,{key:Object(M["q"])(6),value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u662f\u5426\u5f00\u653e\u8ba4\u7533\u8d4e",name:"tradeTypes"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:this._filterPerson,notFoundContent:null,mode:"multiple"},!Object(A["isEmpty"])(T["vb"])&&T["vb"].map((function(e){return d.a.createElement(je,{key:Object(M["q"])(6),value:e.value},e.label)})))))),d.a.createElement(y["a"],{gutter:[8,0],style:{display:a?"":"none"}},d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u4e0a\u67b6\u72b6\u6001",name:"publishStatus"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["yb"].map((function(e){return d.a.createElement(je,{key:Object(M["q"])(6),value:e.value},e.label)}))))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u6295\u8d44\u7ecf\u7406",name:"saleUserIds"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:this._filterPerson,notFoundContent:null,mode:"multiple"},!Object(A["isEmpty"])(l)&&l.map((function(e){return d.a.createElement(je,{key:e.managerUserId,value:e.managerUserId},e.userName)}))))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u9879\u76ee\u7ecf\u7406",name:"projectSaleUserIds"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:this._filterPerson,notFoundContent:null,mode:"multiple"},!Object(A["isEmpty"])(c)&&c.map((function(e){return d.a.createElement(je,{key:e.managerUserId,value:e.managerUserId},e.userName)})))))),d.a.createElement(y["a"],{gutter:[8,0],style:{display:a?"":"none"}},d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u6258\u7ba1\u673a\u6784",name:"investment"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,defaultActiveFirstOption:!1,filterOption:this._filterPerson,notFoundContent:null,allowClear:!0},!Object(A["isEmpty"])(u)&&u.map((function(e){return d.a.createElement(je,{key:e.trusteeshipCode,value:e.trusteeshipCode},e.trusteeshipName)}))))),d.a.createElement(v["a"],{span:6,className:W.a.isInvestmentProductCol},d.a.createElement(Ie,{label:"\u662f\u5426\u6295\u987e\u7c7b\u4ea7\u54c1",name:"isInvestmentProduct"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},d.a.createElement(je,{key:Object(M["q"])(3),value:0},"\u5426"),d.a.createElement(je,{key:Object(M["q"])(3),value:1},"\u662f")))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u4ea7\u54c1\u7cfb\u5217",name:"seriesTypes"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},!Object(A["isEmpty"])(I)&&I.map((function(e){return d.a.createElement(je,{key:Object(M["q"])(5),value:e.codeValue},e.codeText)})))))),d.a.createElement(y["a"],{gutter:[8,0]},d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u9500\u552e\u65b9\u5f0f",name:"saleByProxy"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},d.a.createElement(je,{key:Object(M["q"])(3),value:"0"},"\u76f4\u9500"),d.a.createElement(je,{key:Object(M["q"])(3),value:"1"},"\u4ee3\u9500"),d.a.createElement(je,{key:Object(M["q"])(3),value:"0,1"},"\u76f4\u9500\u3001\u4ee3\u9500")))),d.a.createElement(v["a"],{span:6},d.a.createElement(Ie,{label:"\u5e01\u79cd",name:"currency"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},d.a.createElement(je,{value:"\u4eba\u6c11\u5e01"},"\u4eba\u6c11\u5e01"),d.a.createElement(je,{value:"\u7f8e\u5143"},"\u7f8e\u5143"),d.a.createElement(je,{value:"\u6e2f\u5e01"},"\u6e2f\u5e01")))),d.a.createElement(v["a"],{span:6,className:W.a.isInvestmentProductCol},d.a.createElement(Ie,{label:"\u5355\u72ec\u5c55\u793a\u5b50\u4efd\u989d\u57fa\u91d1",name:"isShowSonProduct"},d.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},d.a.createElement(je,{key:Object(M["q"])(3),value:0},"\u5426"),d.a.createElement(je,{key:Object(M["q"])(3),value:1},"\u662f"))))))),d.a.createElement("div",{className:W.a.dataTable},d.a.createElement("div",{className:W.a.operationBtn},d.a.createElement("div",null,R&&d.a.createElement(h["a"],{type:"primary",icon:d.a.createElement(D["a"],null),onClick:this._onAdd},"\u65b0\u5efa"),R&&d.a.createElement(h["a"],{type:"primary",onClick:this._batchUpload},"\u6279\u91cf\u4e0a\u4f20"),q&&d.a.createElement(m["a"],{overlay:d.a.createElement(f["a"],null,d.a.createElement(f["a"].Item,{key:"1",disabled:0===r.length,onClick:this._export},"\u5bfc\u51fa\u9009\u4e2d"),d.a.createElement(f["a"].Item,{key:"0",onClick:this._downloadAll},"\u5bfc\u51fa\u5168\u90e8"))},d.a.createElement(h["a"],null,"\xa0\xa0\u67e5\u8be2\u5185\u5bb9\u5bfc\u51fa",d.a.createElement(F["a"],null))),q&&d.a.createElement(m["a"],{overlay:d.a.createElement(f["a"],null,d.a.createElement(f["a"].Item,{key:"1",disabled:0===r.length,onClick:function(){return e._exportMode(0)}},"\u5bfc\u51fa\u9009\u4e2d"),d.a.createElement(f["a"].Item,{key:"0",onClick:function(){return e._exportMode(1)}},"\u5bfc\u51fa\u5168\u90e8"))},d.a.createElement(h["a"],null,"\xa0\xa0\u4ea7\u54c1\u8981\u7d20\u5bfc\u51fa",d.a.createElement(F["a"],null))),R&&d.a.createElement(Ce,null),d.a.createElement(Ee,null)),d.a.createElement(h["a"],{type:"primary",onClick:function(){return e._handleCalc(i)}},1===i?"\u5173\u95ed\u8ba1\u7b97\u6570\u636e":"\u5f00\u542f\u8ba1\u7b97\u6570\u636e")),d.a.createElement(K["a"],{loading:k,columns:1===i?this.columns:this.columns2,dataSource:C&&C.list,total:C&&C.total,pageNum:n.current,rowKey:function(e){return e.productId},onChange:function(t,a,n){return e._tableChange(t,a,n)},rowSelection:x,scroll:{x:"100%",scrollToFirstRowOnChange:!0}}),s&&d.a.createElement(U["a"],{modalFlag:s,closeModal:this.closeModal,templateMsg:"\u4ea7\u54c1\u4fe1\u606f\u6a21\u677f\u4e0b\u8f7d",templateUrl:"/product/import/template?tokenId=".concat(Object(M["l"])("vipAdminToken")),onOk:this.closeModal,url:"/product/import"}),p&&d.a.createElement($,{isModalVisible:p,closeModal:this.handleSort,sortNum:S,productFullName:O,productId:w})))}}]),a}(u["PureComponent"]))||fe),Le=Te,Re=a("GL11"),_e=a.n(Re),Fe=[{key:"tab1",tab:"\u8bc1\u5238\u7c7b"}],De=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(e){var n;return Object(r["a"])(this,a),n=t.call(this,e),n.onOperationTabChange=function(e){n.setState({operationKey:e})},n.state={operationKey:"tab1"},n}return Object(l["a"])(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"Customerinfo/queryServer"})}},{key:"render",value:function(){var e=this.state.operationKey,t={tab1:d.a.createElement(Le,null)};return d.a.createElement(s["a"],{title:"\u4ea7\u54c1\u4fe1\u606f\u5217\u8868"},d.a.createElement(i["a"],{className:_e.a.tabsCard},d.a.createElement(n["a"],{bordered:!1,tabList:Fe,onTabChange:this.onOperationTabChange},t[e])))}}]),a}(u["Component"]);t["default"]=Object(p["b"])((function(e){var t=e.Customerinfo;return{Customerinfo:t}}))(De)},GL11:function(e,t,a){e.exports={tabsCard:"antd-pro-pages-product-list-style-tabsCard"}},TYIg:function(e,t,a){e.exports={container:"antd-pro-pages-product-list-components-product-list-container",header:"antd-pro-pages-product-list-components-product-list-header",filter:"antd-pro-pages-product-list-components-product-list-filter",btnGroup:"antd-pro-pages-product-list-components-product-list-btnGroup",showMore:"antd-pro-pages-product-list-components-product-list-showMore",dataTable:"antd-pro-pages-product-list-components-product-list-dataTable",operationBtn:"antd-pro-pages-product-list-components-product-list-operationBtn",calcWrapper:"antd-pro-pages-product-list-components-product-list-calcWrapper",isInvestmentProductCol:"antd-pro-pages-product-list-components-product-list-isInvestmentProductCol"}},ao5B:function(e,t,a){e.exports={modalWarp:"antd-pro-pages-product-list-components-split-share-styles-modalWarp",inlinStyle:"antd-pro-pages-product-list-components-split-share-styles-inlinStyle",extraInfo:"antd-pro-pages-product-list-components-split-share-styles-extraInfo",warpSpace:"antd-pro-pages-product-list-components-split-share-styles-warpSpace"}}}]);