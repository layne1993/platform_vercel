(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{Tm1g:function(e,a,t){"use strict";t.r(a);t("2qtc");var n=t("kLXV"),l=(t("g9YV"),t("wCAj")),r=(t("DYRE"),t("zeV3")),o=(t("+L6B"),t("2/Rp")),c=(t("fu2T"),t("gK9i")),i=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),d=t("0Owb"),m=(t("IzEo"),t("bx4M")),u=(t("5NDa"),t("5rEg")),p=t("k1fw"),g=(t("y8nQ"),t("Vl3Y")),E=t("tJVT"),f=(t("/xke"),t("TeRw")),b=(t("Znn+"),t("ZTPi")),h=t("q1tI"),y=t.n(h),C=t("9kvl"),O=t("xvlK"),k=t("4i/N"),v=t("Hx5s"),I=t("cKdy"),M=t.n(I),N=t("+n12"),R=(b["a"].TabPane,function(e,a,t,n,l){f["default"][e||"info"]({top:30,message:a,description:t,placement:n,duration:l||3})}),w={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},D=[{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productFullName"}],T=function(e){var a=e.dispatch,t=e.match.params,f=e.saveLoading,b=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["60200"]||{},I=b.authEdit,T=b.authExport,j=g["a"].useForm(),F=Object(E["a"])(j,1),S=F[0],q=Object(h["useState"])("1"),z=Object(E["a"])(q,2),L=(z[0],z[1],Object(h["useState"])(!1)),x=Object(E["a"])(L,2),U=x[0],B=x[1],V=Object(h["useState"])([]),_=Object(E["a"])(V,2),P=_[0],A=_[1],K=Object(h["useState"])(!1),J=Object(E["a"])(K,2),H=J[0],Y=J[1],W=function(){S.setFieldsValue({organizationMatching:[{answerContent:"\u662f",questionContent:""}],organizationNoMatching:[{answerContent:"\u662f",questionContent:""}],personalMatching:[{answerContent:"\u662f",questionContent:""}],personalNoMatching:[{answerContent:"\u662f",questionContent:""}]})},Z=function(){C["c"].goBack()},Q=function(){a({type:"DOUBLE_RECORD/maxVersion",payload:{doubleType:"2"},callback:function(e){1008===e.code&&S.setFieldsValue({version:e.data})}})},X=function(){a({type:"DOUBLE_RECORD/templateInfo",payload:{templateCode:t.id,doubleType:2},callback:function(e){var a=e.data,t=e.code;1008===t&&(a.template&&1===a.template.publishStatus&&Y(!0),S.setFieldsValue({organizationMatching:a.organizationMatching,organizationNoMatching:a.organizationNoMatching,personalMatching:a.personalMatching,personalNoMatching:a.personalNoMatching,version:a.template&&a.template.versionNumber}))}})},G=function(){a({type:"DOUBLE_RECORD/editIngTemplateInfo",payload:{doubleType:2},callback:function(e){var a=e.data,t=e.code;1008===t&&(null===a.template?(Q(),W()):S.setFieldsValue({organizationMatching:a.organizationMatching,organizationNoMatching:a.organizationNoMatching,personalMatching:a.personalMatching,personalNoMatching:a.personalNoMatching,version:a.template&&a.template.versionNumber}))}})},$=function(e){var t=S.getFieldsValue();a({type:"DOUBLE_RECORD/crateOrUpdateTemplate",payload:Object(p["a"])(Object(p["a"])({},t),{},{publishStatus:e,doubleType:"2",riskType:"1"}),callback:function(a){if(1008===a.code)R("success","\u63d0\u9192","".concat(0===e?"\u521b\u5efa":"\u53d1\u5e03","\u6210\u529f\uff01")),console.log(a),C["c"].push({pathname:"/raisingInfo/doubleRecordConfig/aiMindDetails/".concat(a.data.sysWordId)});else{var t=a.message||"\u521b\u5efa\u5931\u8d25\uff01";R("error","\u63d0\u9192",t)}}})},ee=function(){a({type:"DOUBLE_RECORD/influenceProductList",payload:{doubleType:2},callback:function(e){var a=e.data,t=void 0===a?[]:a,n=e.code,l=e.message;if(1008===n)t.length?(A(t),B(!0)):$(1);else{var r=l||"\u83b7\u53d6\u53d7\u5f71\u54cd\u7684\u4ea7\u54c1\u5931\u8d25\uff01";R("error","\u63d0\u9192",r)}}})};"0"===t.id?Object(h["useEffect"])(G,[]):X();var ae=function(e){S.validateFields().then((function(a){var t=S.getFieldsValue();return t.personalMatching?t.personalNoMatching?t.organizationMatching?t.organizationNoMatching?void(0===e?$(e):ee()):R("error","\u63d0\u9192","\u673a\u6784\u98ce\u9669\u4e0d\u5339\u914d\u8bdd\u672f\u4e0d\u80fd\u4e3a\u7a7a\uff01"):R("error","\u63d0\u9192","\u673a\u6784\u98ce\u9669\u5339\u914d\u8bdd\u672f\u4e0d\u80fd\u4e3a\u7a7a\uff01"):R("error","\u63d0\u9192","\u4e2a\u4eba\u4e0d\u98ce\u9669\u5339\u914d\u8bdd\u672f\u4e0d\u80fd\u4e3a\u7a7a\uff01"):R("error","\u63d0\u9192","\u4e2a\u4eba\u98ce\u9669\u5339\u914d\u8bdd\u672f\u4e0d\u80fd\u4e3a\u7a7a\uff01")})).catch((function(e){}))},te=function(e,a){var t=S.getFieldValue(e);t.splice(a,0,{answerContent:"\u662f",questionContent:""}),S.setFieldsValue({type:t})},ne=function(){window.location.href="".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/attachments/downloadFile","?source=",105,"&codeType=",1100,"&tokenId=").concat(Object(N["l"])("vipAdminToken"))};return y.a.createElement(v["a"],{title:"\u53cc\u5f55\u8be6\u60c5"},y.a.createElement("div",{className:M.a.doubleBaseForm},y.a.createElement(g["a"],{form:S,autoComplete:"off"},y.a.createElement(m["a"],{title:"\u57fa\u672c\u4fe1\u606f"},y.a.createElement(g["a"].Item,{name:"version",labelCol:{span:8},wrapperCol:{span:8},label:"\u7248\u672c\u540d\u79f0",extra:"\u7cfb\u7edf\u53cc\u5f55\u7248\u672c\u53f7\u81ea\u52a8\u751f\u6210\uff0c\u6bcf\u6b21\u81ea\u52a8\u52a01"},y.a.createElement(u["a"],{disabled:!0}))),y.a.createElement(m["a"],{title:y.a.createElement("p",null,"\u8bdd\u672f\u4fe1\u606f",T&&y.a.createElement("a",{onClick:ne},"\u70b9\u51fb\u67e5\u770b\u652f\u6301\u901a\u914d\u7b26\u4fe1\u606f")),className:M.a.questionCard},y.a.createElement(c["a"],{defaultActiveKey:"1"},y.a.createElement(c["a"].Panel,{header:"\u98ce\u9669\u5339\u914d\u60c5\u51b5\uff08\u4e2a\u4eba\uff09\u7248",key:"1",forceRender:!0},y.a.createElement(g["a"].List,{name:"personalMatching"},(function(e,a){a.add;var t=a.remove;return y.a.createElement(y.a.Fragment,null,e.map((function(a,n){return y.a.createElement(i["a"],{gutter:8,key:n},y.a.createElement(s["a"],{span:22},y.a.createElement(g["a"].Item,Object(d["a"])({},w,{label:"\u95ee\u9898".concat(n+1),extra:"\u8981\u6c42\u56de\u7b54:\u662f"},a,{name:[a.name,"questionContent"],rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u95ee\u9898"}]}),y.a.createElement(u["a"],{disabled:H}))),!H&&y.a.createElement(s["a"],{span:2},y.a.createElement("span",{className:M.a.addIcon,title:"\u5728\u6b64\u95ee\u9898\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u95ee\u9898",onClick:function(){te("personalMatching",n+1)}},y.a.createElement(O["a"],null)),e.length>1?y.a.createElement("span",{className:M.a.delIcon,onClick:function(){return t(a.name)}},y.a.createElement(k["a"],null)):null))})))}))),y.a.createElement(c["a"].Panel,{header:"\u98ce\u9669\u4e0d\u5339\u914d\u60c5\u51b5\uff08\u4e2a\u4eba\uff09",key:"2",forceRender:!0},y.a.createElement(g["a"].List,{name:"personalNoMatching"},(function(e,a){a.add;var t=a.remove;return y.a.createElement(y.a.Fragment,null,e.map((function(a,n){return y.a.createElement(i["a"],{gutter:8,key:n},y.a.createElement(s["a"],{span:22},y.a.createElement(g["a"].Item,Object(d["a"])({},w,{label:"\u95ee\u9898".concat(n+1),extra:"\u8981\u6c42\u56de\u7b54:\u662f"},a,{name:[a.name,"questionContent"],rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u95ee\u9898"}]}),y.a.createElement(u["a"],{disabled:H}))),!H&&y.a.createElement(s["a"],{span:2},y.a.createElement("span",{className:M.a.addIcon,title:"\u5728\u6b64\u95ee\u9898\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u95ee\u9898",onClick:function(){te("personalNoMatching",n+1)}},y.a.createElement(O["a"],null)),e.length>1?y.a.createElement("span",{className:M.a.delIcon,onClick:function(){return t(a.name)}},y.a.createElement(k["a"],null)):null))})))}))),y.a.createElement(c["a"].Panel,{header:"\u98ce\u9669\u5339\u914d\u60c5\u51b5\uff08\u673a\u6784\uff09\u7248",key:"3",forceRender:!0},y.a.createElement(g["a"].List,{name:"organizationMatching"},(function(e,a){a.add;var t=a.remove;return y.a.createElement(y.a.Fragment,null,e.map((function(a,n){return y.a.createElement(i["a"],{gutter:8,key:n},y.a.createElement(s["a"],{span:22},y.a.createElement(g["a"].Item,Object(d["a"])({},w,{label:"\u95ee\u9898".concat(n+1),extra:"\u8981\u6c42\u56de\u7b54:\u662f"},a,{name:[a.name,"questionContent"],rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u95ee\u9898"}]}),y.a.createElement(u["a"],{disabled:H}))),!H&&y.a.createElement(s["a"],{span:2},y.a.createElement("span",{className:M.a.addIcon,title:"\u5728\u6b64\u95ee\u9898\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u95ee\u9898",onClick:function(){te("organizationMatching",n+1)}},y.a.createElement(O["a"],null)),e.length>1?y.a.createElement("span",{className:M.a.delIcon,onClick:function(){return t(a.name)}},y.a.createElement(k["a"],null)):null))})))}))),y.a.createElement(c["a"].Panel,{header:"\u98ce\u9669\u4e0d\u5339\u914d\u60c5\u51b5\uff08\u673a\u6784\uff09",key:"4",forceRender:!0},y.a.createElement(g["a"].List,{name:"organizationNoMatching"},(function(e,a){a.add;var t=a.remove;return y.a.createElement(y.a.Fragment,null,e.map((function(a,n){return y.a.createElement(i["a"],{gutter:8,key:n},y.a.createElement(s["a"],{span:22},y.a.createElement(g["a"].Item,Object(d["a"])({},w,{label:"\u95ee\u9898".concat(n+1),extra:"\u8981\u6c42\u56de\u7b54:\u662f"},a,{name:[a.name,"questionContent"],rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u95ee\u9898"}]}),y.a.createElement(u["a"],{disabled:H}))),!H&&y.a.createElement(s["a"],{span:2},y.a.createElement("span",{className:M.a.addIcon,title:"\u5728\u6b64\u95ee\u9898\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u95ee\u9898",onClick:function(){te("organizationNoMatching",n+1)}},y.a.createElement(O["a"],null)),e.length>1?y.a.createElement("span",{className:M.a.delIcon,onClick:function(){return t(a.name)}},y.a.createElement(k["a"],null)):null))})))}))))),!H&&I&&y.a.createElement(i["a"],{justify:"center",align:"middle",style:{height:"50px"}},y.a.createElement(r["b"],null,y.a.createElement(o["a"],{onClick:Z}," \u53d6\u6d88 "),y.a.createElement(o["a"],{type:"primary",htmlType:"submit",onClick:function(){return ae(0)},loading:f},"\u4fdd\u5b58"),y.a.createElement(o["a"],{type:"primary",htmlType:"submit",onClick:function(){return ae(1)},loading:f},"\u53d1\u5e03")))),y.a.createElement(n["a"],{title:"\u7cfb\u7edf\u53cc\u5f55\u6a21\u677f\u4fee\u6539",visible:U,onCancel:function(){return B(!1)},maskClosable:!1,width:800,footer:[y.a.createElement(o["a"],{key:"back",onClick:function(){return B(!1)}}," \u53d6\u6d88"),y.a.createElement(o["a"],{key:"submit",type:"primary",onClick:function(){return $(1)},loading:f},"\u4fdd\u5b58")]},y.a.createElement("p",null,"\u70b9\u51fb\u4fdd\u5b58\u540e\uff0c\u7cfb\u7edf\u53cc\u5f55\u6a21\u677f\u5185\u5bb9\u4f1a\u53d8\u66f4\u4e3a\u65b0\u5185\u5bb9\uff0c\u4f7f\u7528\u8be5\u6a21\u677f\u7684\u4ea7\u54c1\u4ea7\u54c1\u53cc\u5f55\u6a21\u677f\u5c06\u4e00\u8d77\u66f4\u65b0\uff0c\u8bf7\u60a8\u786e\u8ba4\u662f\u5426\u4fdd\u5b58\u3002"),y.a.createElement(l["a"],{columns:D,rowKey:"productId",dataSource:P,scroll:{x:"100%",y:240}}))))};a["default"]=Object(C["b"])((function(e){var a=e.DOUBLE_RECORD,t=e.loading;return{DOUBLE_RECORD:a,loading:t.effects["DOUBLE_RECORD/crateOrUpdateTemplate"],saveLoading:t.effects["DOUBLE_RECORD/crateOrUpdateTemplate"]}}))(T)},cKdy:function(e,a,t){e.exports={doubleBaseForm:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-doubleBaseForm",baseInfo:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-baseInfo",title:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-title",hr:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-hr",wildcard:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-wildcard",addIcon:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-addIcon",delIcon:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-delIcon",questionCard:"antd-pro-pages-double-record-config-details-a-i-mind-details-styles-questionCard"}}}]);