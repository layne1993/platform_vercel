(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[55],{"45Cj":function(e,a,t){e.exports={onlineDiskWarp:"antd-pro-pages-components-m-x-online-disk-online-disk-onlineDiskWarp",nodeTitle:"antd-pro-pages-components-m-x-online-disk-online-disk-nodeTitle",extra:"antd-pro-pages-components-m-x-online-disk-online-disk-extra",titleBox:"antd-pro-pages-components-m-x-online-disk-online-disk-titleBox",leftBox:"antd-pro-pages-components-m-x-online-disk-online-disk-leftBox",optionBtn:"antd-pro-pages-components-m-x-online-disk-online-disk-optionBtn"}},"5aDo":function(e,a,t){"use strict";t.r(a);t("2qtc");var n=t("kLXV"),l=(t("Znn+"),t("ZTPi")),r=t("0Owb"),c=(t("T2oS"),t("W9HT")),o=(t("DYRE"),t("zeV3")),i=(t("+L6B"),t("2/Rp")),d=(t("aHsQ"),t("sGsY")),s=(t("R9oj"),t("ECub")),u=(t("IzEo"),t("bx4M")),m=(t("bP8k"),t("gFTJ")),f=(t("14J3"),t("BMrR")),p=(t("sRBo"),t("kaz8")),E=(t("7Kak"),t("9yH6")),y=(t("iQDF"),t("+eQT")),b=(t("jCWc"),t("kPKH")),N=(t("OaEy"),t("2fM7")),g=(t("y8nQ"),t("Vl3Y")),O=t("tJVT"),h=(t("/xke"),t("TeRw")),k=(t("5GOC"),t("JsLm")),I=t("q1tI"),v=t.n(I),j=t("Hx5s"),L=t("9kvl"),D=t("nT/m"),C=t("+n12"),w=t("rCen"),T=t.n(w),x=(t("Xi6J"),t("kl6h")),F=(t("giR+"),t("fyUT")),S=(t("5NDa"),t("5rEg")),P=y["a"].RangePicker,B=N["a"].Option,R=S["a"].TextArea,q=function(e){var a=e.type,t={input:function(e){var a=e.label,t=e.placeholder,n=(e.options,e.required),l=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:l,rules:[{required:Boolean(n)}]},v.a.createElement(S["a"],{placeholder:t,allowClear:!0}))},inputNumber:function(e){var a=e.label,t=e.placeholder,n=(e.options,e.required),l=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:l,rules:[{required:Boolean(n)}]},v.a.createElement(F["a"],{style:{width:"100%"},placeholder:t}))},textArea:function(e){var a=e.label,t=e.placeholder,n=(e.options,e.required),l=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:l,rules:[{required:Boolean(n)}]},v.a.createElement(R,{placeholder:t,allowClear:!0}))},radio:function(e){var a=e.label,t=(e.placeholder,e.options),n=void 0===t?[]:t,l=e.required,r=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:r,rules:[{required:Boolean(l)}]},v.a.createElement(E["a"].Group,null,n.map((function(e){return v.a.createElement(E["a"],{key:e.value,value:e.value},e.label)}))))},datePicker:function(e){var a=e.label,t=e.placeholder,n=(e.options,e.required),l=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:l,rules:[{required:Boolean(n)}]},v.a.createElement(y["a"],{placeholder:t||"\u8bf7\u9009\u62e9",allowClear:!0}))},rangePicker:function(e){var a=e.label,t=(e.placeholder,e.options,e.required),n=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:n,rules:[{required:Boolean(t)}]},v.a.createElement(P,{allowClear:!0}))},timePicker:function(e){var a=e.label,t=e.placeholder,n=(e.options,e.required),l=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:l,rules:[{required:Boolean(n)}]},v.a.createElement(x["a"],{placeholder:t}))},select:function(e){var a=e.label,t=e.placeholder,n=e.options,l=void 0===n?[]:n,r=e.required,c=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:c,rules:[{required:Boolean(r)}]},v.a.createElement(N["a"],{placeholder:t,allowClear:!0},l.map((function(e){return v.a.createElement(B,{key:e.value,value:e.value},e.label)}))))},selectMultiple:function(e){var a=e.label,t=e.placeholder,n=e.options,l=void 0===n?[]:n,r=e.required,c=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:c,rules:[{required:Boolean(r)}]},v.a.createElement(N["a"],{mode:"multiple",placeholder:t,allowClear:!0,filterOption:function(e,a){return a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.map((function(e){return v.a.createElement(B,{key:e.value,value:e.value},e.label)}))))},checkbox:function(e){var a=e.label,t=(e.placeholder,e.options),n=void 0===t?[]:t,l=e.required,r=e.fieldName;e.message;return v.a.createElement(g["a"].Item,{label:a,name:r,rules:[{required:Boolean(l)}]},v.a.createElement(p["a"].Group,null,n.map((function(e){return v.a.createElement(p["a"],{key:e.value,value:e.value},e.label)}))))}};return t[a](e)},A=q,Y=t("RgPF"),M=t.n(Y),V=t("wd/R"),K=t.n(V),U=function(e){var a=e.data,t=Object(I["useState"])([]),n=Object(O["a"])(t,2),l=n[0],r=n[1],c=function(){r(a.slice(0,2))};Object(I["useEffect"])(c,[e]);var o=function(){r(a)};return v.a.createElement(u["a"],{title:"\u64cd\u4f5c\u8bb0\u5f55",className:M.a.editInfo,id:"edit-info"},Array.isArray(l)&&l.map((function(e,a){return v.a.createElement("p",{key:a,className:M.a.editInfoItem},v.a.createElement("span",null,v.a.createElement("span",null,0===a?"\u521b\u5efa\u4eba":"\u4fee\u6539\u4eba"),"\uff1a",e.managerUserName||"--"),v.a.createElement("span",null,"\u521b\u5efa\u65f6\u95f4\uff1a",e.updateTime?K()(e.updateTime).format("YYYY-MM-DD HH:mm:ss"):"--"))})),l.length!==a.length&&v.a.createElement("span",{className:M.a.showMore,onClick:o},"\u66f4\u591a"))},W=U,H=t("27j4"),J=t.n(H),_=(N["a"].Option,function(e){var a=e.nodeHandler;return v.a.createElement(v.a.Fragment,null,v.a.createElement(f["a"],null,v.a.createElement(b["a"],{span:12},v.a.createElement(g["a"].Item,{name:"handlerList",label:"\u8282\u70b9\u9ed8\u8ba4\u5904\u7406\u4eba",extra:"\u53ef\u591a\u9009"},v.a.createElement(N["a"],{disabled:!0,mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",style:{maxWidth:400},allowClear:!0,filterOption:function(e,a){return a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},a.map((function(e){return v.a.createElement(N["a"].Option,{value:e.managerUserId,key:e.managerUserId},e.userName)}))))),v.a.createElement(b["a"],{span:12},v.a.createElement(g["a"].Item,{name:"cutOffTime",label:"\u8282\u70b9\u622a\u6b62\u65f6\u95f4\uff08\u7a7a\u5219\u4e0d\u63d0\u9192\uff09",extra:"\u5230\u8fbe\u6b64\u65f6\u95f4\u672a\u7ed3\u675f\uff0c\u5c06\u8fdb\u884c\u63d0\u9192"},v.a.createElement(y["a"],{showTime:!0}))),v.a.createElement(b["a"],{span:12},v.a.createElement(g["a"].Item,{name:"remindNotifier",label:"\u622a\u6b62\u540e\u901a\u77e5\u4eba\u5458"},v.a.createElement(E["a"].Group,null,v.a.createElement(E["a"],{value:1},"\u8282\u70b9\u5904\u7406\u4eba"),v.a.createElement(E["a"],{value:2},"\u5168\u6d41\u7a0b\u5904\u7406\u4eba")))),v.a.createElement(b["a"],{span:12},v.a.createElement(g["a"].Item,{name:"remindModel",label:"\u901a\u77e5\u65b9\u5f0f"},v.a.createElement(p["a"].Group,{style:{width:"100%"}},D["j"].map((function(e){return v.a.createElement(p["a"],{key:e.value,value:e.value},e.label)}))))),v.a.createElement(b["a"],{span:24},v.a.createElement(g["a"].Item,{name:"auditOpinion",label:"\u5907\u6ce8"},v.a.createElement(J.a,{rows:4})))))}),G=_;_.defaultProps={nodeHandler:[]};t("ozfa");var z=t("MJZm"),Z=(t("qVdP"),t("jsC+")),Q=(t("lUTK"),t("BvKs")),X=t("oBTY"),$=(t("miYZ"),t("tsqr")),ee=t("9og8"),ae=t("PpiC"),te=t("k1fw"),ne=t("WmNS"),le=t.n(ne),re=t("RCxd"),ce=t("xvlK"),oe=t("FrMl"),ie=t("AEkp"),de=t("LvDl"),se=t.n(de),ue=t("45Cj"),me=t.n(ue),fe=t("q/5X"),pe=t.n(fe),Ee=t("ZYLO"),ye=t.n(Ee),be=t("1zlZ"),Ne=t.n(be),ge=t("wRhG"),Oe=t.n(ge),he=t("Y2kK"),ke=t.n(he),Ie=S["a"].Search,ve={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:16},sm:{span:16}}},je=function(e,a,t,n){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;h["default"][e||"info"]({message:a,description:t,placement:n,duration:l||3})},Le=function e(a){if(!Array.isArray(a))return[];var t=[];return a.map((function(a){t.push(Object(te["a"])(Object(te["a"])({},a),{},{icon:!a.isLeaf&&v.a.createElement("img",{src:pe.a}),title:a.isLeaf?a.fileName:a.nodeName,key:a.isLeaf?a.sharedNetWorkFileId:a.nodeId,children:a.children&&e(a.children)}))})),t},De=function e(a,t,n){return a.map((function(a){return a.key===t?Object(te["a"])(Object(te["a"])({},a),{},{children:n}):a.children?Object(te["a"])(Object(te["a"])({},a),{},{icon:v.a.createElement("img",{src:pe.a}),children:e(a.children,t,n)}):a}))},Ce={title:void 0,key:0,parentNodeId:0},we=function(e){Ce=e},Te=function(e){var a=e.loading,t=e.addNetWorkDiskLoading,l=e.updateFileNameLoading,d=e.searchLoading,s=e.dispatch,u=Object(ae["a"])(e,["loading","addNetWorkDiskLoading","updateFileNameLoading","searchLoading","dispatch"]),m=g["a"].useForm(),p=Object(O["a"])(m,1),E=p[0],y=Object(I["useState"])([]),N=Object(O["a"])(y,2),h=N[0],k=N[1],j=Object(I["useState"])(void 0),L=Object(O["a"])(j,2),D=L[0],C=L[1],w=Object(I["useState"])(!1),T=Object(O["a"])(w,2),x=T[0],F=T[1],P=Object(I["useState"])(!0),B=Object(O["a"])(P,2),R=B[0],q=B[1],A=Object(I["useState"])(!1),Y=Object(O["a"])(A,2),M=Y[0],V=Y[1],U=Object(I["useState"])([]),W=Object(O["a"])(U,2),H=W[0],J=W[1],_=Object(I["useState"])(!1),G=Object(O["a"])(_,2),ne=(G[0],G[1]),de=Object(I["useState"])([]),ue=Object(O["a"])(de,2),fe=ue[0],pe=ue[1],Ee=Object(I["useState"])([]),be=Object(O["a"])(Ee,2),ge=be[0],he=be[1],Te=Object(I["useState"])([]),xe=Object(O["a"])(Te,2),Fe=xe[0],Se=xe[1];Object(I["useEffect"])((function(){we({title:void 0,key:0,parentNodeId:0})}),[]);var Pe=function(){s({type:"ONLINEDISK/getTreeData",payload:Object(te["a"])(Object(te["a"])({},u),{},{nodeId:null}),callback:function(e){var a=e.code,t=e.data;1008===a?k(Le(t)):je("error","\u63d0\u9192","\u67e5\u8be2\u5931\u8d25\uff01")}})};Object(I["useEffect"])(Pe,[]);var Be=function(e){var a=e.key;e.children;return console.log(a,"loadData-------------------"),new Promise((function(e){s({type:"ONLINEDISK/getTreeData",payload:Object(te["a"])(Object(te["a"])({},u),{},{nodeId:a||null}),callback:function(t){var n=t.code,l=t.data,r=t.message;if(1008===n)k((function(e){return De(e,a,Le(l))}));else{var c=r||l||"\u67e5\u8be2\u5931\u8d25\uff01";je("error","\u63d0\u9192",c)}e()}})}))},Re=function(){F(!1),q(!0),V(!1),E.setFieldsValue({folderName:void 0,fileName:void 0})},qe=function(e){s({type:"ONLINEDISK/addNetWorkDisk",payload:Object(te["a"])(Object(te["a"])({},u),{},{nodeId:M?void 0:Ce.nodeId,parentNodeId:M?Ce.key:Ce.parentNodeId,nodeName:e}),callback:function(e){var a=e.code,t=e.message;if(1008===a)Re(),Ce.parentNodeId?Be({key:M?Ce.key:Ce.parentNodeId}):M?Be({key:Ce.key}):Pe();else{var n=t||"\u64cd\u4f5c\u5931\u8d25\uff01";je("error","\u63d0\u9192",n)}}})},Ae=function(e){s({type:"ONLINEDISK/updateFileName",payload:Object(te["a"])(Object(te["a"])({},u),{},{sharedNetWorkFileId:Ce.key,fileName:e}),callback:function(e){var a=e.code,t=e.message;if(1008===a)Re(),Be({key:Ce.parentNodeId});else{var n=t||"\u64cd\u4f5c\u5931\u8d25\uff01";je("error","\u63d0\u9192",n)}}})},Ye=function(e){s({type:"ONLINEDISK/deleteFile",payload:{sharedNetWorkFileId:e},callback:function(e){var a=e.code,t=(e.data,e.message);if(1008===a)Be({key:Ce.parentNodeId});else{var n=t||"\u5220\u9664\u5931\u8d25\uff01";je("error","\u63d0\u9192",n)}}})},Me=function(e){s({type:"ONLINEDISK/deleteFolder",payload:{nodeId:e},callback:function(e){var a=e.code,t=(e.data,e.message);if(1008===a)Ce.parentNodeId?Be({key:Ce.parentNodeId}):(Pe(),we({title:"",key:0,parentNodeId:0})),je("success","\u63d0\u9192","\u5220\u9664\u6210\u529f\uff01");else{var n=t||"\u5220\u9664\u5931\u8d25\uff01";je("error","\u63d0\u9192",n)}}})},Ve=function(e,a){we(Object(te["a"])({},e)),a.stopPropagation(),e.isLeaf?n["a"].confirm({title:"\u5220\u9664\uff1f",icon:v.a.createElement(re["a"],null),content:"\u786e\u5b9a\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return Ye(e.key)}}):n["a"].confirm({title:"\u5220\u9664\uff1f",icon:v.a.createElement(re["a"],null),content:"\u786e\u5b9a\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return Me(e.key)}})},Ke=function(){F(!0),q(!1),E.setFieldsValue({folderName:void 0})},Ue=function(e,a){we(e),a.stopPropagation(),e.isLeaf?E.setFieldsValue({fileName:e.title}):(q(!1),E.setFieldsValue({folderName:e.title})),F(!0)},We=function(e,a){C(e),we(a.node||{})},He=function(e){pe(e),ne(!0)},Je=function(e){e=e&&e.trim(),e?s({type:"ONLINEDISK/diskSearch",payload:Object(te["a"])(Object(te["a"])({},u),{},{fileName:e}),callback:function(e){var a=e.code,t=e.data,n=e.message;if(1008===a)J(Le(t.jsonArray)||[]),He(t.list),0===t.jsonArray.length&&je("warning","\u63d0\u9192","\u6ca1\u6709\u76f8\u5173\u7684\u6587\u4ef6\u4fe1\u606f\uff01");else{var l=n||t||"\u67e5\u8be2\u5931\u8d25\uff01";je("error","\u63d0\u9192",l)}}}):J([])},_e=function(){var e=Object(ee["a"])(le.a.mark((function e(a){var t,n,l,r=arguments;return le.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:[],n=$["default"].loading("\u6587\u4ef6\u4e0a\u4f20\u4e2d...",0),l=[],t.map((function(e){var a=new window.FormData;if(u)for(var t in u)a.append(t,u[t]);a.append("nodeId",Ce.key),a.append("file",e),l.push(ie["a"].postMultipart("/shareNetworkFile/addNetWorkFile",a))})),Promise.all(l).then((function(e){if(Array.isArray(e)){var a=[];e.map((function(e){1008!==e.code&&a.push(e)})),0===a.length?(je("success","\u63d0\u9192","\u4e0a\u4f20\u6210\u529f"),console.log(Ce,"checkedRow"),Be({key:Ce.key})):je("warning","\u63d0\u793a","\u4e0a\u4f20\u5931\u8d25\uff01","topRight")}n()})).catch((function(e){console.log(e)})),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ge=(se.a.debounce(_e,100),function(){var e=Object(ee["a"])(le.a.mark((function e(a){var t,n,l,r=arguments;return le.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:[],n=$["default"].loading("\u6587\u4ef6\u4e0a\u4f20\u4e2d...",0),l=[],t.map((function(e){var a=new window.FormData;if(u)for(var t in u)a.append(t,u[t]);if(a.append("nodeId",Ce.key),a.append("file",e),e.webkitRelativePath){var n=e.webkitRelativePath.split("/");n.pop(),a.append("pathUrl",n.join("/"))}l.push(ie["a"].postMultipart("/shareNetworkFile/moreFileUpload",a))})),Promise.all(l).then((function(e){if(Array.isArray(e)){var a=[];e.map((function(e){1008!==e.code&&a.push(e)})),0===a.length?(je("success","\u63d0\u9192","\u4e0a\u4f20\u6210\u529f"),console.log(Ce,"checkedRow"),Be({key:Ce.key})):je("warning","\u63d0\u793a","\u4e0a\u4f20\u5931\u8d25\uff01","topRight")}n()})).catch((function(e){console.log(e)})),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),ze=(se.a.debounce(Ge,100),function(){E.validateFields().then((function(e){var a=E.getFieldsValue();a.folderName&&qe(a.folderName),a.fileName&&Ae(a.fileName),F(!1)}))}),Ze=function(e,a){we(e),a.stopPropagation()},Qe=function(e){e.domEvent&&e.domEvent.stopPropagation(),"3"===e.key&&(F(!0),q(!1),V(!0))},Xe=function(e,a){window.open(e),a.stopPropagation()},$e=function(e){var a=e.status,t=e.message;console.log(Ce,"onSuccessonSuccessonSuccess----------------"),"success"===a?Be({key:Ce.key}):je("warning","\u63d0\u793a",t,"topRight")},ea=function(e,a){var t=a.node,n=Object(X["a"])(ge),l=Object(X["a"])(e);if(Fe.length>e.length){var r=Fe.indexOf(t.key);-1!==r?(n=ge.filter((function(e,a){return a<r})),l=Object(X["a"])(n)):(n=ge.filter((function(a){return e.includes(a)})),l=Object(X["a"])(n))}Se(l),he(n)},aa=function(e){he(e)},ta=function(a){return v.a.createElement("span",{key:a.key},v.a.createElement("div",{className:me.a.titleBox},v.a.createElement("div",{className:me.a.leftBox},v.a.createElement("p",{style:{marginBottom:0}},a.title),a.isLeaf&&v.a.createElement("span",null,a.operateUserName&&v.a.createElement("span",null,a.operateUserName,"\uff0c"),a.updateTime&&K()(a.updateTime).format("YYYY/MM/DD HH:mm"))),e.authEdit&&D&&D[0]===a.key&&v.a.createElement(o["b"],{className:me.a.extra},v.a.createElement("span",{title:"\u5220\u9664",onClick:function(e){return Ve(a,e)},className:me.a.optionBtn},v.a.createElement("img",{src:Ne.a}),"\u5220\u9664"),v.a.createElement("span",{title:"\u4fee\u6539\u540d\u79f0",onClick:function(e){return Ue(a,e)},className:me.a.optionBtn},v.a.createElement("img",{src:ye.a}),"\u7f16\u8f91"),a.isLeaf&&v.a.createElement("span",{title:"\u4e0b\u8f7d",onClick:function(e){return Xe(a.url,e)},className:me.a.optionBtn},v.a.createElement("img",{src:ke.a}),"\u4e0b\u8f7d"),!a.isLeaf&&v.a.createElement(Z["a"],{overlay:v.a.createElement(Q["a"],{onClick:Qe},v.a.createElement(Q["a"].Item,{key:1},v.a.createElement(oe["a"],{params:Object(te["a"])(Object(te["a"])({},u),{},{nodeId:Ce.key}),url:"/shareNetworkFile/addNetWorkFile",uploadProps:{multiple:!0},callback:$e},"\u4e0a\u4f20\u6587\u4ef6")),v.a.createElement(Q["a"].Item,{key:2},v.a.createElement(oe["a"],{params:Object(te["a"])(Object(te["a"])({},u),{},{nodeId:Ce.key}),url:"/shareNetworkFile/moreFileUpload",uploadProps:{directory:!0},callback:$e},"\u4e0a\u4f20\u6587\u4ef6\u5939")),v.a.createElement(Q["a"].Item,{key:3},"\u65b0\u5efa\u6587\u4ef6\u5939"))},v.a.createElement("span",{title:"\u4e0a\u4f20\u64cd\u4f5c",className:me.a.optionBtn,style:{color:"#746d6d"},onClick:function(e){return Ze(a,e)}},v.a.createElement("img",{src:Oe.a})," \u4e0a\u4f20")))))};return v.a.createElement(c["a"],{spinning:a},v.a.createElement("div",{className:me.a.onlineDiskWarp},h.length>0&&v.a.createElement(f["a"],{style:{marginBottom:20}},v.a.createElement(b["a"],{span:12},v.a.createElement(Ie,{loading:d,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898\uff0c\u6216\u5185\u5bb9\uff08\u652f\u6301word\u3001excel\u3001pdf\u3001txt\uff09",onSearch:Je,allowClear:!0}))),v.a.createElement(f["a"],null,v.a.createElement(b["a"],{span:24},H.length>0?v.a.createElement(z["a"].DirectoryTree,{showLine:!0,showIcon:!0,blockNode:!0,height:450,treeData:H,titleRender:ta,checkedKeys:D,onSelect:We,expandedKeys:fe,onExpand:He}):v.a.createElement("div",{style:{display:0===H.length?"block":"none"}},v.a.createElement(z["a"].DirectoryTree,{showLine:!0,showIcon:!0,blockNode:!0,height:450,treeData:h,titleRender:ta,checkedKeys:D,onSelect:We,loadData:Be,expandedKeys:Fe,onExpand:ea,loadedKeys:ge,onLoad:aa})))),v.a.createElement(n["a"],{title:"\u7f51\u76d8\u4fe1\u606f\u7ef4\u62a4",visible:x,onCancel:Re,maskClosable:!1,width:"40%",destroyOnClose:!0,footer:[v.a.createElement(i["a"],{key:"back",onClick:Re},"\u53d6\u6d88"),v.a.createElement(i["a"],{key:"submit",type:"primary",htmlType:"submit",loading:t||l,onClick:ze},"\u786e\u5b9a")]},v.a.createElement(g["a"],Object(r["a"])({},ve,{form:E,onFinish:ze}),R&&v.a.createElement(g["a"].Item,{label:"\u6587\u4ef6\u540d\u79f0",name:"fileName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},v.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165"})),!R&&v.a.createElement(g["a"].Item,{label:"\u6587\u4ef6\u5939\u540d\u79f0",name:"folderName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},v.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),e.authEdit&&0===h.length&&v.a.createElement(f["a"],{justify:"center"},v.a.createElement(i["a"],{icon:v.a.createElement(ce["a"],null),onClick:Ke},"\u65b0\u5efa\u6587\u4ef6\u5939"))))},xe=Object(L["b"])((function(e){var a=e.loading;return{loading:a.effects["ONLINEDISK/getTreeData"],searchLoading:a.effects["ONLINEDISK/diskSearch"],addNetWorkDiskLoading:a.effects["ONLINEDISK/addNetWorkDisk"],updateFileNameLoading:a.effects["ONLINEDISK/updateFileName"]}}))(Te),Fe=t("v9DV"),Se=k["a"].Link,Pe="YYYY-MM-DD: HH:mm:ss",Be=function(e,a,t,n){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;h["default"][e||"info"]({message:a,description:t,placement:n,duration:l||3})},Re={labelCol:{xs:{span:8},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16}}},qe=Object(C["o"])(40100),Ae=qe.authEdit,Ye=qe.authExport,Me=function(e){var a=e.formLoading,t=e.dispatch,p=(e.updateTitleLoading,e.nodeInfoSaveLoading),E=e.match,y=E.params.processId,h=g["a"].useForm(),w=Object(O["a"])(h,1),x=w[0],F=g["a"].useForm(),S=Object(O["a"])(F,1),P=S[0],B=Object(I["useState"])({}),R=Object(O["a"])(B,2),q=R[0],Y=R[1],M=Object(I["useState"])([]),V=Object(O["a"])(M,2),U=V[0],H=V[1],J=Object(I["useState"])(null),_=Object(O["a"])(J,2),z=(_[0],_[1]),Z=Object(I["useState"])(!1),Q=Object(O["a"])(Z,2),X=(Q[0],Q[1],Object(I["useState"])({})),$=Object(O["a"])(X,2),ee=$[0],ae=$[1],te=Object(I["useState"])(null),ne=Object(O["a"])(te,2),le=ne[0],re=ne[1],ce=Object(I["useState"])(null),oe=Object(O["a"])(ce,2),ie=oe[0],de=oe[1],se=Object(I["useState"])([]),ue=Object(O["a"])(se,2),me=ue[0],fe=ue[1],pe=Object(I["useState"])(null),Ee=Object(O["a"])(pe,2),ye=Ee[0],be=Ee[1],Ne=Object(I["useState"])(!1),ge=Object(O["a"])(Ne,2),Oe=ge[0],he=ge[1],ke=Object(I["useState"])([]),Ie=Object(O["a"])(ke,2),ve=Ie[0],je=Ie[1],Le=function(){ie&&t({type:"PRODUCTLIFECYCLEINFO_DETAIL/queryLifeCycleNodeListByReject",payload:{lifecycleFlowId:+y,lifecycleNodeDataId:ie},callback:function(e){if(1008===e.code)je(e.data||[]);else{var a=e.message||e.data||"\u67e5\u8be2\u5931\u8d25";Be("error","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(e.code,"\uff09"),a,"topRight")}}})};Object(I["useEffect"])(Le,[ie]);var De=function(e){var a=e.lifecycleElementList,t={};a.map((function(e){if("datePicker"===e.type&&e.fieldValue)t[e.fieldName]=K()(1*e.fieldValue);else if("rangePicker"===e.type)if(e.fieldValue){var a=e.fieldValue.split("#");t[e.fieldName]=[K()(1*a[0]),K()(1*a[1])]}else t[e.fieldName]=void 0;else"selectMultiple"===e.type||"checkbox"===e.type?t[e.fieldName]=e.fieldValue?JSON.parse(e.fieldValue):void 0:t[e.fieldName]=e.fieldValue})),t["handlerList"]=e.handlerList,t["cutOffTime"]=e.cutOffTime&&K()(e.cutOffTime),t["remindNotifier"]=e.remindNotifier,t["remindModel"]=e.remindModel?JSON.parse(e.remindModel):[],t["auditOpinion"]=e.auditOpinion,console.log(t),x.setFieldsValue(t)},Ce=function(e){t({type:"PRODUCTLIFECYCLEINFO_DETAIL/queryLifeCycleNodeDetail",payload:{lifecycleFlowId:+y,lifecycleNodeDataId:e},callback:function(e){var a=e.code,t=e.data,n=void 0===t?{}:t;if(1008===a)ae(n),De(n);else{var l=e.message||e.data||"\u67e5\u8be2\u5931\u8d25\uff01";Be("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(e.code,")"),l,"topRight")}}})},we=function(e){re(e),de(e),Ce(e)},Te=function(){t({type:"PRODUCTLIFECYCLEINFO_DETAIL/queryBasicInformation",payload:{lifecycleFlowId:+y},callback:function(e){var a=e.code,t=e.data,n=void 0===t?{}:t;if(1008===a)z(n.processTitle),Y(n),we(n.lifecycleNodeDataId+"");else{var l=e.message||e.data||"\u67e5\u8be2\u5931\u8d25\uff01";Be("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(e.code,")"),l,"topRight")}}})},qe=function(){t({type:"PRODUCTLIFECYCLEINFO_DETAIL/queryLifeCycleNodeList",payload:{lifecycleFlowId:+y},callback:function(e){var a=e.code,t=e.data,n=void 0===t?[]:t;if(1008===a)H(n);else{var l=e.message||e.data||"\u67e5\u8be2\u5931\u8d25\uff01";Be("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(e.code,")"),l,"topRight")}}})},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Array.from(ee.lifecycleElementList);return a.map((function(a){if(a.fieldValue=e[a.fieldName],"datePicker"===a.type&&e[a.fieldName]&&(a.fieldValue=K()(e[a.fieldName]).valueOf()),"rangePicker"===a.type&&e[a.fieldName]){var t="".concat(K()(e[a.fieldName][0]).valueOf(),"#").concat(K()(e[a.fieldName][1]).valueOf());a.fieldValue=t}"selectMultiple"===a.type&&e[a.fieldName]&&(a.fieldValue=JSON.stringify(e[a.fieldName])),"checkbox"===a.type&&e[a.fieldName]&&(a.fieldValue=JSON.stringify(e[a.fieldName]))})),a},Ve=function(){he((function(e){return!e}))},Ke=function(e,a){var n=x.getFieldsValue(),l=Me(n),r=null,c=null;"save"===e?(be(0),r=0):"examine"===e?(be(1),r=1):"reject"===e&&(be(2),c=a,r=2);var o="reject"===e?"\u9a73\u56de":"\u4fdd\u5b58";t({type:"PRODUCTLIFECYCLEINFO_DETAIL/saveProcessNodeInfo",payload:{lifecycleFlowId:+y,lifecycleNodeDataId:ie,elementList:l,handlerList:n.handlerList,cutOffTime:n.cutOffTime&&K()(n.cutOffTime).valueOf(),remindNotifier:n.remindNotifier,remindModel:n.remindModel&&JSON.stringify(n.remindModel),auditStatus:r,auditOpinion:n.auditOpinion,rejectLifecycleNodeDataId:c},callback:function(a){var t=a.code;a.data;if(1008===t)Be("success","\u63d0\u793a","".concat(o,"\u6210\u529f"),"topRight"),Te(),qe(),"reject"===e&&Ve();else{var n=a.message||a.data||"".concat(o,"\u5931\u8d25\uff01");Be("warning","\u63d0\u793a(\u4ee3\u7801\uff1a".concat(a.code,")"),n,"topRight")}}})},Ue=function(){t({type:"PRODUCTLIFECYCLEINFO_DETAIL/selectAllUser",payload:{pageSize:99999,pageNo:1},callback:function(e){var a=e.code,t=e.data;1008===a&&t&&fe(t.list||[])}})};Object(I["useEffect"])(Ue,[]),Object(I["useEffect"])(Te,[]),Object(I["useEffect"])(qe,[]);var We=function(){L["c"].goBack()},He=function(e){return v.a.createElement("div",{className:T.a.tabBox,style:{textAlign:"left",maxWidth:200}},v.a.createElement("p",null,e.nodeName),v.a.createElement("p",null,"\u521b\u5efa\u65f6\u95f4\uff1a",e.startDate?K()(e.startDate).format(Pe):"--"),v.a.createElement("p",{title:e.handlerName},"\u5904\u7406\u4eba\uff1a ",e.handlerName||"--"))},Je=function(e){var a=e.sequence,t=e.isDelete;if(q.sequence){var n=q.sequence.split("/"),l=Object(O["a"])(n,1),r=l[0];return a>1*r}return 1===t},_e=function(){var e=P.getFieldsValue(),a=e.rejectLifecycleNodeDataId;Ke("reject",a)};return v.a.createElement(j["a"],null,v.a.createElement("div",{className:T.a.productLifeDetail},v.a.createElement(u["a"],{title:"\u57fa\u672c\u4fe1\u606f",className:T.a.cardBox,id:"base-info"},v.a.createElement(m["b"],{title:""},v.a.createElement(m["b"].Item,{label:"\u6d41\u7a0b\u6807\u9898"},q.processTitle),v.a.createElement(m["b"].Item,{label:"\u7f16\u53f7"},q.serialNumber||"--"),v.a.createElement(m["b"].Item,{label:"\u6a21\u677f\u540d\u79f0"},q.templateName||"--"),v.a.createElement(m["b"].Item,{label:"\u72b6\u6001"},q.flowStatus?Object(C["x"])(D["y"])[q.flowStatus]:"--"),v.a.createElement(m["b"].Item,{label:"\u5173\u8054\u4ea7\u54c1"},q.productFullName||"--"),v.a.createElement(m["b"].Item,{label:"\u8282\u70b9\u5e8f\u53f7"},q.sequence||"--"),v.a.createElement(m["b"].Item,{label:"\u5f53\u524d\u8282\u540d\u79f0"},q.nodeName||"--"))),v.a.createElement(u["a"],{title:"\u6d41\u7a0b\u8282\u70b9\u4fe1\u606f",className:T.a.cardBox,id:"node-info"},v.a.createElement(l["a"],{tabPosition:"left",activeKey:le,onChange:we},Array.isArray(U)&&U.map((function(e,t){return v.a.createElement(l["a"].TabPane,{key:e.lifecycleNodeDataId,tab:He(e),disabled:Je(e)},v.a.createElement(g["a"],Object(r["a"])({form:x,layout:"vertical"},Re,{scrollToFirstError:!0}),v.a.createElement(c["a"],{spinning:a},v.a.createElement("h2",null,v.a.createElement("strong",null,"\u4ea7\u54c1\u4fe1\u606f")),v.a.createElement(f["a"],null,ee.lifecycleElementList&&ee.lifecycleElementList.map((function(e,a){return v.a.createElement(b["a"],{key:a,span:12},A(e))}))),ee.lifecycleElementList&&0===ee.lifecycleElementList.length&&v.a.createElement(f["a"],{justify:"center"},v.a.createElement(s["a"],null)),v.a.createElement("h2",null,v.a.createElement("strong",null,"\u8282\u70b9\u4fe1\u606f")),v.a.createElement(G,{nodeHandler:me}),v.a.createElement("h2",null,v.a.createElement("strong",null,"\u6b65\u9aa4\u4fee\u6539\u8bb0\u5f55")),v.a.createElement(f["a"],null,v.a.createElement(b["a"],{span:12},v.a.createElement(d["a"],{title:"\u4fee\u6539\u4eba\u5458",value:ee.updateUserName||"--"})),v.a.createElement(b["a"],{span:12},v.a.createElement(d["a"],{title:"\u4fee\u6539\u65f6\u95f4",value:ee.updateTime?K()(ee.updateTime).format("YYYY-MM-DD HH:mm:ss"):"--"}))),v.a.createElement(f["a"],{justify:"center",style:{marginTop:30}},v.a.createElement(o["b"],null,Ae&&v.a.createElement(i["a"],{type:"primary",htmlType:"submit",onClick:function(){return Ke("save","")},disabled:0===ee.chmod,loading:0===ye&&p},"\u4e34\u65f6\u4fdd\u5b58"),Ae&&v.a.createElement(i["a"],{type:"primary",disabled:0===ee.chmod,onClick:Ve},"\u4e0d\u540c\u610f\uff0c\u9a73\u56de"),Ae&&v.a.createElement(i["a"],{type:"primary",onClick:function(){return Ke("examine","")},loading:1===ye&&p,disabled:0===ee.chmod},U.length===t+1?"\u540c\u610f\uff0c\u4fdd\u5b58":"\u540c\u610f\uff0c\u4e0b\u4e00\u6b65"),v.a.createElement(i["a"],{onClick:We},"\u53d6\u6d88"))))))})))),v.a.createElement(Fe["a"],{code:40100,source:1,sourceId:y,actionId:q.lifecycleNodeDataId,id:"package-info"}),v.a.createElement(u["a"],{title:"\u5171\u4eab\u4fe1\u606f\u4e0e\u6587\u4ef6\u7f51\u76d8",className:T.a.cardBox,id:"file-info"},v.a.createElement(xe,{source:1,sourceId:y,actionId:q.lifecycleNodeDataId,authEdit:Ae,authExport:Ye})),v.a.createElement(W,{data:q.recordList||[]}),v.a.createElement(k["a"],{className:T.a.AnchorBox},v.a.createElement(Se,{href:"#base-info",title:"\u57fa\u672c\u4fe1\u606f"}),v.a.createElement(Se,{href:"#node-info",title:"\u6d41\u7a0b\u8282\u70b9\u4fe1\u606f"}),v.a.createElement(Se,{href:"#package-info",title:"\u5feb\u9012\u4fe1\u606f\u8ddf\u8e2a"}),v.a.createElement(Se,{href:"#file-info",title:"\u5171\u4eab\u4fe1\u606f\u4e0e\u6587\u4ef6\u7f51\u76d8"}),v.a.createElement(Se,{href:"#edit-info",title:"\u64cd\u4f5c\u8bb0\u5f55"})),v.a.createElement(n["a"],{title:"\u6d41\u7a0b\u9a73\u56de",visible:Oe,onCancel:Ve,width:400,onOk:_e},v.a.createElement(g["a"],{form:P},v.a.createElement(g["a"].Item,{name:"rejectLifecycleNodeDataId"},v.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:350},allowClear:!0},Array.isArray(ve)&&ve.map((function(e){return v.a.createElement(N["a"].Option,{value:e.lifecycleNodeDataId,key:e.lifecycleNodeDataId},e.nodeName)})))))),v.a.createElement(n["a"],null)))};a["default"]=Object(L["b"])((function(e){var a=e.PRODUCTLIFECYCLEINFO_DETAIL,t=e.loading;return{PRODUCTLIFECYCLEINFO_DETAIL:a,nodeInfoSaveLoading:t.effects["PRODUCTLIFECYCLEINFO_DETAIL/saveProcessNodeInfo"],updateTitleLoading:t.effects["PRODUCTLIFECYCLEINFO_DETAIL/updateProcessTitle"],formLoading:t.effects["PRODUCTLIFECYCLEINFO_DETAIL/queryLifeCycleNodeDetail"]}}))(Me)},RgPF:function(e,a,t){e.exports={editInfo:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-components-update-record-styles-editInfo",editInfoItem:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-components-update-record-styles-editInfoItem",showMore:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-components-update-record-styles-showMore"}},rCen:function(e,a,t){e.exports={productLifeDetail:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-productLifeDetail",editInfo:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-editInfo",editInfoItem:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-editInfoItem",showMore:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-showMore",cardBox:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-cardBox",tabBox:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-tabBox",AnchorBox:"antd-pro-pages-product-life-cycle-product-life-cycle-info-detail-style-AnchorBox"}}}]);