(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"CU4+":function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=(t("2qtc"),t("kLXV")),o=(t("14J3"),t("BMrR")),c=(t("+L6B"),t("2/Rp")),l=(t("jCWc"),t("kPKH")),s=(t("y8nQ"),t("Vl3Y")),i=(t("5NDa"),t("5rEg")),u=t("k1fw"),d=t("fWQN"),m=t("mtLc"),p=t("yKVA"),h=t("879j"),g=(t("/xke"),t("TeRw")),f=(t("OaEy"),t("2fM7")),b=t("xvlK"),E=t("q1tI"),S=t.n(E),v=t("55Ip"),I=t("9kvl"),O=t("wd/R"),y=t.n(O),w=t("Hx5s"),F=t("+n12"),T=t("nT/m"),k=(t("g9YV"),t("wCAj")),j=t("0Owb"),C=t("PpiC"),R=t("XXPT"),M=t.n(R);function N(e){if(!e)return[];var a=[];return e.forEach((function(e){e.needTotal&&a.push(Object(u["a"])(Object(u["a"])({},e),{},{total:0}))})),a}var L=function(e){Object(p["a"])(t,e);var a=Object(h["a"])(t);function t(e){var n;Object(d["a"])(this,t),n=a.call(this,e),n.handleTableChange=function(e,a,t){var r=n.props.onChange;if(r){for(var o=arguments.length,c=new Array(o>3?o-3:0),l=3;l<o;l++)c[l-3]=arguments[l];r.apply(void 0,[e,a,t].concat(c))}};var r=e.columns,o=N(r);return n.state={needTotalList:o},n}return Object(m["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.data,t=e.pagination,n=e.rowKey,r=Object(C["a"])(e,["data","pagination","rowKey"]),o=a||{},c=o.list,l=void 0===c?[]:c,s=Object(u["a"])(Object(u["a"])({showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100","200","300","400","500","1000","999999"]},t),{},{defaultPageSize:"20",showTotal:function(e,a){return"\u5171 ".concat(e," \u6761\u8bb0\u5f55 \u7b2c").concat(t.current," - ").concat(t.allPage," \u9875")}});return S.a.createElement("div",{className:M.a.standardTable},S.a.createElement(k["a"],Object(j["a"])({rowKey:n||"managerUserId",scroll:{x:"100%",scrollToFirstRowOnChange:!0},dataSource:l,pagination:s,onChange:this.handleTableChange},r)))}}]),t}(E["Component"]),A=L,x=(t("QWqi"),t("Qnru")),U=t("j83L"),P=t.n(U),D=f["a"].Option,Y=function(e,a,t,n,r){g["default"][e||"info"]({top:165,message:a,description:t,placement:n,duration:r||3})},z=function(e){Object(p["a"])(t,e);var a=Object(h["a"])(t);function t(){var e;Object(d["a"])(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=a.call.apply(a,[this].concat(r)),e.state={dataList:{},powerInfo:{},showAlert:!1,batchUploadModalFlag:!1},e.searchFormRef=S.a.createRef(),e.columns=[{title:"\u8d26\u53f7\u59d3\u540d",dataIndex:"userName"},{title:"\u767b\u5f55\u624b\u673a\u53f7",dataIndex:"mobile",render:function(e){return e||"--"}},{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"email"},{title:"\u5c97\u4f4d",dataIndex:"positionStatus",render:function(e){var a=JSON.parse(e||"[]"),t="";return a.forEach((function(e){T["Q"].forEach((function(a){a.value==e&&(t+=a.label+",")}))})),t.slice(0,-1)||"--"}},{title:"\u8d26\u53f7\u72b6\u6001",dataIndex:"isDelete",render:function(e){var a=T["b"].filter((function(a){return a.value===Number(e)}));return a.length>0?S.a.createElement("span",{style:{color:"".concat(1===a[0].value?"red":"")}},a[0].label):"--"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",sorter:function(e,a){return e.createTime-a.createTime},render:function(e){return e?y()(e).format("YYYY/MM/DD HH:mm"):"--"}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateTime",sorter:function(e,a){return e.updateTime-a.updateTime},render:function(e){return e?y()(e).format("YYYY/MM/DD HH:mm"):"--"}},{title:"\u64cd\u4f5c",render:function(a,t){return S.a.createElement(S.a.Fragment,null,S.a.createElement(v["a"],{to:"/settings/account/edit/".concat(t.managerUserId)},"\u67e5\u770b"),e.state.authEdit&&t.positionStatus&&-1===JSON.parse(t.positionStatus).indexOf(0)&&S.a.createElement("a",{style:{marginLeft:8},onClick:function(){return e.setState({showAlert:!0,accountId:t.managerUserId})}},"\u5220\u9664")||null)}}],e.handelSearch=function(a,t){var n=e.props.dispatch;n({type:"accountList/queryList",payload:Object(u["a"])(Object(u["a"])({},a),t),callback:function(a){if(1008===a.code){var t=a.data||[];e.setState({dataList:t})}else{var n=a.message||a.data||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";Y("warning","\u63d0\u793a\uff08\u4ee3\u7801\uff1a".concat(a.code,"\uff09"),n,"topRight")}}})},e.handleTableChange=function(a,t,n){var r=e.searchFormRef.current.getFieldsValue();e.handelSearch(r,{pageNum:a.current,pageSize:a.pageSize,sortFiled:n&&n.field,sortType:(n&&"ascend"===n.order?"asc":n&&"descend"===n.order&&"desc")||""})},e.onFinish=function(a){e.handelSearch(a)},e.onReset=function(){e.searchFormRef.current.resetFields(),e.handelSearch()},e.handleNew=function(){I["c"].push("/settings/account/edit/0")},e.uploadFile=function(a){var t=a.file;"done"===t.status&&(t.response&&1008===t.response.code?(e.handelSearch(),Y("success","\u4e0a\u4f20\u6210\u529f",t.response&&t.response.message,"topRight")):Y("error","\u4e0a\u4f20\u5931\u8d25",t.response&&t.response.message,"topRight"))},e.handleOk=function(){var a=e.props.dispatch,t=e.state.accountId;a({type:"accountList/DeleteAccount",payload:{managerUserId:t},callback:function(a){1008===a.code?(e.handelSearch(),Y("success","\u5220\u9664\u6210\u529f",a.message,"topRight")):Y("error","\u5220\u9664\u5931\u8d25",a.message,"topRight"),e.setState({showAlert:!1,accountId:null})}})},e.handleCancel=function(){e.setState({showAlert:!1,accountId:null})},e.closeModal=function(){e.setState({batchUploadModalFlag:!1},(function(){e.handelSearch()}))},e}return Object(m["a"])(t,[{key:"componentDidMount",value:function(){this.handelSearch();var e=sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["121000"]||{},a=e.authEdit;this.setState({authEdit:a})}},{key:"renderForm",value:function(){var e=this,a=(this.state.powerInfo,"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl,"/manager/managerUser/import"),Object(F["l"])("vipAdminToken"),this.uploadFile,sessionStorage.getItem("PERMISSION")&&JSON.parse(sessionStorage.getItem("PERMISSION"))["121000"]||{}),t=a.authEdit;return S.a.createElement(s["a"],{ref:this.searchFormRef,name:"accountSearchForm",onFinish:this.onFinish},S.a.createElement(o["a"],{gutter:8},S.a.createElement(l["a"],{span:6},S.a.createElement(s["a"].Item,{name:"userName",label:"\u8d26\u53f7\u59d3\u540d"},S.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u59d3\u540d"}))),S.a.createElement(l["a"],{span:6},S.a.createElement(s["a"].Item,{name:"email",label:"\u767b\u5f55\u90ae\u7bb1"},S.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u90ae\u7bb1"}))),S.a.createElement(l["a"],{span:6},S.a.createElement(s["a"].Item,{name:"isDelete",label:"\u8d26\u53f7\u72b6\u6001"},S.a.createElement(f["a"],{placeholder:"\u8bf7\u9009\u62e9",allowClear:!0},T["b"].map((function(e){return S.a.createElement(D,{value:e.value,key:Object(F["q"])(6)},e.label)}))))),S.a.createElement(l["a"],{span:6,className:P.a.formBtn},S.a.createElement(s["a"].Item,null,S.a.createElement(c["a"],{type:"primary",htmlType:"submit",style:{marginRight:8}},"\u67e5\u8be2"),S.a.createElement(c["a"],{htmlType:"button",onClick:this.onReset},"\u91cd\u7f6e")))),S.a.createElement(o["a"],{gutter:8},S.a.createElement(l["a"],{span:16},t&&S.a.createElement(c["a"],{type:"primary",icon:S.a.createElement(b["a"],null),onClick:this.handleNew},"\u65b0\u5efa"),t&&S.a.createElement(c["a"],{type:"primary",onClick:function(){return e.setState({batchUploadModalFlag:!0})},style:{marginLeft:12}},"\u6279\u91cf\u4e0a\u4f20"))))}},{key:"render",value:function(){var e=this.state,a=e.dataList,t=e.showAlert,o=e.batchUploadModalFlag,c=this.props.loading;return S.a.createElement(w["a"],{title:"\u8d26\u53f7\u5217\u8868"},S.a.createElement(n["a"],{bordered:!1,className:P.a.accountListForm},o&&S.a.createElement(x["a"],{modalFlag:o,closeModal:this.closeModal,templateMsg:"\u8d26\u53f7\u6279\u91cf\u4e0a\u4f20\u6a21\u677f\u4e0b\u8f7d",templateUrl:"/manager/managerUser/import/template?tokenId=".concat(Object(F["l"])("vipAdminToken")),onOk:this.closeModal,url:"/manager/managerUser/import"}),S.a.createElement(r["a"],{visible:t,onOk:this.handleOk,onCancel:this.handleCancel},"\u786e\u5b9a\u5220\u9664\u8be5\u8d26\u53f7\uff1f"),S.a.createElement("div",{className:P.a.searchForm},this.renderForm()),S.a.createElement(A,{onChange:this.handleTableChange,loading:c,data:a,pagination:{current:a.pageNum,pageSize:a.pageSize,total:a.total,allPage:a.pages},columns:this.columns})))}}]),t}(E["Component"]);a["default"]=Object(I["b"])((function(e){var a=e.accountList,t=e.loading;return{accountList:a,loading:t.effects["accountList/queryList"]}}))(z)},XXPT:function(e,a,t){e.exports={standardTable:"antd-pro-pages-account-settings-account-list-components-standard-table-index-standardTable",tableAlert:"antd-pro-pages-account-settings-account-list-components-standard-table-index-tableAlert"}},j83L:function(e,a,t){e.exports={accountListForm:"antd-pro-pages-account-settings-account-list-style-accountListForm",searchForm:"antd-pro-pages-account-settings-account-list-style-searchForm",formBtn:"antd-pro-pages-account-settings-account-list-style-formBtn"}}}]);