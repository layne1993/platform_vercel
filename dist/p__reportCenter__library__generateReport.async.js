(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{"+/9R":function(e,t,a){e.exports={container:"antd-pro-pages-report-center-library-generate-report-components-product-modal-multi-index-container",searchBar:"antd-pro-pages-report-center-library-generate-report-components-product-modal-multi-index-searchBar",searchBtn:"antd-pro-pages-report-center-library-generate-report-components-product-modal-multi-index-searchBtn",clickRowStyl:"antd-pro-pages-report-center-library-generate-report-components-product-modal-multi-index-clickRowStyl"}},"/XAr":function(e,t,a){e.exports={boxItem:"antd-pro-pages-report-center-library-generate-report-index-boxItem",topTitle:"antd-pro-pages-report-center-library-generate-report-index-topTitle",bottomBox:"antd-pro-pages-report-center-library-generate-report-index-bottomBox",btnCancel:"antd-pro-pages-report-center-library-generate-report-index-btnCancel",echartId:"antd-pro-pages-report-center-library-generate-report-index-echartId"}},"9kkS":function(e,t,a){e.exports={boxItem:"antd-pro-pages-report-center-library-generate-report-reports-index-boxItem",topTitle:"antd-pro-pages-report-center-library-generate-report-reports-index-topTitle",bottomBox:"antd-pro-pages-report-center-library-generate-report-reports-index-bottomBox",btnCancel:"antd-pro-pages-report-center-library-generate-report-reports-index-btnCancel",echartId:"antd-pro-pages-report-center-library-generate-report-reports-index-echartId",delete:"antd-pro-pages-report-center-library-generate-report-reports-index-delete"}},GlhI:function(e,t,a){"use strict";a.r(t);a("T2oS");var n=a("W9HT"),r=(a("IzEo"),a("bx4M")),o=a("0Owb"),c=(a("7Kak"),a("9yH6")),l=(a("+L6B"),a("2/Rp")),i=(a("y8nQ"),a("Vl3Y")),s=a("tJVT"),u=(a("OaEy"),a("2fM7")),m=(a("iQDF"),a("+eQT")),d=a("q1tI"),p=a.n(d),f=a("Hx5s"),h=a("+n12"),b=(a("2qtc"),a("kLXV")),y=(a("g9YV"),a("wCAj")),v=(a("5NDa"),a("5rEg")),g=a("k1fw"),E=a("9og8"),w=(a("miYZ"),a("tsqr")),x=a("WmNS"),O=a.n(x),I=a("+/9R"),j=a.n(I),S=a("DUhl"),N=function(e){var t=i["a"].useForm(),a=Object(s["a"])(t,1),r=a[0],o=Object(d["useState"])([]),c=Object(s["a"])(o,2),u=c[0],m=c[1],f=Object(d["useState"])([]),h=Object(s["a"])(f,2),x=h[0],I=h[1],N=Object(d["useState"])({}),k=Object(s["a"])(N,2),C=(k[0],k[1],Object(d["useState"])(0)),M=Object(s["a"])(C,2),T=M[0],F=M[1],L=Object(d["useState"])(0),R=Object(s["a"])(L,2),D=R[0],q=R[1],A=Object(d["useState"])(1),Y=Object(s["a"])(A,2),U=Y[0],z=Y[1],P=Object(d["useState"])(1),B=Object(s["a"])(P,2),_=B[0],V=B[1],H=Object(d["useState"])(10),G=Object(s["a"])(H,2),W=G[0],K=G[1],Q=Object(d["useState"])(10),J=Object(s["a"])(Q,2),X=J[0],Z=J[1],$=Object(d["useState"])(""),ee=Object(s["a"])($,2),te=ee[0],ae=ee[1],ne=Object(d["useState"])([]),re=Object(s["a"])(ne,2),oe=(re[0],re[1]),ce=Object(d["useState"])([]),le=Object(s["a"])(ce,2),ie=le[0],se=le[1],ue=Object(d["useState"])(!1),me=Object(s["a"])(ue,2),de=me[0],pe=me[1],fe=e.visible,he=e.handleCancel,be=e.dimension,ye=e.handleSubmit,ve=[{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",align:"center",ellipsis:!0},{title:"\u4ea7\u54c1\u7f16\u53f7",dataIndex:"productCode",align:"center",ellipsis:!0}],ge=[{title:"\u5ba2\u6237\u540d\u79f0",dataIndex:"customerName",align:"center"}],Ee={onChange:function(e,t){oe(e),se(t)}},we=function(){ie.length?ye(ie):w["default"].error("\u8bf7\u9009\u62e9\u4ea7\u54c1")},xe=function(){var e=Object(E["a"])(O.a.mark((function e(){var t;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validateFields();case 3:t=e.sent,ae(t.nameOrCode),Ie(t),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.info("err");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){r.setFieldsValue({nameOrCode:""}),ae(""),Ie({pageNum:1,pageSize:10})},Ie=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n,r,o,c,l;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return pe(!0),c={nameOrCode:"",pageNum:1,pageSize:10},t&&(c=Object(g["a"])(Object(g["a"])({},c),t)),e.next=5,Object(S["j"])(c);case 5:l=e.sent,m(null===(a=l.data)||void 0===a?void 0:a.list),F(null===(n=l.data)||void 0===n?void 0:n.total),z(null===(r=l.data)||void 0===r?void 0:r.pageNum),K(null===(o=l.data)||void 0===o?void 0:o.pageSize),pe(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e,t){Ie({nameOrCode:te,pageNum:e,pageSize:t})},Se=function(e,t){Ne({pageNum:e,pageSize:t})},Ne=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n,r,o,c;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return pe(!0),o={pageNum:1,pageSize:10},t&&(o=Object(g["a"])(Object(g["a"])({},o),t)),e.next=5,Object(S["b"])(o);case 5:c=e.sent,I(c.data.list),q(null===(a=c.data)||void 0===a?void 0:a.total),V(null===(n=c.data)||void 0===n?void 0:n.pageNum),Z(null===(r=c.data)||void 0===r?void 0:r.pageSize),pe(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d["useEffect"])((function(){"product"===be?Oe():Ne({pageNum:1,pageSize:10})}),[be]),p.a.createElement(b["a"],{title:"\u4ea7\u54c1\u9009\u62e9",visible:fe,width:640,forceRender:!0,onOk:we,onCancel:he},p.a.createElement(n["a"],{spinning:de},p.a.createElement("div",{className:j.a.container},"product"===be?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:j.a.searchBar},p.a.createElement(i["a"],{form:r,layout:"inline",name:"search-hooks",style:{width:"100%"}},p.a.createElement(i["a"].Item,{name:"nameOrCode",label:"\u4ea7\u54c1\u540d\u79f0\u6216\u4ea7\u54c1\u7f16\u7801"},p.a.createElement(v["a"],{style:{width:200}})),p.a.createElement(i["a"].Item,{shouldUpdate:!0},(function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(l["a"],{type:"primary",className:j.a.searchBtn,onClick:xe},"\u67e5\u8be2"),p.a.createElement(l["a"],{onClick:Oe},"\u91cd\u7f6e"))})))),p.a.createElement(y["a"],{columns:ve,dataSource:u,rowSelection:Ee,rowKey:"productId",pagination:{total:T,pageSize:W,current:U,onChange:je}})):p.a.createElement(y["a"],{columns:ge,dataSource:x,rowSelection:Ee,rowKey:"customerId",pagination:{total:D,pageSize:X,current:_,onChange:Se}}))))},k=N,C=a("rAM+"),M=a("vDqi"),T=a.n(M),F=a("MT78"),L=a("wd/R"),R=a.n(L),D=a("9kkS"),q=a.n(D),A=(m["a"].RangePicker,u["a"].Option),Y=function(e){var t=e.parentForm,a=e.dimension,n=Object(d["useState"])(!1),r=Object(s["a"])(n,2),m=r[0],f=r[1],b=Object(d["useState"])([]),y=Object(s["a"])(b,2),x=y[0],I=y[1],j=Object(d["useState"])([]),N=Object(s["a"])(j,2),k=N[0],M=N[1],L=i["a"].useForm(),D=Object(s["a"])(L,1),Y=D[0],U=function(){history.go(-1)},z=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["m"])({reportForm:1,reportDimension:t});case 2:a=e.sent,1001===+a.code&&I(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(E["a"])(O.a.mark((function e(){var n,r,o;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return n=e.sent,console.log(n,"parentValues"),e.next=7,Y.validateFields();case 7:r=e.sent,n.dateStart=n.dateStart?R()(n.dateStart).format("YYYY-MM-DD"):null,n.dateEnd=R()(n.dateEnd).format("YYYY-MM-DD"),o=Object(g["a"])(Object(g["a"])({},r),n),"customer"===a?B(o):V(o),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0,"err"),e.t0.errorFields&&w["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f(!0),a={customerIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd,reportName:t.reportName,templateName:t.templateName,remark:t.remark},W("/mrp_analysis/weekReport/exportWordByCustomers",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(E["a"])(O.a.mark((function e(t){var n,r,o;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="customer"===a?1:2,r={reportForm:1,reportDimension:n,parentId:t},e.next=4,Object(S["l"])(r);case 4:o=e.sent,1001===+o.code&&(Y.setFieldsValue({templateName:""}),M(o.data));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),a={productIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd},e.next=4,Object(S["d"])(a);case 4:n=e.sent,H(n.data,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e,t){try{var a=e.map((function(e){var t,a,n=e.huShen300EntityList?null===(t=e.huShen300EntityList)||void 0===t?void 0:t.map((function(e){return e.netDate})):[],r=e.weekReportEasyEntityList?null===(a=e.weekReportEasyEntityList)||void 0===a?void 0:a.map((function(e){return e.netDate})):[],o=Array.from(new Set(n.concat(r)));o.sort((function(e,t){return R()(e)-R()(t)}));for(var c=Math.ceil(o.length/1500),l=[],i=0;i<o.length;i++)i%c&&i!==o.length-1||l.push(o[i]);for(var s=[{name:e.productName,showSymbol:!1,type:"line",connectNulls:!0,data:[],lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.5)",shadowBlur:4,shadowOffsetY:5}},{name:"\u6caa\u6df1300",showSymbol:!1,type:"line",connectNulls:!0,data:[],lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.5)",shadowBlur:4,shadowOffsetY:5}}],u=0;u<l.length;u++){if(s[0].data[u]="",s[1].data[u]="",e.huShen300EntityList){var m,d=Object(C["a"])(e.huShen300EntityList);try{for(d.s();!(m=d.n()).done;){var p=m.value;p.netDate===l[u]&&(s[1].data[u]=p.changeValue||0)}}catch(w){d.e(w)}finally{d.f()}}if(e.weekReportEasyEntityList){var f,h=Object(C["a"])(e.weekReportEasyEntityList);try{for(h.s();!(f=h.n()).done;){var b=f.value;b.netDate===l[u]&&(s[0].data[u]=b.changeValue||0)}}catch(w){h.e(w)}finally{h.f()}}}var y=document.getElementById("echartsId");y.innerHTML='<div id="echartsline" style="height: 100%;"></div>';var v=F["a"](document.getElementById("echartsline"));console.log("myChart\u6267\u884c"),console.log(s,"series");var g=new Promise((function(t,a){v.clear(),v.setOption({title:{show:!1},tooltip:{},legend:{data:[e.productName,"\u6caa\u6df1300"]},color:["#C92711","#3871AD"],xAxis:{data:l,nameTextStyle:{fontSize:16},axisLine:{show:!0,lineStyle:{color:"#000"}}},yAxis:{nameTextStyle:{fontSize:16},axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{formatter:"{value} %"}},series:s},!0),v.on("finished",(function(){t()}))})),E=g.then((function(){var e=v.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"});return e}));return{productId:e.productId,echarturl:E}}));console.log(a,"urls\u503c\u4e3a"),G(a,t)}catch(n){console.log(n,"err \u503c\u4e3a")}},G=function(){var e=Object(E["a"])(O.a.mark((function e(t,a){var n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.map((function(e){return e.echarturl})),Promise.all(n).then((function(e){console.log(e,"res0 \u503c\u4e3a");var n={reportName:a.reportName,productIds:a.productId,dateStart:a.dateStart,dateEnd:a.dateEnd,templateName:a.templateName,remark:a.remark};n.productIdImgListStr=e.map((function(a,n){return console.log(e,"res \u503c\u4e3a"),{productId:t[n].productId,imgInfo:a.replace("data:image/png;base64,","")}})),console.log("_postDownload \u6267\u884c"),W("/mrp_analysis/weekReport/exportWordData",n)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(e,t){T()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl).concat(e),data:t,method:"post",responseType:"blob",headers:{"Content-Type":"application/json;\xa0application/octet-stream",tokenId:Object(h["l"])("vipAdminToken")||""}}).then((function(e){var t=e.headers["content-disposition"].split(";")[1].split("filename=")[1].split(".doc")[0];t=decodeURIComponent(t);var a=new Blob([e.data],{type:"application/msword"}),n=document.createElement("a"),r=window.URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),f(!1)})).catch((function(e){w["default"].warning("\u4e0b\u8f7d\u5931\u8d25!"),f(!1)}))},K={labelCol:{span:4},wrapperCol:{span:10}},Q=[{label:"\u6839\u53f7250",value:"250"},{label:"\u6839\u53f7252",value:"252"}];return Object(d["useEffect"])((function(){Y.setFieldsValue({flag:"250",entity:"hs300"})}),[]),Object(d["useEffect"])((function(){z("customer"===a?1:2)}),[a]),p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"],Object(o["a"])({form:Y},K),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u4ea7\u54c1\u6307\u6807\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"flag",label:"\u6307\u6807\u5e74\u5316\u65b9\u5f0f"},p.a.createElement(c["a"].Group,{options:Q})),p.a.createElement(i["a"].Item,{name:"percent",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387"},p.a.createElement(v["a"],{suffix:"%"})),p.a.createElement(i["a"].Item,{name:"entity",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(u["a"],null,p.a.createElement(A,{value:"hs300"},"\u6caa\u6df1300")))),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u62a5\u544a\u6a21\u677f\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"templateName1",label:"\u6a21\u677f\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f"}]},p.a.createElement(u["a"],{onChange:_},x.map((function(e){return p.a.createElement(A,{value:e.id},e.reportShowName)})))),p.a.createElement(i["a"].Item,{name:"templateName",label:"\u6a21\u677f\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272\u5206\u7c7b"}]},p.a.createElement(u["a"],null,k.map((function(e){return p.a.createElement(A,{value:e.reportName},e.colorName||"\u9ed8\u8ba4")})))),p.a.createElement(i["a"].Item,{name:"reportName",label:"\u62a5\u544a\u540d\u79f0\u8bbe\u7f6e",rules:[{required:!1}]},p.a.createElement(v["a"],null)),p.a.createElement(i["a"].Item,{name:"remark",label:"\u62a5\u544a\u58f0\u660e",rules:[{required:!0}]},p.a.createElement(v["a"].TextArea,null)))),p.a.createElement("div",{className:q.a.echartId,id:"echartsId"}),p.a.createElement("div",{className:q.a.bottomBox},p.a.createElement(l["a"],{onClick:U,className:q.a.btnCancel},"\u53d6\u6d88"),p.a.createElement(l["a"],{type:"primary",onClick:P,loading:m},"\u751f\u6210\u5e76\u4e0b\u8f7d\u62a5\u544a")))},U=Y,z=a("jrin"),P=a("oBTY"),B=a("VTBJ"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M508 704c79.5 0 144-64.5 144-144s-64.5-144-144-144-144 64.5-144 144 64.5 144 144 144zm0-224c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}},{tag:"path",attrs:{d:"M832 256h-28.1l-35.7-120.9c-4-13.7-16.5-23.1-30.7-23.1h-451c-14.3 0-26.8 9.4-30.7 23.1L220.1 256H192c-17.7 0-32 14.3-32 32v28c0 4.4 3.6 8 8 8h45.8l47.7 558.7a32 32 0 0031.9 29.3h429.2a32 32 0 0031.9-29.3L802.2 324H856c4.4 0 8-3.6 8-8v-28c0-17.7-14.3-32-32-32zm-518.6-76h397.2l22.4 76H291l22.4-76zm376.2 664H326.4L282 324h451.9l-44.3 520z"}}]},name:"rest",theme:"outlined"},V=_,H=a("6VBw"),G=function(e,t){return d["createElement"](H["a"],Object(B["a"])(Object(B["a"])({},e),{},{ref:t,icon:V}))};G.displayName="RestOutlined";var W=d["forwardRef"](G),K=function(e){var t,a=[],n=[],r=[],o=[];null===(t=e.performance)||void 0===t||t.forEach((function(e){a.push(e.netDate),n.push(100*e.fund_r),r.push(100*e.hs300_r),o.push(100*e.zz500_r)}));var c=[{name:"\u672c\u4ea7\u54c1",showSymbol:!1,type:"line",connectNulls:!0,data:n,lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:4,shadowOffsetY:5}},{name:"\u6caa\u6df1300",showSymbol:!1,type:"line",connectNulls:!0,data:r,lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:4,shadowOffsetY:5}},{name:"\u4e2d\u8bc1500",showSymbol:!1,type:"line",connectNulls:!0,data:o,lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:4,shadowOffsetY:5}}],l=document.createElement("div");l.style.width="386px",l.style.height="263px";var i=F["a"](l);return new Promise((function(e,t){i.clear(),i.setOption({title:{show:!1},tooltip:{},legend:{padding:20,data:["\u672c\u4ea7\u54c1","\u6caa\u6df1300","\u4e2d\u8bc1500"]},grid:{left:"12%",right:"4%",bottom:"20%"},color:["#a60000","#604a7b","#9bbb59"],xAxis:{data:a,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{rotate:45,textStyle:{fontSize:8},showMaxLabel:!0}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{formatter:"{value} %",textStyle:{fontSize:8}}},series:c},!0),i.on("finished",(function(){e(X(i))}))}))},Q=function(e){var t,a=[],n=[];null===(t=e.asset)||void 0===t||t.forEach((function(e){a.push(e.assets),n.push((100*e.quotationProportion).toFixed(2))}));var r=document.createElement("div");r.style.width="384px",r.style.height="245px",r.style.marginTop="20px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({title:{text:"\u6301\u4ed3\u5206\u5e03",left:"center",textStyle:{fontFamily:"Microsoft YaHei",fontSize:14},padding:20},grid:{top:"60px"},color:"#df5052",xAxis:[{type:"category",data:a,axisLabel:{rotate:45,textStyle:{fontSize:8}}}],yAxis:[{type:"value",axisLabel:{formatter:"{value}%"}}],series:[{type:"bar",data:n,barWidth:"40%",itemStyle:{normal:{label:{show:!0,position:"top",formatter:function(e){return 0!==e.value?e.value+"%":""},textStyle:{fontSize:10,color:"#000000"}}}}}]}),o.on("finished",(function(){e(X(o))}))}))},J=function(e){var t,a=[],n=[];null===(t=e.industry)||void 0===t||t.forEach((function(e){a.push(e.industry),n.push((100*e.weight).toFixed(2))}));var r=document.createElement("div");r.style.width="384px",r.style.height="245px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({title:{text:"\u524d\u5341\u884c\u4e1a\u5206\u5e03(\u7533\u4e07\u4e00\u7ea7\u884c\u4e1a\u5206\u7c7b)",left:"center",textStyle:{fontFamily:"Microsoft YaHei",fontSize:14},padding:20},grid:{top:"60px"},color:"#df5052",xAxis:[{type:"category",data:a,axisLabel:{rotate:45,textStyle:{fontSize:8}}}],yAxis:[{type:"value",axisLabel:{formatter:"{value}%"}}],series:[{type:"bar",data:n,barWidth:"40%",itemStyle:{normal:{label:{show:!0,position:"top",formatter:function(e){return 0!==e.value?e.value+"%":""},textStyle:{fontSize:8,color:"#000000"}}}}}]}),o.on("finished",(function(){e(X(o))}))}))},X=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),e.abrupt("return",a.replace("data:image/png;base64,",""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){var t,a=[],n=[],r=[],o=[];null===(t=e.productTrend)||void 0===t||t.forEach((function(e){var t=e.netDate?e.netDate.slice(2).replace(/-/g,"/"):"";a.push(t),n.push(100*e.excessEarnings),r.push(100*e.productGrowthRate),o.push(100*e.hs300GrowthRate)}));var c=[{name:"\u8d85\u989d\u6536\u76ca",showSymbol:!1,type:"line",connectNulls:!0,areaStyle:{},data:n,lineStyle:{width:1.5}},{name:"\u672c\u4ea7\u54c1\u589e\u957f\u7387",showSymbol:!1,type:"line",connectNulls:!0,data:r,lineStyle:{width:1.5}},{name:"\u6caa\u6df1300\u589e\u957f\u7387",showSymbol:!1,type:"line",connectNulls:!0,data:o,lineStyle:{width:1.5}}],l=document.createElement("div");l.style.width="960px",l.style.height="328px";var i=F["a"](l);return new Promise((function(e,t){i.clear(),i.setOption({title:{show:!1},tooltip:{},legend:{padding:20,data:["\u8d85\u989d\u6536\u76ca","\u672c\u4ea7\u54c1\u589e\u957f\u7387","\u6caa\u6df1300\u589e\u957f\u7387"]},grid:{left:"12%",right:"4%",bottom:"20%"},color:["#cf4949","#2c88c9","#f09f6a"],xAxis:{data:a,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{rotate:270,textStyle:{fontSize:12},showMaxLabel:!0}},yAxis:{nameTextStyle:{fontSize:14},axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{formatter:"{value} %"}},series:c},!0),i.on("finished",(function(){e(te(i))}))}))},$=function(e){var t,a=[];null===(t=e.asset)||void 0===t||t.forEach((function(e){a.push({value:e.quotationProportion,name:e.assets})}));var n=[{type:"pie",radius:"50%",data:a,labelLine:{lineStyle:{color:"#b0b0b0"}}}],r=document.createElement("div");r.style.width="488px",r.style.height="318px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({color:["#f07c82","#fcd9db","#ca1e32","#fee8ee","#b6b6b6"],series:n}),o.on("finished",(function(){e(te(o))}))}))},ee=function(e){var t,a=[];null===(t=e.asset)||void 0===t||t.forEach((function(e){a.push({value:e.quotationProportion,name:e.assets})}));var n=[{type:"pie",radius:"50%",data:a,labelLine:{lineStyle:{color:"#b0b0b0"}}}],r=document.createElement("div");r.style.width="488px",r.style.height="318px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({color:["#f07c82","#fcd9db","#ca1e32","#fee8ee","#b6b6b6"],series:n}),o.on("finished",(function(){e(te(o))}))}))},te=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),e.abrupt("return",a.replace("data:image/png;base64,",""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e,t){var a,n=[],r=[],o=[],c=0,l=0;null===(a=e.ningquanTrend)||void 0===a||a.forEach((function(e){var t=e.NetDate?e.NetDate.replace(/-/g,"/"):"";n.push(t),r.push(e.w_fundar),o.push(e.w_Hs300)})),c=o.length?Math.min.apply(Math,r)<Math.min.apply(Math,o)?Math.min.apply(Math,r):Math.min.apply(Math,o):Math.min.apply(Math,r),l=o.length&&Math.max.apply(Math,r)<Math.max.apply(Math,o)?Math.max.apply(Math,o):Math.max.apply(Math,r),c=parseFloat((Math.floor(10*c/5)/2).toFixed(1)),l=parseFloat((Math.ceil(10*l/5)/2).toFixed(1));var i=[{name:t,showSymbol:!1,type:"line",connectNulls:!0,data:r,lineStyle:{width:1.5}},{name:"\u6caa\u6df1300\u6307\u6570",showSymbol:!1,type:"line",connectNulls:!0,data:o,lineStyle:{width:1.5}}],s=document.createElement("div");s.style.width="442px",s.style.height="188px";var u=F["a"](s);return new Promise((function(e,a){u.clear(),u.setOption({title:{show:!1},tooltip:{},legend:{bottom:8,itemWidth:14,itemHeight:1,left:"center",icon:"roundRect",textStyle:{fontSize:8},data:[t,"\u6caa\u6df1300\u6307\u6570"]},grid:{top:"8%",left:"8%",bottom:"30%"},color:["#cf4949","#6f9dff","#b3b5b8"],xAxis:{data:n,boundaryGap:!1,axisLine:{show:!1,lineStyle:{color:"rgba(6, 6, 6, 0.7)"}},axisLabel:{rotate:40,textStyle:{fontSize:6},showMaxLabel:!0},axisTick:{length:2,lineStyle:{color:"rgba(6, 6, 6, 0.3)"}}},yAxis:{nameTextStyle:{fontSize:6,color:"rgba(6, 6, 6, 0.5)"},axisLine:{show:!1,lineStyle:{color:"rgba(6, 6, 6, 0.7)"}},axisLabel:{textStyle:{fontSize:6}},min:c,max:l,interval:parseFloat(((+l-c)/5).toFixed(1))},series:i},!0),u.on("finished",(function(){e(oe(u))}))}))},ne=function(e){var t,a=[],n=[];null===(t=e.ningquanIndustry)||void 0===t||t.forEach((function(e){a.push(e.industryName),n.push(parseFloat(e.industryProportion))}));var r=document.createElement("div");r.style.width="888px",r.style.height="248px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({title:{show:!1},grid:{top:"10%",left:"12%",bottom:"20%"},color:"#1283D5",xAxis:[{type:"category",data:a,axisLabel:{rotate:45,textStyle:{fontSize:8}}}],yAxis:[{type:"value",axisLabel:{formatter:"{value}%"}}],series:[{type:"bar",data:n,barMaxWidth:"24px",itemStyle:{normal:{label:{show:!0,position:"top",formatter:function(e){return 0!==e.value?e.value+"%":""},textStyle:{fontSize:10,color:"#000000"}}}}}]}),o.on("finished",(function(){e(oe(o))}))}))},re=function(e){var t,a=[];null===(t=e.ningquanPosition)||void 0===t||t.forEach((function(e){a.push({value:e.endNetValue,name:e.positionType})}));var n=[{type:"pie",radius:"80%",grid:{top:0,left:0,right:0,bottom:0},label:{position:"outside",formatter:"{d}%",fontSize:8},labelLine:{length:4,length2:8,smooth:!0},data:a}],r=document.createElement("div");r.style.width="374px",r.style.height="256px";var o=F["a"](r);return new Promise((function(e,t){o.clear(),o.setOption({color:["#1283D5","#FF9845","#706c69","#F6BD16","#2DCACF","#D93A2B","#6B64AF"],series:n}),o.on("finished",(function(){e(oe(o))}))}))},oe=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),e.abrupt("return",a.replace("data:image/png;base64,",""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce={3145:"\u6caa\u6df1300",4978:"\u4e2d\u8bc1500",39144:"\u4e2d\u8bc11000"},le=function(e,t,a){var n,r=t.standard,o=[],c=[],l=[],i=0,s=0;null===(n=e.mingshiTrend)||void 0===n||n.forEach((function(e){var t=e.NetDate?e.NetDate.slice(2).replace(/-/g,"/"):"";o.push(t),c.push(e.acumulateNetValue),e.base_rv&&l.push(e.base_rv)})),i=l.length?Math.min.apply(Math,c)<Math.min.apply(Math,l)?Math.min.apply(Math,c):Math.min.apply(Math,l):Math.min.apply(Math,c),s=l.length&&Math.max.apply(Math,c)<Math.max.apply(Math,l)?Math.max.apply(Math,l):Math.max.apply(Math,c),console.info(i,s,"cccc"),i=(Math.floor(10*i/5)/2).toFixed(1),s=(Math.ceil(10*s/5)/2).toFixed(1),console.info(s,i,s-i,"fff");var u=ce[r],m=[{name:"\u57fa\u91d1\u7d2f\u8ba1\u51c0\u503c",showSymbol:!1,type:"line",connectNulls:!0,data:c,lineStyle:{width:1.5}}];l.length&&m.push({name:"".concat(u,"\u7d2f\u8ba1\u6536\u76ca"),showSymbol:!1,type:"line",connectNulls:!0,data:l,lineStyle:{width:1.5}});var d=document.createElement("div");d.style.width="500px",d.style.height="268px";var p=F["a"](d);return new Promise((function(e,t){p.clear(),p.setOption({title:{text:a,left:"center",textStyle:{fontFamily:"Microsoft YaHei",fontSize:14},padding:14},tooltip:{},legend:{bottom:8,left:"center",textStyle:{fontSize:8},data:["".concat(u,"\u7d2f\u8ba1\u6536\u76ca"),"\u57fa\u91d1\u7d2f\u8ba1\u51c0\u503c"]},grid:{top:"10%",left:"12%",bottom:"28%"},color:["#cf4949","#2c88c9","#f09f6a"],xAxis:{data:o,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{rotate:90,textStyle:{fontSize:8},showMaxLabel:!0}},yAxis:{nameTextStyle:{fontSize:14},axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{formatter:"{value}"},min:i,max:s,interval:parseFloat(((+s-i)/5).toFixed(1))},series:m},!0),p.on("finished",(function(){e(ie(p))}))}))},ie=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),e.abrupt("return",a.replace("data:image/png;base64,",""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=(a("DYRE"),a("zeV3")),ue=a("PpiC"),me=a("wlus"),de=a("xvlK"),pe=a("QJYQ"),fe=a.n(pe),he=u["a"].Option,be=function(e){var t=e.visible,a=e.onOk,n=e.onCancel;return p.a.createElement(b["a"],{visible:t,width:600,title:"\u884c\u4e1a\u5206\u7c7b\u8bbe\u7f6e",onOk:a,onCancel:n},p.a.createElement("div",{className:fe.a.container},p.a.createElement(i["a"],{name:"dynamic_form_nest_item",autoComplete:"off"},p.a.createElement(i["a"].List,{name:"users"},(function(e,t){var a=t.add,n=t.remove;return p.a.createElement(p.a.Fragment,null,e.map((function(e){var t=e.key,a=e.name,r=e.fieldKey,c=Object(ue["a"])(e,["key","name","fieldKey"]);return p.a.createElement(se["b"],{key:t,style:{display:"flex",marginBottom:8},align:"baseline"},p.a.createElement(i["a"].Item,Object(o["a"])({},c,{label:"\u5206\u7c7b\u9009\u62e9\uff1a",name:[a,"first"],fieldKey:[r,"first"],rules:[{required:!0}]}),p.a.createElement(u["a"],{className:fe.a.selectBox},p.a.createElement(he,{value:1},"1"))),p.a.createElement(i["a"].Item,Object(o["a"])({},c,{label:"\u5339\u914d\u884c\u4e1a\uff1a",name:[a,"last"],fieldKey:[r,"last"],rules:[{required:!0}]}),p.a.createElement(u["a"],{className:fe.a.selectBox},p.a.createElement(he,{value:1},"1"))),p.a.createElement(me["a"],{onClick:function(){return n(a)}}))})),p.a.createElement(i["a"].Item,null,p.a.createElement(l["a"],{type:"dashed",onClick:function(){return a()},block:!0,icon:p.a.createElement(de["a"],null)},"\u65b0\u589e")))})))))},ye=be,ve=function(e,t){var a,n=[],r=[],o=[],c=0,l=0;null===(a=e.relativeNetValue)||void 0===a||a.forEach((function(e){var t=e.date?e.date.replace(/-/g,"/"):"";n.push(t),r.push(e.value),o.push(e.baseValue)})),c=o.length?Math.min.apply(Math,r)<Math.min.apply(Math,o)?Math.min.apply(Math,r):Math.min.apply(Math,o):Math.min.apply(Math,r),l=o.length&&Math.max.apply(Math,r)<Math.max.apply(Math,o)?Math.max.apply(Math,o):Math.max.apply(Math,r),c=parseFloat((Math.floor(10*c/5)/2).toFixed(1)),l=parseFloat((Math.ceil(10*l/5)/2).toFixed(1));var i=[{name:t,showSymbol:!1,type:"line",connectNulls:!0,data:r,lineStyle:{width:1.5}},{name:"\u6caa\u6df1300\u6307\u6570",showSymbol:!1,type:"line",connectNulls:!0,data:o,lineStyle:{width:1.5}}],s=document.createElement("div");s.style.width="442px",s.style.height="188px";var u=F["a"](s);return new Promise((function(e,a){u.clear(),u.setOption({title:{show:!1},tooltip:{},legend:{bottom:8,itemWidth:14,itemHeight:1,left:"center",icon:"roundRect",textStyle:{fontSize:8},data:[t,"\u6caa\u6df1300\u6307\u6570"]},grid:{top:"8%",left:"8%",bottom:"30%"},color:["#cf4949","#6f9dff","#b3b5b8"],xAxis:{data:n,boundaryGap:!1,axisLine:{show:!1,lineStyle:{color:"rgba(6, 6, 6, 0.7)"}},axisLabel:{rotate:40,textStyle:{fontSize:6},showMaxLabel:!0},axisTick:{length:2,lineStyle:{color:"rgba(6, 6, 6, 0.3)"}}},yAxis:{nameTextStyle:{fontSize:6,color:"rgba(6, 6, 6, 0.5)"},axisLine:{show:!1,lineStyle:{color:"rgba(6, 6, 6, 0.7)"}},axisLabel:{textStyle:{fontSize:6}},min:c,max:l,interval:parseFloat(((+l-c)/5).toFixed(1))},series:i},!0),u.on("finished",(function(){console.info(ge(u),"dispatchExportWord(myChartP)"),e(ge(u))}))}))},ge=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),e.abrupt("return",a.replace("data:image/png;base64,",""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=(m["a"].RangePicker,m["a"].WeekPicker,u["a"].Option),we=function(e){var t=e.parentForm,a=e.productNames,n=Object(d["useState"])(!1),r=Object(s["a"])(n,2),m=r[0],f=r[1],b=Object(d["useState"])([]),y=Object(s["a"])(b,2),x=y[0],I=y[1],j=Object(d["useState"])([]),N=Object(s["a"])(j,2),k=N[0],C=N[1],M=Object(d["useState"])([{item:"",id:1}]),F=Object(s["a"])(M,2),L=F[0],D=F[1],A=Object(d["useState"])(2),Y=Object(s["a"])(A,2),U=Y[0],B=Y[1],_=Object(d["useState"])(!1),V=Object(s["a"])(_,2),H=V[0],G=V[1],X=Object(d["useState"])(!1),te=Object(s["a"])(X,2),oe=te[0],ce=te[1],ie=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],se=i["a"].useForm(),ue=Object(s["a"])(se,1),me=ue[0],de=function(){history.go(-1)},pe=function(e){var t=L.filter((function(t,a){return a!==e}));D(t)},fe=function(){L.length<5&&(B(U+1),D([].concat(Object(P["a"])(L),[{item:"",id:U+1}])))},he=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["m"])(t);case 2:a=e.sent,1001===+a.code&&I(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(E["a"])(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={reportForm:2,reportDimension:2,parentId:t},a.children.includes("\u9e23\u77f3")?ce(!0):ce(!1),e.next=4,Object(S["l"])(n);case 4:r=e.sent,1001===+r.code&&(me.setFieldsValue({templateName:""}),C(r.data));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ge=function(){var e=Object(E["a"])(O.a.mark((function e(){var a,n,r,o,c,l,i;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return a=e.sent,e.next=6,me.validateFields();case 6:for(l in n=e.sent,r=Object(g["a"])({},n),o=1,c=1,n)-1!==l.indexOf("title")?(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"title".concat(o),n[l])),o++):-1!==l.indexOf("content")&&(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"content".concat(c),n[l])),c++);a.dateStart=a.dateStart?R()(a.dateStart).format("YYYY-MM-DD"):null,a.dateEnd=R()(a.dateEnd).format("YYYY-MM-DD"),i=Object(g["a"])(Object(g["a"])({},r),a),we(i),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),console.log(e.t0,"err"),e.t0.errorFields&&w["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),a={title1:t.title1||"",title2:t.title2||"",title3:t.title3||"",title4:t.title4||"",title5:t.title5||"",content1:t.content1||"",content2:t.content2||"",content3:t.content3||"",content4:t.content4||"",content5:t.content5||"",productIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd,standard:t.standard,templateName:t.templateName,singleOrTwo:t.singleOrTwo,remark:t.remark,reportName:t.reportName,interestType:t.interestType},e.next=4,Object(S["h"])(a);case 4:n=e.sent,-1!==t.templateName.indexOf("ruibo")&&xe(n,a),-1!==t.templateName.indexOf("qingli")&&Oe(n,a),-1!==t.templateName.indexOf("ningquan")&&Ie(n,a),-1!==t.templateName.indexOf("mingshi")&&je(n,a),-1!==t.templateName.indexOf("hd")&&Se(n,a),-1!==t.templateName.indexOf("hongdao")&&Ie(n,a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(e,t){var a=[];new Promise((function(t,n){var r=0;e.data.forEach(function(){var n=Object(E["a"])(O.a.mark((function n(o){var c,l,i;return O.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c="",Q(o.imgInfo,o.productId).then((function(e){c=e})),l="",J(o.imgInfo,o.productId).then((function(e){l=e})),i="",K(o.imgInfo,o.productId).then((function(n){i=n,a.push({productId:o.productId,imgInfo:{performance:i,asset:c,industry:l,productTrend:""}}),r++,r===e.data.length&&t(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})).then((function(e){Ne("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},Oe=function(e,t){var a=[];new Promise((function(t,n){var r=0;e.data.forEach(function(){var n=Object(E["a"])(O.a.mark((function n(o){var c,l,i;return O.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c="",$(o.imgInfo,o.productId).then((function(e){c=e})),l="",ee(o.imgInfo,o.productId).then((function(e){l=e})),i="",Z(o.imgInfo,o.productId).then((function(n){i=n,a.push({productId:o.productId,imgInfo:{performance:"",productTrend:i,asset:c,industry:l}}),r++,r===e.data.length&&t(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})).then((function(e){Ne("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},Ie=function(e,t){var n=[];new Promise((function(t,r){e.data.forEach(function(){var r=Object(E["a"])(O.a.mark((function r(o,c){var l,i,s;return O.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l="",re(o.imgInfo,o.productId).then((function(e){l=e})),i="",ne(o.imgInfo,o.productId).then((function(e){i=e})),s="",ae(o.imgInfo,a[c],o.productId).then((function(a){s=a,n.push({productId:o.productId,imgInfo:{ningquanTrend:s,ningquanIndustry:i,ningquanPosition:l}}),c++,c===e.data.length&&t(n)}));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})).then((function(e){Ne("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},je=function(e,t){var n=[];new Promise((function(r,o){e.data.forEach(function(){var o=Object(E["a"])(O.a.mark((function o(c,l){var i;return O.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:i="",le(c.imgInfo,t,a[l]).then((function(t){i=t,n.push({productId:c.productId,imgInfo:{mingshiTrend:i}}),l++,l===e.data.length&&r(n)}));case 2:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())})).then((function(e){Ne("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},Se=function(e,t){var n=[];new Promise((function(t,r){e.data.forEach(function(){var r=Object(E["a"])(O.a.mark((function r(o,c){var l;return O.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l="",ve(o.imgInfo,a[c],o.productId).then((function(a){l=a,n.push({productId:o.productId,imgInfo:{hongDaoTrend:l}}),c++,c===e.data.length&&t(n)}));case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})).then((function(e){Ne("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},Ne=function(e,t){T()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl).concat(e),data:t,method:"post",responseType:"blob",headers:{"Content-Type":"application/json;\xa0application/octet-stream",tokenId:Object(h["l"])("vipAdminToken")||""}}).then((function(e){var t=e.headers["content-disposition"].split(";")[1].split("filename=")[1].split(".doc")[0];t=decodeURIComponent(t);var a=new Blob([e.data],{type:"application/msword"}),n=document.createElement("a"),r=window.URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),f(!1)})).catch((function(e){w["default"].warning("\u4e0b\u8f7d\u5931\u8d25!"),f(!1)}))},ke={labelCol:{span:4},wrapperCol:{span:10}},Ce=[{label:"\u6839\u53f7250",value:"250"},{label:"\u6839\u53f7252",value:"252"}];return Object(d["useEffect"])((function(){me.setFieldsValue({flag:"250",standard:4978,entity:"\u6caa\u6df1300"}),he({reportForm:2,reportDimension:2})}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"],Object(o["a"])({form:me},ke),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u4ea7\u54c1\u6307\u6807\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"flag",label:"\u6307\u6807\u5e74\u5316\u65b9\u5f0f"},p.a.createElement(c["a"].Group,{options:Ce})),p.a.createElement(i["a"].Item,{name:"percent",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387"},p.a.createElement(v["a"],{suffix:"%"})),oe?p.a.createElement(i["a"].Item,{name:"standard",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(u["a"],null,p.a.createElement(Ee,{value:null},"\u65e0"),p.a.createElement(Ee,{value:3145},"\u6caa\u6df1300"),p.a.createElement(Ee,{value:4978},"\u4e2d\u8bc1500"),p.a.createElement(Ee,{value:39144},"\u4e2d\u8bc11000"))):p.a.createElement(i["a"].Item,{name:"entity",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(v["a"],{readOnly:!0}))),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u62a5\u544a\u6a21\u677f\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"templateName1",label:"\u6a21\u677f\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f"}]},p.a.createElement(u["a"],{onChange:be},x.map((function(e){return p.a.createElement(Ee,{value:e.id},e.reportShowName)})))),p.a.createElement(i["a"].Item,{name:"templateName",label:"\u6a21\u677f\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272\u5206\u7c7b"}]},p.a.createElement(u["a"],null,k.map((function(e){return p.a.createElement(Ee,{value:e.reportName},e.colorName||"\u9ed8\u8ba4")})))),p.a.createElement(i["a"].Item,{name:"singleOrTwo",label:"\u6807\u9898\u662f\u5426\u53cc\u884c",initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u9898\u662f\u5426\u53cc\u884c"}]},p.a.createElement(c["a"].Group,null,p.a.createElement(c["a"],{value:2},"\u662f"),p.a.createElement(c["a"],{value:1},"\u5426"))),p.a.createElement(i["a"].Item,{name:"reportName",label:"\u62a5\u544a\u540d\u79f0\u8bbe\u7f6e",rules:[{required:!1}]},p.a.createElement(v["a"],null)),p.a.createElement(i["a"].Item,{name:"remark",label:"\u62a5\u544a\u58f0\u660e",rules:[{required:!1}]},p.a.createElement(l["a"],{type:"primary",onClick:fe},"\u589e\u52a0\u6807\u9898")),L.map((function(e,t){return p.a.createElement("div",{key:e.id},p.a.createElement(i["a"].Item,{name:"title".concat(e.id),label:"\u6807\u9898".concat(ie[t+1]),rules:[{required:!1}]},p.a.createElement(v["a"],{suffix:p.a.createElement(W,{className:q.a.delete,onClick:function(){return pe(t)}})})),p.a.createElement(i["a"].Item,{name:"content".concat(e.id),label:"\u6b63\u6587",rules:[{required:!1}]},p.a.createElement(v["a"].TextArea,null)))})))),p.a.createElement("div",{className:q.a.echartId,id:"echartsId"}),p.a.createElement("div",{className:q.a.bottomBox},p.a.createElement(l["a"],{onClick:de,className:q.a.btnCancel},"\u53d6\u6d88"),p.a.createElement(l["a"],{type:"primary",onClick:ge,loading:m},"\u751f\u6210\u5e76\u4e0b\u8f7d\u62a5\u544a")),p.a.createElement(ye,{visible:H,onCancel:function(){return G(!1)}}))},xe=we,Oe=(m["a"].RangePicker,u["a"].Option),Ie=function(e){var t=e.parentForm,a=Object(d["useState"])(!1),n=Object(s["a"])(a,2),r=n[0],m=n[1],f=Object(d["useState"])([]),b=Object(s["a"])(f,2),y=b[0],x=b[1],I=Object(d["useState"])([]),j=Object(s["a"])(I,2),N=j[0],k=j[1],M=i["a"].useForm(),L=Object(s["a"])(M,1),D=L[0],A=function(){history.go(-1)},Y=function(){var e=Object(E["a"])(O.a.mark((function e(){var t;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["m"])({reportForm:3,reportDimension:1});case 2:t=e.sent,1001===+t.code&&x(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={reportForm:3,reportDimension:1,parentId:t},e.next=3,Object(S["l"])(a);case 3:n=e.sent,1001===+n.code&&(D.setFieldsValue({templateName:""}),k(n.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(E["a"])(O.a.mark((function e(){var a,n,r;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return a=e.sent,e.next=6,D.validateFields();case 6:n=e.sent,a.dateStart=a.dateStart?R()(a.dateStart).format("YYYY-MM-DD"):null,a.dateEnd=R()(a.dateEnd).format("YYYY-MM-DD"),r=Object(g["a"])(Object(g["a"])({},n),a),P(r),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0,"err"),e.t0.errorFields&&w["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m(!0),a={customerIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd},e.next=4,Object(S["c"])(a);case 4:n=e.sent,B(n.data,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){var a=e.map((function(e){var t,a=(null===(t=e.investmentDateParams)||void 0===t?void 0:t.map((function(e){return e.investDate})))||[];a.sort((function(e,t){return R()(e)-R()(t)}));for(var n=[{name:"\u7ec4\u5408\u7d2f\u8ba1\u6536\u76ca",showSymbol:!1,type:"line",connectNulls:!0,data:[],lineStyle:{width:1.5,shadowColor:"rgba(0,0,0,0.5)",shadowBlur:4,shadowOffsetY:5}}],r=0;r<a.length;r++){n[0].data[r]="";var o,c=Object(C["a"])(e.investmentDateParams);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.investDate===a[r]&&(n[0].data[r]=100*l.returnRate)}}catch(d){c.e(d)}finally{c.f()}}var i=document.getElementById("echartsId");i.innerHTML='<div id="echartsline" style="height: 100%;"></div>';var s=F["a"](document.getElementById("echartsline")),u=new Promise((function(e,t){s.clear(),s.setOption({title:{show:!1},tooltip:{},legend:{data:["\u7ec4\u5408\u7d2f\u8ba1\u6536\u76ca"]},color:["#C92711"],xAxis:{data:a,nameTextStyle:{fontSize:16},axisLine:{show:!0,lineStyle:{color:"#000"}}},yAxis:{nameTextStyle:{fontSize:16},axisLine:{show:!0,lineStyle:{color:"#000"}},axisLabel:{formatter:"{value} %"}},series:n},!0),s.on("finished",(function(){e()}))})),m=u.then((function(){var e=s.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"});return e}));return{customerId:e.customerId,echarturl:m}}));_(a,t)},_=function(){var e=Object(E["a"])(O.a.mark((function e(t,a){var n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.map((function(e){return e.echarturl})),Promise.all(n).then((function(e){var n={reportName:a.reportName,customerIds:a.productId,dateStart:a.dateStart,dateEnd:a.dateEnd,templateName:a.templateName,remark:a.remark};n.customerIdImgListStr=e.map((function(e,a){return{customerId:t[a].customerId,imgInfo:e.replace("data:image/png;base64,","")}})),V("/mrp_analysis/dailyReport/exportDailyReport",n)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=function(e,t){T()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl).concat(e),data:t,method:"post",responseType:"blob",headers:{"Content-Type":"application/json;\xa0application/octet-stream",tokenId:Object(h["l"])("vipAdminToken")||""}}).then((function(e){var t=e.headers["content-disposition"].split(";")[1].split("filename=")[1].split(".doc")[0];t=decodeURIComponent(t);var a=new Blob([e.data],{type:"application/msword"}),n=document.createElement("a"),r=window.URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),m(!1)})).catch((function(e){w["default"].warning("\u4e0b\u8f7d\u5931\u8d25!"),m(!1)}))},H={labelCol:{span:4},wrapperCol:{span:10}},G=[{label:"\u6839\u53f7250",value:"250"},{label:"\u6839\u53f7252",value:"252"}];return Object(d["useEffect"])((function(){D.setFieldsValue({flag:"250",entity:"hs300"}),Y()}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"],Object(o["a"])({form:D},H),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u4ea7\u54c1\u6307\u6807\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"flag",label:"\u6307\u6807\u5e74\u5316\u65b9\u5f0f"},p.a.createElement(c["a"].Group,{options:G})),p.a.createElement(i["a"].Item,{name:"percent",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387"},p.a.createElement(v["a"],{suffix:"%"})),p.a.createElement(i["a"].Item,{name:"entity",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(u["a"],null,p.a.createElement(Oe,{value:"hs300"},"\u6caa\u6df1300")))),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u62a5\u544a\u6a21\u677f\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"templateName1",label:"\u6a21\u677f\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f"}]},p.a.createElement(u["a"],{onChange:U},y.map((function(e){return p.a.createElement(Oe,{value:e.id},e.reportShowName)})))),p.a.createElement(i["a"].Item,{name:"templateName",label:"\u6a21\u677f\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272\u5206\u7c7b"}]},p.a.createElement(u["a"],null,N.map((function(e){return p.a.createElement(Oe,{value:e.reportName},e.colorName||"\u9ed8\u8ba4")})))),p.a.createElement(i["a"].Item,{name:"reportName",label:"\u62a5\u544a\u540d\u79f0\u8bbe\u7f6e",rules:[{required:!1}]},p.a.createElement(v["a"],null)),p.a.createElement(i["a"].Item,{name:"remark",label:"\u62a5\u544a\u58f0\u660e",rules:[{required:!0}]},p.a.createElement(v["a"].TextArea,null)))),p.a.createElement("div",{className:q.a.echartId,id:"echartsId"}),p.a.createElement("div",{className:q.a.bottomBox},p.a.createElement(l["a"],{onClick:A,className:q.a.btnCancel},"\u53d6\u6d88"),p.a.createElement(l["a"],{type:"primary",onClick:z,loading:r},"\u751f\u6210\u5e76\u4e0b\u8f7d\u62a5\u544a")))},je=Ie,Se=u["a"].Option,Ne=function(e){var t=e.parentForm,a=e.productNames,n=Object(d["useState"])(!1),r=Object(s["a"])(n,2),m=r[0],f=r[1],b=Object(d["useState"])([]),y=Object(s["a"])(b,2),x=y[0],I=y[1],j=Object(d["useState"])([]),N=Object(s["a"])(j,2),k=N[0],C=N[1],M=Object(d["useState"])([{item:"",id:1}]),F=Object(s["a"])(M,2),L=F[0],D=F[1],A=Object(d["useState"])(2),Y=Object(s["a"])(A,2),U=Y[0],B=Y[1],_=Object(d["useState"])(!1),V=Object(s["a"])(_,2),H=V[0],G=V[1],X=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],Z=i["a"].useForm(),$=Object(s["a"])(Z,1),ee=$[0],te=function(){history.go(-1)},oe=function(e){var t=L.filter((function(t,a){return a!==e}));D(t)},ce=function(){L.length<5&&(B(U+1),D([].concat(Object(P["a"])(L),[{item:"",id:U+1}])))},le=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["m"])(t);case 2:a=e.sent,1001===+a.code&&I(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(E["a"])(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={reportForm:4,reportDimension:2,parentId:t},e.next=3,Object(S["l"])(n);case 3:r=e.sent,1001===+r.code&&(ee.setFieldsValue({templateName:""}),C(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(E["a"])(O.a.mark((function e(){var a,n,r,o,c,l,i;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return a=e.sent,e.next=6,ee.validateFields();case 6:for(l in n=e.sent,r=Object(g["a"])({},n),o=1,c=1,n)-1!==l.indexOf("title")?(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"title".concat(o),n[l])),o++):-1!==l.indexOf("content")&&(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"content".concat(c),n[l])),c++);a.dateStart=a.quarter.format("YYYY-MM-DD"),a.dateEnd=R()(a.dateStart).add(1,"quarters").subtract(1,"days").format("YYYY-MM-DD"),i=Object(g["a"])(Object(g["a"])({},r),a),ue(i),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),console.log(e.t0,"err"),e.t0.errorFields&&w["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),a={title1:t.title1||"",title2:t.title2||"",title3:t.title3||"",title4:t.title4||"",title5:t.title5||"",content1:t.content1||"",content2:t.content2||"",content3:t.content3||"",content4:t.content4||"",content5:t.content5||"",productIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd,standard:t.standard,templateName:t.templateName,singleOrTwo:t.singleOrTwo,remark:t.remark,reportName:t.reportName,interestType:t.interestType},e.next=4,Object(S["h"])(a);case 4:n=e.sent,-1!==t.templateName.indexOf("ningquan")&&de(n,a),-1!==t.templateName.indexOf("ruibo")&&me(n,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e,t){var a=[];new Promise((function(t,n){var r=0;e.data.forEach(function(){var n=Object(E["a"])(O.a.mark((function n(o){var c,l,i;return O.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c="",Q(o.imgInfo,o.productId).then((function(e){c=e})),l="",J(o.imgInfo,o.productId).then((function(e){l=e})),i="",K(o.imgInfo,o.productId).then((function(n){i=n,a.push({productId:o.productId,imgInfo:{performance:i,asset:c,industry:l,productTrend:""}}),r++,r===e.data.length&&t(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})).then((function(e){pe("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},de=function(e,t){var n=[];new Promise((function(t,r){e.data.forEach(function(){var r=Object(E["a"])(O.a.mark((function r(o,c){var l,i,s;return O.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l="",re(o.imgInfo,o.productId).then((function(e){l=e})),i="",ne(o.imgInfo,o.productId).then((function(e){i=e})),s="",ae(o.imgInfo,a[c],o.productId).then((function(a){s=a,n.push({productId:o.productId,imgInfo:{ningquanTrend:s,ningquanIndustry:i,ningquanPosition:l}}),c++,c===e.data.length&&t(n)}));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})).then((function(e){pe("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},pe=function(e,t){T()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl).concat(e),data:t,method:"post",responseType:"blob",headers:{"Content-Type":"application/json;\xa0application/octet-stream",tokenId:Object(h["l"])("vipAdminToken")||""}}).then((function(e){var t=e.headers["content-disposition"].split(";")[1].split("filename=")[1].split(".doc")[0];t=decodeURIComponent(t);var a=new Blob([e.data],{type:"application/msword"}),n=document.createElement("a"),r=window.URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),f(!1)})).catch((function(e){w["default"].warning("\u4e0b\u8f7d\u5931\u8d25!"),f(!1)}))},fe={labelCol:{span:4},wrapperCol:{span:10}},he=[{label:"\u6839\u53f7250",value:"250"},{label:"\u6839\u53f7252",value:"252"}];return Object(d["useEffect"])((function(){ee.setFieldsValue({flag:"250",standard:4978,entity:"\u6caa\u6df1300"}),le({reportForm:4,reportDimension:2})}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"],Object(o["a"])({form:ee},fe),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u4ea7\u54c1\u6307\u6807\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"flag",label:"\u6307\u6807\u5e74\u5316\u65b9\u5f0f"},p.a.createElement(c["a"].Group,{options:he})),p.a.createElement(i["a"].Item,{name:"percent",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387"},p.a.createElement(v["a"],{suffix:"%"})),p.a.createElement(i["a"].Item,{name:"entity",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(v["a"],{readOnly:!0}))),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u62a5\u544a\u6a21\u677f\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"templateName1",label:"\u6a21\u677f\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f"}]},p.a.createElement(u["a"],{onChange:ie},x.map((function(e){return p.a.createElement(Se,{value:e.id},e.reportShowName)})))),p.a.createElement(i["a"].Item,{name:"templateName",label:"\u6a21\u677f\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272\u5206\u7c7b"}]},p.a.createElement(u["a"],null,k.map((function(e){return p.a.createElement(Se,{value:e.reportName},e.colorName||"\u9ed8\u8ba4")})))),p.a.createElement(i["a"].Item,{name:"singleOrTwo",label:"\u6807\u9898\u662f\u5426\u53cc\u884c",initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u9898\u662f\u5426\u53cc\u884c"}]},p.a.createElement(c["a"].Group,null,p.a.createElement(c["a"],{value:2},"\u662f"),p.a.createElement(c["a"],{value:1},"\u5426"))),p.a.createElement(i["a"].Item,{name:"reportName",label:"\u62a5\u544a\u540d\u79f0\u8bbe\u7f6e",rules:[{required:!1}]},p.a.createElement(v["a"],null)),p.a.createElement(i["a"].Item,{name:"remark",label:"\u62a5\u544a\u58f0\u660e",rules:[{required:!1}]},p.a.createElement(l["a"],{type:"primary",onClick:ce},"\u589e\u52a0\u6807\u9898")),L.map((function(e,t){return p.a.createElement("div",{key:e.id},p.a.createElement(i["a"].Item,{name:"title".concat(e.id),label:"\u6807\u9898".concat(X[t+1]),rules:[{required:!1}]},p.a.createElement(v["a"],{suffix:p.a.createElement(W,{className:q.a.delete,onClick:function(){return oe(t)}})})),p.a.createElement(i["a"].Item,{name:"content".concat(e.id),label:"\u6b63\u6587",rules:[{required:!1}]},p.a.createElement(v["a"].TextArea,null)))})))),p.a.createElement("div",{className:q.a.echartId,id:"echartsId"}),p.a.createElement("div",{className:q.a.bottomBox},p.a.createElement(l["a"],{onClick:te,className:q.a.btnCancel},"\u53d6\u6d88"),p.a.createElement(l["a"],{type:"primary",onClick:se,loading:m},"\u751f\u6210\u5e76\u4e0b\u8f7d\u62a5\u544a")),p.a.createElement(ye,{visible:H,onCancel:function(){return G(!1)}}))},ke=Ne,Ce=u["a"].Option,Me=function(e){var t=e.parentForm,a=e.productNames,n=Object(d["useState"])(!1),r=Object(s["a"])(n,2),m=r[0],f=r[1],b=Object(d["useState"])([]),y=Object(s["a"])(b,2),x=y[0],I=y[1],j=Object(d["useState"])([]),N=Object(s["a"])(j,2),k=N[0],C=N[1],M=Object(d["useState"])([{item:"",id:1}]),F=Object(s["a"])(M,2),L=F[0],D=F[1],A=Object(d["useState"])(2),Y=Object(s["a"])(A,2),U=Y[0],B=Y[1],_=Object(d["useState"])(!1),V=Object(s["a"])(_,2),H=V[0],G=V[1],X=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],Z=i["a"].useForm(),$=Object(s["a"])(Z,1),ee=$[0],te=function(){history.go(-1)},oe=function(e){var t=L.filter((function(t,a){return a!==e}));D(t)},ce=function(){L.length<5&&(B(U+1),D([].concat(Object(P["a"])(L),[{item:"",id:U+1}])))},le=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["m"])(t);case 2:a=e.sent,1001===+a.code&&I(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(E["a"])(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={reportForm:5,reportDimension:2,parentId:t},e.next=3,Object(S["l"])(n);case 3:r=e.sent,1001===+r.code&&(ee.setFieldsValue({templateName:""}),C(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(E["a"])(O.a.mark((function e(){var a,n,r,o,c,l,i;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return a=e.sent,e.next=6,ee.validateFields();case 6:for(l in n=e.sent,r=Object(g["a"])({},n),o=1,c=1,n)-1!==l.indexOf("title")?(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"title".concat(o),n[l])),o++):-1!==l.indexOf("content")&&(delete r[l],r=Object(g["a"])(Object(g["a"])({},r),{},Object(z["a"])({},"content".concat(c),n[l])),c++);a.dateStart=a.year.format("YYYY")+"-01-01",a.dateEnd=R()(a.dateStart).add(1,"years").subtract(1,"days").format("YYYY-MM-DD"),i=Object(g["a"])(Object(g["a"])({},r),a),ue(i),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),console.log(e.t0,"err"),e.t0.errorFields&&w["default"].warning("\u8bf7\u68c0\u67e5\u5fc5\u586b\u9879");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(E["a"])(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),a={title1:t.title1||"",title2:t.title2||"",title3:t.title3||"",title4:t.title4||"",title5:t.title5||"",content1:t.content1||"",content2:t.content2||"",content3:t.content3||"",content4:t.content4||"",content5:t.content5||"",productIds:t.productId,dateStart:t.dateStart,dateEnd:t.dateEnd,standard:t.standard,templateName:t.templateName,singleOrTwo:t.singleOrTwo,remark:t.remark,reportName:t.reportName,interestType:t.interestType},e.next=4,Object(S["h"])(a);case 4:n=e.sent,-1!==t.templateName.indexOf("ningquan")&&de(n,a),-1!==t.templateName.indexOf("ruibo")&&me(n,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e,t){var a=[];new Promise((function(t,n){var r=0;e.data.forEach(function(){var n=Object(E["a"])(O.a.mark((function n(o){var c,l,i;return O.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c="",Q(o.imgInfo,o.productId).then((function(e){c=e})),l="",J(o.imgInfo,o.productId).then((function(e){l=e})),i="",K(o.imgInfo,o.productId).then((function(n){i=n,a.push({productId:o.productId,imgInfo:{performance:i,asset:c,industry:l,productTrend:""}}),r++,r===e.data.length&&t(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})).then((function(e){pe("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},de=function(e,t){var n=[];new Promise((function(t,r){e.data.forEach(function(){var r=Object(E["a"])(O.a.mark((function r(o,c){var l,i,s;return O.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l="",re(o.imgInfo,o.productId).then((function(e){l=e})),i="",ne(o.imgInfo,o.productId).then((function(e){i=e})),s="",ae(o.imgInfo,a[c],o.productId).then((function(a){s=a,n.push({productId:o.productId,imgInfo:{ningquanTrend:s,ningquanIndustry:i,ningquanPosition:l}}),c++,c===e.data.length&&t(n)}));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})).then((function(e){pe("/mrp_analysis/monthlyReport/createMonthlyReport",Object(g["a"])(Object(g["a"])({},t),{},{productIdImgListStr:e}))}))},pe=function(e,t){T()({url:"".concat({baseUrl:"/sitvipmanager/",adminUrl:"/vip-manager",ASSSET_DOMIAN:"RESOURCE_PATH",AI:{AI_type:2},isSaas:2}.adminUrl).concat(e),data:t,method:"post",responseType:"blob",headers:{"Content-Type":"application/json;\xa0application/octet-stream",tokenId:Object(h["l"])("vipAdminToken")||""}}).then((function(e){var t=e.headers["content-disposition"].split(";")[1].split("filename=")[1].split(".doc")[0];t=decodeURIComponent(t);var a=new Blob([e.data],{type:"application/msword"}),n=document.createElement("a"),r=window.URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),f(!1)})).catch((function(e){w["default"].warning("\u4e0b\u8f7d\u5931\u8d25!"),f(!1)}))},fe={labelCol:{span:4},wrapperCol:{span:10}},he=[{label:"\u6839\u53f7250",value:"250"},{label:"\u6839\u53f7252",value:"252"}];return Object(d["useEffect"])((function(){ee.setFieldsValue({flag:"250",standard:4978,entity:"\u6caa\u6df1300"}),le({reportForm:5,reportDimension:2})}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"],Object(o["a"])({form:ee},fe),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u4ea7\u54c1\u6307\u6807\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"flag",label:"\u6307\u6807\u5e74\u5316\u65b9\u5f0f"},p.a.createElement(c["a"].Group,{options:he})),p.a.createElement(i["a"].Item,{name:"percent",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387"},p.a.createElement(v["a"],{suffix:"%"})),p.a.createElement(i["a"].Item,{name:"entity",label:"\u57fa\u51c6\u9009\u62e9"},p.a.createElement(v["a"],{readOnly:!0}))),p.a.createElement("div",{className:q.a.boxItem},p.a.createElement("div",{className:q.a.topTitle},"\u62a5\u544a\u6a21\u677f\u8bbe\u7f6e"),p.a.createElement(i["a"].Item,{name:"templateName1",label:"\u6a21\u677f\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f"}]},p.a.createElement(u["a"],{onChange:ie},x.map((function(e){return p.a.createElement(Ce,{value:e.id},e.reportShowName)})))),p.a.createElement(i["a"].Item,{name:"templateName",label:"\u6a21\u677f\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272\u5206\u7c7b"}]},p.a.createElement(u["a"],null,k.map((function(e){return p.a.createElement(Ce,{value:e.reportName},e.colorName||"\u9ed8\u8ba4")})))),p.a.createElement(i["a"].Item,{name:"singleOrTwo",label:"\u6807\u9898\u662f\u5426\u53cc\u884c",initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u9898\u662f\u5426\u53cc\u884c"}]},p.a.createElement(c["a"].Group,null,p.a.createElement(c["a"],{value:2},"\u662f"),p.a.createElement(c["a"],{value:1},"\u5426"))),p.a.createElement(i["a"].Item,{name:"reportName",label:"\u62a5\u544a\u540d\u79f0\u8bbe\u7f6e",rules:[{required:!1}]},p.a.createElement(v["a"],null)),p.a.createElement(i["a"].Item,{name:"remark",label:"\u62a5\u544a\u58f0\u660e",rules:[{required:!1}]},p.a.createElement(l["a"],{type:"primary",onClick:ce},"\u589e\u52a0\u6807\u9898")),L.map((function(e,t){return p.a.createElement("div",{key:e.id},p.a.createElement(i["a"].Item,{name:"title".concat(e.id),label:"\u6807\u9898".concat(X[t+1]),rules:[{required:!1}]},p.a.createElement(v["a"],{suffix:p.a.createElement(W,{className:q.a.delete,onClick:function(){return oe(t)}})})),p.a.createElement(i["a"].Item,{name:"content".concat(e.id),label:"\u6b63\u6587",rules:[{required:!1}]},p.a.createElement(v["a"].TextArea,null)))})))),p.a.createElement("div",{className:q.a.echartId,id:"echartsId"}),p.a.createElement("div",{className:q.a.bottomBox},p.a.createElement(l["a"],{onClick:te,className:q.a.btnCancel},"\u53d6\u6d88"),p.a.createElement(l["a"],{type:"primary",onClick:se,loading:m},"\u751f\u6210\u5e76\u4e0b\u8f7d\u62a5\u544a")),p.a.createElement(ye,{visible:H,onCancel:function(){return G(!1)}}))},Te=Me,Fe=a("/XAr"),Le=a.n(Fe),Re=(m["a"].RangePicker,m["a"].WeekPicker,u["a"].Option,function(e){var t=Object(d["useState"])(!1),a=Object(s["a"])(t,2),u=a[0],b=a[1],y=Object(d["useState"])([]),v=Object(s["a"])(y,2),g=v[0],E=v[1],w=Object(d["useState"])(!1),x=Object(s["a"])(w,2),O=x[0],I=(x[1],Object(d["useState"])("weekly")),j=Object(s["a"])(I,2),S=j[0],N=j[1],C=Object(d["useState"])("product"),M=Object(s["a"])(C,2),T=M[0],F=M[1],L=Object(d["useState"])(1),R=Object(s["a"])(L,2),D=R[0],q=R[1],A=i["a"].useForm(),Y=Object(s["a"])(A,1),z=Y[0],P=function(){b(!0)},B=function(e){var t=[],a=[];"customer"===T?e.forEach((function(e){t.push(e.customerId),a.push(e.customerName)})):e.forEach((function(e){t.push(e.productId),a.push(e.productName)})),z.setFieldsValue({productId:t}),E(a),b(!1)},_={labelCol:{span:4},wrapperCol:{span:10}},V=[{label:"\u65e5\u62a5",value:"daily"},{label:"\u5468\u62a5",value:"weekly"},{label:"\u6708\u62a5",value:"monthly"},{label:"\u5b63\u62a5",value:"quarter"},{label:"\u5e74\u62a5",value:"year"}],H=[{label:"\u5ba2\u6237",value:"customer"},{label:"\u4ea7\u54c1",value:"product"}],G=[{label:"\u662f",value:1},{label:"\u5426",value:2}],W=function(e){N(e.target.value),z.setFieldsValue({productId:[]}),E([]),"daily"===e.target.value?(F("customer"),z.setFieldsValue({dimension:"customer"})):(F("product"),z.setFieldsValue({dimension:"product"}))},K=function(e){F(e.target.value),E([])},Q=function(e){q(e.target.value)},J=function(){switch(S){case"daily":return p.a.createElement(je,{parentForm:z});case"weekly":return p.a.createElement(U,{dimension:T,parentForm:z});case"monthly":return p.a.createElement(xe,{parentForm:z,interestType:D,productNames:g});case"quarter":return p.a.createElement(ke,{parentForm:z,interestType:D,productNames:g});case"year":return p.a.createElement(Te,{parentForm:z,interestType:D,productNames:g})}},X=function(){e.history.push("/reportCenter/library/list/downRecord")};return Object(d["useEffect"])((function(){z.setFieldsValue({reportType:"weekly",dimension:"product",interestType:1})}),[]),p.a.createElement(f["a"],{title:"\u751f\u6210\u62a5\u544a"},p.a.createElement(n["a"],{spinning:O},p.a.createElement(r["a"],null,p.a.createElement(i["a"],Object(o["a"])({form:z},_),p.a.createElement("div",{className:Le.a.boxItem},p.a.createElement("div",{className:Le.a.topTitle},p.a.createElement("div",null,"\u4ea7\u54c1\u9009\u62e9 ",console.log(Object(h["l"])("email"))),-1!==Object(h["l"])("email").indexOf("yuanxin")&&p.a.createElement(l["a"],{type:"primary",onClick:X},"\u4e0b\u8f7d\u8bb0\u5f55")),p.a.createElement(i["a"].Item,{name:"reportType",label:"\u62a5\u544a\u5f62\u5f0f",rules:[{required:!0}]},p.a.createElement(c["a"].Group,{options:V,onChange:W})),"weekly"===S?p.a.createElement(i["a"].Item,{name:"dimension",label:"\u62a5\u8868\u7ef4\u5ea6",rules:[{required:!0}]},p.a.createElement(c["a"].Group,{options:H,onChange:K})):null,"daily"===S||"weekly"===S?null:p.a.createElement(i["a"].Item,{name:"interestType",label:"\u662f\u5426\u5355\u5229",rules:[{required:!0}]},p.a.createElement(c["a"].Group,{options:G,onChange:Q})),p.a.createElement(i["a"].Item,{name:"productId",label:"product"===T?"\u4ea7\u54c1\u9009\u62e9":"\u5ba2\u6237\u9009\u62e9",rules:[{required:!0}]},p.a.createElement(i["a"].Item,{noStyle:!0},p.a.createElement(l["a"],{type:"primary",onClick:P},"product"===T?"\u4ea7\u54c1\u9009\u62e9":"\u5ba2\u6237\u9009\u62e9")),p.a.createElement("span",{style:{marginLeft:12}},g.join(", "))),"quarter"===S?p.a.createElement(i["a"].Item,{label:"\u5b63\u5ea6\u62a5\u544a",name:"quarter",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62a5\u544a\u5b63\u5ea6"}]},p.a.createElement(m["a"],{picker:"quarter"})):"year"===S?p.a.createElement(i["a"].Item,{label:"\u5e74\u5ea6\u62a5\u544a",name:"year",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62a5\u544a\u5e74\u5ea6"}]},p.a.createElement(m["a"],{picker:"year"})):p.a.createElement(p.a.Fragment,null,p.a.createElement(i["a"].Item,{label:"\u62a5\u544a\u5f00\u59cb\u65e5\u671f",name:"dateStart",rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u62a5\u544a\u5f00\u59cb\u65e5\u671f"}]},p.a.createElement(m["a"],null)),p.a.createElement(i["a"].Item,{label:"\u62a5\u544a\u7ed3\u675f\u65e5\u671f",name:"dateEnd",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62a5\u544a\u7ed3\u675f\u65e5\u671f"}]},p.a.createElement(m["a"],null))))),J()),p.a.createElement(k,{visible:u,dimension:T,handleCancel:function(){return b(!1)},handleSubmit:B})))});t["default"]=Re},QJYQ:function(e,t,a){e.exports={container:"antd-pro-pages-report-center-library-generate-report-components-match-modal-index-container"}}}]);