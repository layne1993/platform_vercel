(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{dsfv:function(e,a,t){"use strict";t.r(a);t("5Dmo");var n=t("3S7+"),c=t("0Owb"),l=(t("14J3"),t("BMrR")),r=(t("+L6B"),t("2/Rp")),i=(t("7Kak"),t("9yH6")),o=(t("jCWc"),t("kPKH")),s=(t("5NDa"),t("5rEg")),u=(t("DYRE"),t("zeV3")),d=t("k1fw"),m=(t("y8nQ"),t("Vl3Y")),p=t("tJVT"),b=(t("/xke"),t("TeRw")),f=t("q1tI"),g=t.n(f),h=t("Hx5s"),O=t("+n12"),E=t("tQHx"),j=(t("OaEy"),t("2fM7")),C=(t("2qtc"),t("kLXV")),y=t("9kvl"),v=t("RCxd"),N=function(e,a,t,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;b["default"][e||"info"]({message:a,description:t,placement:n,duration:c||3})},k=function(e){var a=e.params,t=e.dispatch,n=e.success,c=e.loading,l=m["a"].useForm(),r=Object(p["a"])(l,1),i=r[0],o=Object(f["useState"])(!1),u=Object(p["a"])(o,2),b=u[0],h=u[1],O=Object(f["useState"])([]),E=Object(p["a"])(O,2),y=E[0],k=E[1],w=function(){t({type:"global/channelList",callback:function(e){var a=e.data,t=e.code;1008===t&&k(a||[])}})},L=function(){i.validateFields().then((function(e){t({type:"CHANNEL/changeChannelRelatedStatus",payload:Object(d["a"])(Object(d["a"])({},e),{},{type:1}),callback:function(e){var a=e.code,t=e.data,c=e.message;if(1008===a)h(!1),n(),N("success","\u63d0\u9192","\u5173\u8054\u6210\u529f");else{var l=c||t||"\u5173\u8054\u5931\u8d25\uff01";N("error","\u63d0\u9192",l)}}})}))},x=function(){t({type:"CHANNEL/changeChannelRelatedStatus",payload:Object(d["a"])(Object(d["a"])({},a),{},{type:2}),callback:function(e){var a=e.code,t=e.data,c=e.message;if(1008===a)n(),N("success","\u63d0\u9192","\u89e3\u9664\u6210\u529f");else{var l=c||t||"\u89e3\u9664\u5931\u8d25\uff01";N("error","\u63d0\u9192",l)}}})},S=function(){C["a"].confirm({title:"\u63d0\u793a",icon:g.a.createElement(v["a"],null),content:"\u8bf7\u786e\u8ba4\u662f\u5426\u89e3\u9664\u5173\u8054",okText:"\u786e\u8ba4",onOk:x})};return g.a.createElement(g.a.Fragment,null,b&&g.a.createElement(C["a"],{width:500,visible:b,onCancel:function(){return h(!1)},title:"\u63d0\u793a",onOk:L,confirmLoading:c,destroyOnClose:!0,maskClosable:!1},g.a.createElement(m["a"],{form:i,layout:"vertical",onFinish:L},g.a.createElement(m["a"].Item,{label:"\u6e20\u9053\u7f16\u7801",name:"encodingRules",rules:[{required:!1,message:"\u8bf7\u8f93\u5165"}]},g.a.createElement(s["a"],{disabled:!0})),g.a.createElement(m["a"].Item,{label:"\u5173\u8054\u6e20\u9053",name:"channelIds",rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]},g.a.createElement(j["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",showSearch:!0,mode:"multiple",filterOption:function(e,a){return a.children&&a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},y.map((function(e,a){return g.a.createElement(j["a"].Option,{key:a,value:e.channelId},e.channelName)})))))),Array.isArray(a.channelList)&&a.channelList.length>0?g.a.createElement("a",{onClick:S},"\u89e3\u9664"):g.a.createElement("a",{onClick:function(){h(!0),w(),i.setFieldsValue(Object(d["a"])(Object(d["a"])({},a),{},{encodingRules:a.alias}))}},"\u5173\u8054\u6e20\u9053"))},w=Object(y["b"])((function(e){var a=e.loading;return{loading:a.effects["CHANNEL/changeChannelRelatedStatus"]}}))(k);k.defaultProps={params:{},loading:!1};var L=t("55Ip"),x=function(e,a,t,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;b["default"][e||"info"]({message:a,description:t,placement:n,duration:c||3})},S={labelCol:{xs:{span:8},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16}}},A=function(e){var a=e.authEdit,t=(e.authExport,e.loading),b=e.dispatch,j=e.updateChannelLoading,C=m["a"].useForm(),y=Object(p["a"])(C,1),v=y[0],N=Object(f["useState"])({list:[],total:0}),k=Object(p["a"])(N,2),A=k[0],F=k[1],H=Object(f["useState"])({pageNum:1,pageSize:20}),I=Object(p["a"])(H,2),R=I[0],T=I[1],V=Object(f["useState"])([]),q=Object(p["a"])(V,2),z=(q[0],q[1]),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d["a"])({},R);b({type:"CHANNEL/vacancyChannelList",payload:Object(d["a"])(Object(d["a"])({},Object(O["C"])(e)),{},{sortFiled:"createTime",sortType:"desc"}),callback:function(e){var a=e.code,t=e.data,n=e.message;if(1008===a)F(t||{});else{var c=n||t||"\u67e5\u8be2\u5931\u8d25";x("error","\u63d0\u9192",c)}}})};Object(f["useEffect"])((function(){v.setFieldsValue({scope:1}),J(Object(d["a"])(Object(d["a"])({},v.getFieldsValue()),R))}),[]);var D=function(e){b({type:"CHANNEL/updateChannel",payload:{},callback:function(e){var a=e.code,t=e.data,n=e.message;if(1008===a)x("success","\u63d0\u9192","\u66f4\u65b0\u6210\u529f");else{var c=n||t||"\u66f4\u65b0\u5931\u8d25\uff01";x("error","\u63d0\u9192",c)}}})},K=function(){v.resetFields(),z([]),J(Object(d["a"])(Object(d["a"])({},R),{},{pageNum:1})),T(Object(d["a"])(Object(d["a"])({},R),{},{pageNum:1}))},P=function(e,a,t){var n={pageNum:e.current,pageSize:e.pageSize};T(n),z([]),J(Object(d["a"])(Object(d["a"])({},v.getFieldsValue()),n))},B=[{title:"\u539f\u59cb\u7f16\u7801/\u522b\u540d",dataIndex:"alias",width:200,fixed:"left"},{title:"\u5173\u8054\u6e20\u9053",dataIndex:"channelList",width:300,render:function(e){return Array.isArray(e)&&e.length>0?g.a.createElement(u["b"],null,e.map((function(e,a){return g.a.createElement(L["a"],{key:a,to:"/channel/list/detail/".concat(e.channelId,"?channelName=").concat(e.channelName)},e.channelName)}))):"--"}},{title:"\u4ea4\u6613\u8bb0\u5f55\u6761\u6570",dataIndex:"recordNumber",width:100,render:function(e){return e||"--"}},{title:"\u64cd\u4f5c",width:200,render:function(e){return g.a.createElement(w,{params:e,success:function(){J(Object(d["a"])(Object(d["a"])({},R),{},{pageNum:1})),T(Object(d["a"])(Object(d["a"])({},R),{},{pageNum:1}))}})}}];return g.a.createElement(h["a"],{title:"\u7a7a\u7f3a\u6e20\u9053\u7f16\u53f7\u67e5\u8be2"},g.a.createElement("div",{style:{backgroundColor:"white",padding:15}},g.a.createElement(m["a"],Object(c["a"])({form:v},S,{onFinish:function(e){J(Object(d["a"])(Object(d["a"])(Object(d["a"])({},e),R),{},{pageNum:1})),T(Object(d["a"])(Object(d["a"])({},R),{},{pageNum:1}))}}),g.a.createElement(l["a"],{gutter:[8,0]},g.a.createElement(o["a"],{span:8},g.a.createElement(m["a"].Item,{label:"\u6e20\u9053\u7f16\u7801",name:"encodingRules",extra:"\u6e20\u9053\u7f16\u53f7\u662f\u4ece\u4ea4\u6613\u8bb0\u5f55\u4e2d\u7684\u4fe1\u606f\u83b7\u5f97\u7684"},g.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165",allowClear:!0}))),g.a.createElement(o["a"],{span:8},g.a.createElement(m["a"].Item,{label:"\u67e5\u8be2\u8303\u56f4",name:"scope",extra:"\u9ed8\u8ba4\u662f\u53ea\u770b\u672a\u5339\u914d"},g.a.createElement(i["a"].Group,null,g.a.createElement(i["a"],{value:1},"\u53ea\u770b\u672a\u5339\u914d\u7684"),g.a.createElement(i["a"],{value:2},"\u6240\u6709")))),g.a.createElement(o["a"],{span:8,style:{textAlign:"end"}},g.a.createElement(u["b"],null,g.a.createElement(r["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),g.a.createElement(r["a"],{htmlType:"reset",onClick:K},"\u91cd\u7f6e"))))),g.a.createElement(l["a"],null,g.a.createElement(u["b"],null,a&&g.a.createElement(n["a"],{title:"\u672c\u64cd\u4f5c\u9700\u8981\u91cd\u65b0\u5c06\u6240\u6709\u4ea4\u6613\u8bb0\u5f55\u8fdb\u884c\u5339\u914d\uff0c\u8f83\u6162\uff0c\u6210\u529f\u540e\u4f1a\u901a\u8fc7\u77ed\u4fe1\u63d0\u9192\u544a\u77e5"},g.a.createElement(r["a"],{loading:j,type:"primary",onClick:D},"\u5237\u65b0\u5339\u914d\uff08\u8bf7\u52a1\u5fc5\u5728\u65b0\u589e\u6216\u5173\u8054\u6e20\u9053\u540e\u70b9\u51fb\u672c\u6309\u94ae\uff01\uff09")))),g.a.createElement(E["a"],{loading:t,columns:B,dataSource:A.list||[],rowKey:function(e,a){return"id-".concat(a)},scroll:{x:"100%",scrollToFirstRowOnChange:!0},sticky:!0,total:A.total,pageNum:R.pageNum,onChange:P})))};a["default"]=Object(y["b"])((function(e){e.CHANNEL;var a=e.loading;return{loading:a.effects["CHANNEL/vacancyChannelList"],updateChannelLoading:a.effects["CHANNEL/updateChannel"]}}))(A);A.defaultProps={loading:!1,authEdit:!0,authExport:!0,updateChannelLoading:!1}}}]);