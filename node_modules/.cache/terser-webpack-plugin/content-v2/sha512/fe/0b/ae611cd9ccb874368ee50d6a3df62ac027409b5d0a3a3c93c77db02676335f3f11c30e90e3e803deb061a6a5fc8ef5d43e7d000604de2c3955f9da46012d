{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[18],{\"9+Zk\":function(e,t,a){e.exports={box:\"antd-pro-pages-custom-metrics-components-table-content-styles-box\",btn:\"antd-pro-pages-custom-metrics-components-table-content-styles-btn\"}},tkCU:function(e,t,a){e.exports={btnG:\"antd-pro-pages-custom-metrics-components-query-form-styles-btnG\",btnGAndRest:\"antd-pro-pages-custom-metrics-components-query-form-styles-btnGAndRest\"}},wrHR:function(e,t,a){\"use strict\";a.r(t);a(\"14J3\");var r=a(\"BMrR\"),n=(a(\"jCWc\"),a(\"kPKH\")),c=(a(\"IzEo\"),a(\"bx4M\")),l=a(\"tJVT\"),o=(a(\"Znn+\"),a(\"ZTPi\")),u=a(\"q1tI\"),s=a.n(u),i=a(\"Hx5s\"),d=(a(\"T2oS\"),a(\"W9HT\")),m=(a(\"5NDa\"),a(\"5rEg\")),p=(a(\"ozfa\"),a(\"MJZm\")),f=a(\"oBTY\");function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(e){return e.children=[]}));var a=[];return e=t.filter((function(e){return null!==e.parentCode})),a.push.apply(a,Object(f[\"a\"])(t.filter((function(e){return null===e.parentCode})))),b(a,e),a}function b(e,t){t.length&&e.forEach((function(e){var a;(a=e.children).push.apply(a,Object(f[\"a\"])(t.filter((function(t){return t.parentCode===e.targetCode})))),t=t.filter((function(t){return t.parentCode!==e.targetCode})),b(e.children,t)}))}var g=function e(t,a){for(var r,n=0;n<a.length;n++){var c=a[n];c.children&&(c.children.some((function(e){return e.targetCode===t}))?r=c.targetCode:e(t,c.children)&&(r=e(t,c.children)))}return r},h=a(\"MuoO\"),T=a(\"LvDl\"),E=p[\"a\"].TreeNode,v=m[\"a\"].Search,C=function(e){var t=Object(u[\"useState\"])(\"\"),a=Object(l[\"a\"])(t,2),r=a[0],n=a[1],c=Object(u[\"useState\"])(!0),o=Object(l[\"a\"])(c,2),i=o[0],m=o[1],f=Object(u[\"useState\"])([]),b=Object(l[\"a\"])(f,2),h=b[0],C=b[1],O=Object(u[\"useState\"])([]),M=Object(l[\"a\"])(O,2),k=M[0],q=M[1],S=Object(u[\"useState\"])([]),j=Object(l[\"a\"])(S,2),F=j[0],I=j[1],D=function(e){C(e),m(!1)},N=function(t){for(var a=[],r=function(e){F.forEach((function(r){r.targetCode===t[e]&&a.push(r)}))},n=0;n<t.length;n++)r(n);console.log(t,\"checkedKeys\",a);var c=e.dispatch;c({type:\"customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr\",checkedKeys:t,checkedOrgArr:a})},w=function(e){var t=F.map((function(t){return t.targetName.indexOf(e)>-1?g(t.targetCode,k):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));n(e),C(t),m(!0)},A=function e(t){return t.map((function(t){var a=t.targetName.indexOf(r),n=t.targetName.substr(0,a),c=t.targetName.substr(a+r.length),l=a>-1?s.a.createElement(\"span\",null,n,s.a.createElement(\"span\",{style:{color:\"#f50\"}},r),c):s.a.createElement(\"span\",null,t.targetName);return t.children.length?s.a.createElement(E,{key:t.targetCode,title:l},e(t.children)):s.a.createElement(E,{key:t.targetCode,title:l,disabled:Boolean(t.required),style:{minWidth:300}})}))};return Object(u[\"useEffect\"])((function(){var t=e.dispatch;t({type:\"customMetricsSelectTree/queryTreeList\",callback:function(e){var a=e.data||[];console.log(y(a)),q(y(a));for(var r=[],n=a.filter((function(e){return e.enable})).map((function(e){return e.targetCode})),c=function(e){a.forEach((function(t){t.targetCode===n[e]&&r.push(t)}))},l=0;l<n.length;l++)c(l);I(a),C(a.map((function(e){return e.targetCode}))),t({type:\"customMetricsSelectTree/saveRenderArr\",renderArr:a}),t({type:\"customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr\",checkedKeys:n,checkedOrgArr:r}),t({type:\"customMetricsSelectTree/saveInitCheckKeysAndCheckedOrgArr\",initCheckedKeys:Object(T[\"cloneDeep\"])(n),initCheckedOrgArr:Object(T[\"cloneDeep\"])(r)})}})}),[]),s.a.createElement(d[\"a\"],{spinning:Boolean(e.loading)},s.a.createElement(v,{style:{marginBottom:8},placeholder:\"\\u8bf7\\u8f93\\u5165\",onChange:function(e){w(e.target.value)}}),s.a.createElement(\"span\",{style:{fontSize:12,color:\"#333\"}},\"\\u6ce8\\uff1a\\u4fee\\u6539\\u6307\\u6807\\u540e\\uff0c\\u70b9\\u51fb\\u9875\\u9762\\u53f3\\u4fa7\\u201d\\u751f\\u6210\\u6570\\u636e\\u201c\\u624d\\u4f1a\\u751f\\u6548\"),s.a.createElement(\"div\",{style:{maxHeight:552,overflow:\"auto\"}},s.a.createElement(p[\"a\"],{checkedKeys:e.customMetricsSelectTree.checkedKeys,checkable:!0,onCheck:function(e){return N(e)},onExpand:function(e){return D(e)},expandedKeys:h,autoExpandParent:i,selectable:!1},A(k))))},O=Object(h[\"connect\"])((function(e){var t=e.customMetricsSelectTree,a=e.loading;return{customMetricsSelectTree:t,loading:a.effects[\"customMetricsSelectTree/queryTreeList\"]}}))(C),M=(a(\"+L6B\"),a(\"2/Rp\")),k=(a(\"/xke\"),a(\"TeRw\")),q=a(\"k1fw\"),S=(a(\"y8nQ\"),a(\"Vl3Y\")),j=(a(\"iQDF\"),a(\"+eQT\")),F=(a(\"OaEy\"),a(\"2fM7\")),I=a(\"wd/R\"),D=a.n(I),N=[\"lastWeekYield\",\"lastMonthYield\",\"lastThreeMonthsYield\",\"lastSixMonthsYield\",\"lastYearYield\",\"lastThreeYearsYield\",\"thisYearYield\",\"sinceFoundationYield\",\"sinceThisYearYield\",\"sinceFoundationYearYield\"],w=N,A=a(\"tkCU\"),Y=a.n(A),x=F[\"a\"].Option,R=j[\"a\"].RangePicker,V=function(e){var t=S[\"a\"].useForm(),a=Object(l[\"a\"])(t,1),c=a[0],o=Object(u[\"useState\"])(1),i=Object(l[\"a\"])(o,2),m=i[0],p=i[1],f=Object(u[\"useState\"])([]),y=Object(l[\"a\"])(f,2),b=y[0],g=y[1],h=Object(u[\"useState\"])([]),E=Object(l[\"a\"])(h,2),v=E[0],C=E[1],O=null,j=function(t){var a=e.dispatch,r=Object(T[\"cloneDeep\"])(t);t.timeArr&&(r.startDate=D()(t.timeArr[0]).format(\"YYYY-MM-DD\"),r.endDate=D()(t.timeArr[1]).format(\"YYYY-MM-DD\")),t.time&&(r.startDate=r.endDate=D()(t.time).format(\"YYYY-MM-DD\")),\"object\"!==typeof t.productIds?r.productIds=[t.productIds]:r.productIds=t.productIds.map((function(e){return e.value})),delete r.timeArr,delete r.time,a({type:\"queryForm/setStandardCodes\",standardCodes:r.standardCodes}),r.standardCodes=r.standardCodes&&r.standardCodes.map((function(e){return e.value})),a({type:\"queryForm/setFormData\",formData:r}),a({type:\"queryForm/setCheckedArrUseExportAndQueryTableList\",checkedArrUseExportAndQueryTableList:e.customMetricsSelectTree.checkedKeys}),1===e.customMetricsTable.pageNumber?a({type:\"customMetricsTable/queryTableList\",payload:Object(q[\"a\"])(Object(q[\"a\"])({},r),{},{pageNum:1,pageSize:e.customMetricsTable.pageSize,targets:e.customMetricsSelectTree.checkedKeys}),callback:function(t){for(var r=e.customMetricsSelectTree.checkedOrgArr,n=[],l=function(e){if(!r[e].isLeafNode)return\"continue\";n.push({title:r[e].fullName||r[e].targetName,dataIndex:r[e].targetCode,width:200,align:\"center\",render:function(e){return e||\"--\"}}),w.find((function(t){return t===r[e].targetCode}))&&(c.getFieldValue(\"standardCodes\")||[]).forEach((function(t){var a=r[e].targetCode;a=a[0].toUpperCase()+a.slice(1),n.push({title:r[e].fullName&&\"\".concat(t.label).concat(r[e].fullName)||\"\".concat(t.label).concat(r[e].targetName),dataIndex:\"standard\".concat(a).concat(t.value),width:200,align:\"center\",render:function(e){return e||\"--\"}})}))},o=0;o<r.length;o++)l(o);a({type:\"customMetricsTable/saveColumns\",columns:n})}}):a({type:\"customMetricsTable/changePageNumber\",pageNumber:1}),a({type:\"customMetricsTable/queryTips\",payload:Object(q[\"a\"])(Object(q[\"a\"])({},r),{},{pageNum:1,pageSize:e.customMetricsTable.pageSize,targets:e.customMetricsSelectTree.checkedKeys}),callback:function(e){1008!==e.code&&k[\"default\"].error({message:e.message})}})},I=function(){var t=e.dispatch;c.resetFields(),p(1),t({type:\"customMetricsTable/saveTableList\",tableData:{}}),t({type:\"customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr\",checkedKeys:e.customMetricsSelectTree.initCheckedKeys,checkedOrgArr:e.customMetricsSelectTree.initCheckedOrgArr})},N=function(t){var a=e.dispatch;if(t){for(var r=e.queryForm.templateArr.find((function(e){return e.productTargetTemplateId===t})),n=[],l=e.customMetricsSelectTree.renderArr,o=function(e){l.forEach((function(t){t.targetCode===r.targets[e]&&n.push(t)}))},u=0;u<r.targets.length;u++)o(u);1===r.templateType&&c.setFieldsValue({frequency:r.frequency,timeArr:r.startDate&&r.endDate?[D()(r.startDate),D()(r.endDate)]:void 0,week:2===r.frequency?r.week:void 0,month:3===r.frequency?r.month:void 0,otherDay:1!==r.frequency?r.otherDay:void 0,standardCodes:r.standardCodes&&v.filter((function(e){return r.standardCodes.includes(e.standardCode)})).map((function(e){return{value:e.standardCode,label:e.standardName}}))}),2===r.templateType&&c.setFieldsValue({time:r.startDate?D()(r.startDate):void 0,standardCodes:r.standardCodes&&v.filter((function(e){return r.standardCodes.includes(e.standardCode)})).map((function(e){return{value:e.standardCode,label:e.standardName}}))}),a({type:\"customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr\",checkedOrgArr:n,checkedKeys:r.targets})}},A=function(t){var a=e.dispatch;clearTimeout(O),O=setTimeout((function(){a({type:\"queryForm/queryProductist\",payload:{productName:t},callback:function(e){g(e||[])}})}),500)},V=function(e){c.setFieldsValue({productIds:[]}),c.setFieldsValue({productTargetTemplateId:void 0}),p(e)};return Object(u[\"useEffect\"])((function(){var t=e.dispatch;t({type:\"queryForm/queryTempList\",payload:{templateType:m,pageNum:0}})}),[m]),Object(u[\"useEffect\"])((function(){var t=e.dispatch;t({type:\"queryForm/queryStandardArr\",callback:function(e){if(C(e||[]),null!==e&&void 0!==e&&e.length){var t=e.find((function(e){return\"\\u6caa\\u6df1300\"===e.standardName}));if(t){var a=[{value:t.standardCode,label:t.standardName}];c.setFieldsValue({standardCodes:a})}}}})}),[]),Object(u[\"useEffect\"])((function(){var t=e.dispatch;return t({type:\"queryForm/queryProductist\",callback:function(e){g(e||[])}}),function(){clearTimeout(O)}}),[]),s.a.createElement(S[\"a\"],{form:c,onFinish:j,ref:e.forwardRef},s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{label:\"\\u6307\\u6807\\u7c7b\\u578b\",name:\"templateType\",rules:[{required:!0}],initialValue:1},s.a.createElement(F[\"a\"],{onChange:function(e){return V(e)},allowClear:!0},s.a.createElement(x,{value:1},\"\\u5355\\u4ea7\\u54c1\"),s.a.createElement(x,{value:2},\"\\u591a\\u4ea7\\u54c1\")))),s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{label:\"\\u9009\\u62e9\\u6a21\\u677f\",name:\"productTargetTemplateId\"},s.a.createElement(F[\"a\"],{allowClear:!0,placeholder:\"\\u82e5\\u5df2\\u4fdd\\u5b58\\u8bf7\\u9009\\u62e9\",onChange:N,loading:e.loading2,disabled:e.loading2},e.queryForm.templateArr.map((function(e){return s.a.createElement(x,{value:e.productTargetTemplateId,key:e.productTargetTemplateId},e.templateName)})))))),s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.templateType!==t.templateType}},(function(t){var a=t.getFieldValue;return 1===a(\"templateType\")?s.a.createElement(S[\"a\"].Item,{label:\"\\u4ea7\\u54c1\\u540d\\u79f0\",name:\"productIds\",rules:[{required:!0}]},s.a.createElement(F[\"a\"],{showSearch:!0,allowClear:!0,placeholder:\"\\u8bf7\\u8f93\\u5165\\u5168\\u79f0\\u6216\\u7b80\\u79f0\",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:A,notFoundContent:e.loading?s.a.createElement(d[\"a\"],{size:\"small\"}):null},b.map((function(e){return s.a.createElement(x,{value:e.productId,key:e.productId},e.productName)})))):2===a(\"templateType\")?s.a.createElement(S[\"a\"].Item,{label:\"\\u4ea7\\u54c1\\u540d\\u79f0\",name:\"productIds\",rules:[{required:!0}]},s.a.createElement(F[\"a\"],{labelInValue:!0,placeholder:\"\\u8bf7\\u8f93\\u5165\\u5168\\u79f0\\u6216\\u7b80\\u79f0\",mode:\"multiple\",showSearch:!0,allowClear:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:A,notFoundContent:e.loading?s.a.createElement(d[\"a\"],{size:\"small\"}):null},b.map((function(e){return s.a.createElement(x,{value:e.productId,key:e.productId},e.productName)})))):null}))),s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.templateType!==t.templateType}},(function(e){e.getFieldValue;return s.a.createElement(S[\"a\"].Item,{name:\"timeArr\",label:\"\\u65f6\\u95f4\\u8303\\u56f4\"},s.a.createElement(R,{allowClear:!0,style:{width:\"100%\"}}))})))),s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.templateType!==t.templateType}},(function(e){e.getFieldValue;return s.a.createElement(s.a.Fragment,null,s.a.createElement(n[\"a\"],{span:12},s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(n[\"a\"],{span:14},s.a.createElement(S[\"a\"].Item,{label:\"\\u6570\\u636e\\u9891\\u7387\",name:\"frequency\",rules:[{required:!0}],initialValue:1},s.a.createElement(F[\"a\"],{allowClear:!0},s.a.createElement(x,{value:1},\"\\u65e5\\u9891\"),s.a.createElement(x,{value:2},\"\\u5468\\u9891\"),s.a.createElement(x,{value:3},\"\\u6708\\u9891\")))),s.a.createElement(n[\"a\"],{span:10},s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.frequency!==t.frequency}},(function(e){var t=e.getFieldValue;return 2===t(\"frequency\")?s.a.createElement(S[\"a\"].Item,{name:\"week\",rules:[{required:!0,message:\"\\u8be5\\u9879\\u5fc5\\u586b\"}]},s.a.createElement(F[\"a\"],{allowClear:!0},s.a.createElement(x,{value:1},\"\\u5468\\u4e00\"),s.a.createElement(x,{value:2},\"\\u5468\\u4e8c\"),s.a.createElement(x,{value:3},\"\\u5468\\u4e09\"),s.a.createElement(x,{value:4},\"\\u5468\\u56db\"),s.a.createElement(x,{value:5},\"\\u5468\\u4e94\"))):3===t(\"frequency\")?s.a.createElement(S[\"a\"].Item,{name:\"month\",rules:[{required:!0,message:\"\\u8be5\\u9879\\u5fc5\\u586b\"}]},s.a.createElement(F[\"a\"],{allowClear:!0},Array(31).fill(1).map((function(e,t){return e+t})).map((function(e){return s.a.createElement(x,{value:e},e)})))):null}))))),s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.frequency!==t.frequency}},(function(e){var t=e.getFieldValue;return 1!==t(\"frequency\")?s.a.createElement(S[\"a\"].Item,{name:\"otherDay\",label:\"\\u5176\\u4ed6\\u65e5\\u671f\",extra:\"\\u591a\\u9009\"},s.a.createElement(F[\"a\"],{allowClear:!0,mode:\"multiple\",placeholder:\"\\u8bf7\\u9009\\u62e9\"},s.a.createElement(x,{value:1},\"\\u5206\\u7ea2\\u65e5\"),s.a.createElement(x,{value:2},\"\\u4e1a\\u7ee9\\u8ba1\\u63d0\\u65e5\"),s.a.createElement(x,{value:3},\"\\u5f00\\u653e\\u65e5\"))):s.a.createElement(S[\"a\"].Item,{name:\"standardCodes\",label:\"\\u6bd4\\u8f83\\u57fa\\u51c6\"},s.a.createElement(F[\"a\"],{labelInValue:!0,allowClear:!0,mode:\"multiple\",placeholder:\"\\u8bf7\\u9009\\u62e9\"},v.map((function(e){return s.a.createElement(x,{value:e.standardCode},e.standardName)}))))}))))}))),s.a.createElement(S[\"a\"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e.templateType!==t.templateType||e.frequency!==t.frequency}},(function(e){var t=e.getFieldValue;return 1!==t(\"frequency\")?s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(n[\"a\"],{span:12},s.a.createElement(S[\"a\"].Item,{name:\"standardCodes\",label:\"\\u6bd4\\u8f83\\u57fa\\u51c6\"},s.a.createElement(F[\"a\"],{allowClear:!0,mode:\"multiple\",placeholder:\"\\u8bf7\\u9009\\u62e9\",labelInValue:!0},v.map((function(e){return s.a.createElement(x,{value:e.standardCode},e.standardName)})))))):null})),s.a.createElement(\"div\",{className:Y.a.btnG},s.a.createElement(M[\"a\"],{htmlType:\"button\",className:Y.a.btnGAndRest,onClick:I},\"\\u6e05\\u7a7a\\u6570\\u636e\"),s.a.createElement(M[\"a\"],{htmlType:\"submit\",type:\"primary\",disabled:!e.customMetricsSelectTree.checkedKeys.length},\"\\u751f\\u6210\\u6570\\u636e\")))},K=Object(h[\"connect\"])((function(e){var t=e.customMetricsSelectTree,a=e.loading,r=e.queryForm,n=e.customMetricsTable;return{customMetricsSelectTree:t,queryForm:r,customMetricsTable:n,loading:a.effects[\"queryForm/queryProductist\"],loading2:a.effects[\"queryForm/queryTempList\"]}}))(V),L=(a(\"2qtc\"),a(\"kLXV\")),U=(a(\"miYZ\"),a(\"tsqr\")),z=a(\"tQHx\"),P=function(e){var t=S[\"a\"].useForm(),a=Object(l[\"a\"])(t,1),r=a[0];return s.a.createElement(s.a.Fragment,null,s.a.createElement(S[\"a\"],{ref:e.forwardRef,form:r,layout:\"vertical\"},s.a.createElement(S[\"a\"].Item,{label:\"\\u6a21\\u677f\\u540d\\u79f0\",name:\"templateName\",rules:[{required:!0}],initialValue:e.templateName},s.a.createElement(m[\"a\"],null)),s.a.createElement(S[\"a\"].Item,null,s.a.createElement(\"span\",null,\"\\u5907\\u6ce8\\uff1a\"),s.a.createElement(\"p\",null,\"1\\u3001\\u672c\\u6b21\\u6a21\\u677f\\u4f1a\\u4fdd\\u5b58\\u6240\\u9009\\u6307\\u6807\\u3001\\u51c0\\u503c\\u9891\\u7387\\uff1b\"),s.a.createElement(\"p\",null,\"2\\u3001\\u82e5\\u65f6\\u95f4\\u8303\\u56f4\\u548c\\u4ea7\\u54c1\\u540d\\u79f0\\u4e5f\\u9700\\u8981\\u4fdd\\u5b58\\uff0c\\u53ef\\u4ee5\\u76f4\\u63a5\\u70b9\\u51fb\\u786e\\u8ba4\\uff0c\\u82e5\\u65e0\\u9700\\u50a8\\u5b58\\uff0c\\u53ef\\u4ee5\\u5220\\u9664\\u8be5\\u4fe1\\u606f\\u3002\"))))},Q=P,B=a(\"9+Zk\"),G=a.n(B),H=a(\"+n12\"),Z=function(e,t){k[\"default\"][e]({message:t})},J=function(e){var t=Object(H[\"o\"])(90100),a=t.authEdit,r=t.authExport,n=Object(u[\"useState\"])(!1),c=Object(l[\"a\"])(n,2),o=c[0],i=c[1],d=Object(u[\"useRef\"])(),m=Object(u[\"useState\"])(),p=Object(l[\"a\"])(m,2),f=(p[0],p[1],Object(u[\"useState\"])(\"\")),y=Object(l[\"a\"])(f,2),b=y[0],g=y[1],h=function(){var t=Object(T[\"cloneDeep\"])(e.formRef.current.getFieldsValue()),a=e.dispatch;d.current.validateFields().then((function(r){t.timeArr&&(t.startDate=D()(t.timeArr[0]).format(\"YYYY-MM-DD\"),t.endDate=D()(t.timeArr[1]).format(\"YYYY-MM-DD\")),t.time&&(t.startDate=t.endDate=D()(t.time).format(\"YYYY-MM-DD\")),delete t.productIds,delete t.timeArr,delete t.time,t.standardCodes=t.standardCodes&&t.standardCodes.map((function(e){return e.value})),a({type:\"customMetricsTable/saveTemplate\",payload:Object(q[\"a\"])(Object(q[\"a\"])(Object(q[\"a\"])({},t),r),{},{targets:e.customMetricsSelectTree.checkedKeys}),callback:function(e){1008===e.code?(Z(\"success\",\"\\u4fdd\\u5b58\\u6210\\u529f\"),i(!1),a({type:\"queryForm/queryTempList\",payload:{templateType:t.templateType,pageNum:0}})):Z(\"error\",e.message)}})})).catch((function(e){return console.log(e)}))},E=function(){var t=Object(T[\"cloneDeep\"])(e.formRef.current.getFieldsValue());void 0===t.productTargetTemplateId?U[\"default\"].error(\"\\u8bf7\\u5148\\u9009\\u62e9\\u6a21\\u677f\"):L[\"a\"].confirm({title:\"\\u662f\\u5426\\u5220\\u9664\\u8be5\\u6a21\\u677f\",onOk:function(){return new Promise((function(a,r){var n=e.dispatch;n({type:\"customMetricsTable/deleteTem\",payload:{productTargetTemplateId:t.productTargetTemplateId},callback:function(c){1008===c.code?(Z(\"success\",\"\\u5220\\u9664\\u6210\\u529f\"),e.formRef.current.setFieldsValue({productTargetTemplateId:void 0}),n({type:\"queryForm/queryTempList\",payload:{templateType:t.templateType,pageNum:0}}),a()):(Z(\"error\",c.message),r())}})}))}})},v=function(t,a,r){var n=e.dispatch,c=e.customMetricsTable,l=c.pageNumber,o=c.pageSize;l!==t.current&&n({type:\"customMetricsTable/changePageNumber\",pageNumber:t.current}),o!==t.pageSize&&n({type:\"customMetricsTable/changePageSize\",pageSize:t.pageSize})},C=function(){var t=Object(T[\"cloneDeep\"])(e.formRef.current.getFieldsValue()),a=e.queryForm.templateArr.find((function(e){return e.productTargetTemplateId===t.productTargetTemplateId}));i(!0),g(null===a||void 0===a?void 0:a.templateName)},O=function(){var t=e.dispatch,a=e.queryForm.formData,r=e.queryForm.checkedArrUseExportAndQueryTableList;Object.keys(a).length&&r.length&&t({type:\"customMetricsTable/exportTemplate\",payload:Object(q[\"a\"])(Object(q[\"a\"])({},a),{},{targets:r}),callback:function(e){var t=e.headers[\"content-disposition\"].split(\";\")[1].split(\"filename*=utf-8''\")[1];t=decodeURIComponent(t);var a=e.data,r=document.createElement(\"a\"),n=window.URL.createObjectURL(a);r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},errorCallback:function(e){Z(\"error\",e)}})};Object(u[\"useEffect\"])((function(){var t=e.queryForm.formData;if(t.productIds){var a=e.dispatch;a({type:\"customMetricsTable/queryTableList\",payload:Object(q[\"a\"])(Object(q[\"a\"])({},t),{},{pageNum:e.customMetricsTable.pageNumber,pageSize:e.customMetricsTable.pageSize,targets:e.queryForm.checkedArrUseExportAndQueryTableList}),callback:function(){for(var r=e.customMetricsSelectTree.checkedOrgArr,n=[],c=function(a){if(!r[a].isLeafNode)return\"continue\";n.push({title:r[a].fullName||r[a].targetName,dataIndex:r[a].targetCode,width:200,align:\"center\",render:function(e){return e||\"--\"}}),t.standardCodes&&t.standardCodes.length&&w.find((function(e){return e===r[a].targetCode}))&&(console.log(e.queryForm.standardCodes,\"\\u5904\\u7406\\u6bd4\\u8f83\\u57fa\\u51c6\\u5217\"),(e.queryForm.standardCodes||[]).forEach((function(e){var t=r[a].targetCode;t=t[0].toUpperCase()+t.slice(1),n.push({title:r[a].fullName&&\"\".concat(e.label).concat(r[a].fullName)||\"\".concat(e.label).concat(r[a].targetName),dataIndex:\"standard\".concat(t).concat(e.value),width:200,align:\"center\",render:function(e){return e||\"--\"}})})))},l=0;l<r.length;l++)c(l);a({type:\"customMetricsTable/saveColumns\",columns:n})}})}}),[e.customMetricsTable.pageNumber,e.customMetricsTable.pageSize]);var k=function(){var t=Object(T[\"cloneDeep\"])(e.customMetricsTable.tableData.list)||[];return t.forEach((function(e){e.standards&&e.standards.forEach((function(t){for(var a in t)e[a+t.standardCode]=t[a]}))})),t};return s.a.createElement(u[\"Fragment\"],null,s.a.createElement(L[\"a\"],{visible:o,title:\"\\u4fdd\\u5b58\\u6210\\u6307\\u6807\\u6a21\\u677f\",onOk:h,onCancel:function(e){return i(!1)},destroyOnClose:!0,confirmLoading:e.loading2},s.a.createElement(Q,{forwardRef:d,templateName:b})),s.a.createElement(\"div\",{className:G.a.box},s.a.createElement(\"div\",{style:{display:a?\"unset\":\"none\"}},s.a.createElement(M[\"a\"],{type:\"primary\",onClick:function(e){return C()},disabled:!e.customMetricsSelectTree.checkedKeys.length},\"\\u4fdd\\u5b58\\u6a21\\u677f\"),s.a.createElement(M[\"a\"],{type:\"primary\",className:G.a.btn,onClick:E,loading:e.loading3},\"\\u5220\\u9664\\u6a21\\u677f\")),s.a.createElement(\"div\",{style:{display:r?\"unset\":\"none\"}},s.a.createElement(M[\"a\"],{type:\"primary\",onClick:O,disabled:!(e.customMetricsTable.tableData.list||[]).length,loading:Boolean(e.loading4)},\"\\u5bfc\\u51fa\"))),s.a.createElement(\"div\",null,s.a.createElement(z[\"a\"],{loading:e.loading,columns:(e.customMetricsTable.tableData.list||[]).length?e.customMetricsTable.columns:[],dataSource:e.customMetricsTable.tableData.list&&e.customMetricsTable.tableData.list.length&&k()||[],total:e.customMetricsTable.tableData.total||0,pageNum:e.customMetricsTable.pageNumber,scroll:{x:\"100%\",y:500,scrollToFirstRowOnChange:!0},sticky:!0,onChange:function(e,t,a){return v(e,t,a)},rowKey:\"uniqueKey\",rowSelection:null,bordered:!0})))},W=Object(h[\"connect\"])((function(e){var t=e.customMetricsSelectTree,a=e.customMetricsTable,r=e.queryForm,n=e.loading;return{customMetricsSelectTree:t,customMetricsTable:a,queryForm:r,loading:n.effects[\"customMetricsTable/queryTableList\"],loading2:n.effects[\"customMetricsTable/saveTemplate\"],loading3:n.effects[\"customMetricsTable/deleteTem\"],loading4:n.effects[\"customMetricsTable/exportTemplate\"]}}))(J),X=o[\"a\"].TabPane,$=function(e){var t=Object(u[\"useState\"])([]),a=Object(l[\"a\"])(t,2),d=(a[0],a[1],Object(u[\"useRef\"])());return Object(u[\"useEffect\"])((function(){return function(){var t=e.dispatch;t({type:\"queryForm/clearData\"}),t({type:\"customMetricsTable/clearData\"}),t({type:\"customMetricsSelectTree/clearData\"})}}),[]),s.a.createElement(i[\"a\"],{title:\"\\u6570\\u636e\\u6307\\u6807\\u62a5\\u8868\"},s.a.createElement(r[\"a\"],{gutter:24},s.a.createElement(n[\"a\"],{span:6,style:{display:\"flex\"}},s.a.createElement(c[\"a\"],{style:{width:\"100%\"}},s.a.createElement(o[\"a\"],{type:\"card\"},s.a.createElement(X,{tab:\"\\u5f85\\u9009\\u6307\\u6807\",key:\"1\"},s.a.createElement(O,null))))),s.a.createElement(n[\"a\"],{span:18,style:{display:\"flex\"}},s.a.createElement(c[\"a\"],{style:{width:\"100%\"}},s.a.createElement(K,{forwardRef:d}),s.a.createElement(W,{formRef:d})))))};t[\"default\"]=Object(h[\"connect\"])()($)}}]);","name":"p__customMetrics__index.async.js?v=1647342498084","map":{"version":3,"sources":["p__customMetrics__index.async.js?v=1647342498084"],"names":["window","push","9+Zk","module","exports","__webpack_require__","box","btn","tkCU","btnG","btnGAndRest","wrHR","__webpack_exports__","r","row","col","card","slicedToArray","tabs","react","react_default","n","es","spin","input","tree","toConsumableArray","renderTree","filterArr","arr","arguments","length","undefined","forEach","item","children","newArr","filter","parentCode","apply","Object","pushChildren","_item$children","item2","targetCode","getParentKey","key","parentKey","i","node","some","dva","lodash","TreeNode","Search","SelectTree_SlectTree","props","_useState","_useState2","searchValue","changeSearchValue","_useState3","_useState4","autoExpandParent","changeAutoExpandParent","_useState5","_useState6","expandedKeys","onExpand","_useState7","_useState8","gData","setGData","_useState9","_useState10","renderArr","setRenderArr","onExpandFn","_onCheck","checkedKeys","checkedOrgArr","_loop","console","log","dispatch","type","changeSearchValueFn","val","map","targetName","indexOf","self","loop","data","index","beforeStr","substr","afterStr","title","a","createElement","style","color","disabled","Boolean","required","minWidth","callback","res","list","enable","_loop2","initCheckedKeys","initCheckedOrgArr","spinning","loading","marginBottom","placeholder","onChange","e","target","value","fontSize","maxHeight","overflow","customMetricsSelectTree","checkable","onCheck","selectable","SelectTree","_ref","effects","es_button","notification","objectSpread2","es_form","date_picker","es_select","moment","moment_default","needDisposeColumns","customMetrics_needDisposeColumns","stylesmodules","stylesmodules_default","Option","RangePicker","QueryForm_QueryForm","_Form$useForm","useForm","_Form$useForm2","form","templateTypeVal","changeTemplateTypeVal","templateNameOrgArr","setTemplateNameOrgArr","standardArr","setStandardArr","time","onFinish","resultVal","timeArr","startDate","format","endDate","productIds","standardCodes","formData","checkedArrUseExportAndQueryTableList","customMetricsTable","pageNumber","payload","pageNum","pageSize","targets","columns","isLeafNode","fullName","dataIndex","width","align","render","find","getFieldValue","toUpperCase","slice","concat","label","code","error","message","onReset","resetFields","tableData","chooseTemplate","productTargetTemplateId","nowData","queryForm","templateArr","templateType","setFieldsValue","frequency","week","month","otherDay","includes","standardCode","standardName","handleSearch","productName","clearTimeout","setTimeout","templateTypeChange","newStandardCodes","ref","forwardRef","gutter","span","Item","name","rules","initialValue","allowClear","loading2","templateName","noStyle","shouldUpdate","prevValues","currentValues","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","size","productId","labelInValue","mode","_ref2","_ref3","Fragment","_ref4","Array","fill","_ref5","extra","_ref6","className","htmlType","onClick","components_QueryForm","_ref7","modal","es_message","MXTable","SaveTem_SaveTem","layout","TableContent_SaveTem","TableContent_stylesmodules","TableContent_stylesmodules_default","utils","TableContent_openNotificationWithIcon","TableContent_TableContent","_getPermission","authEdit","authExport","showModal","changeShowModal","temFormRef","setTemplateName","saveTem","formRef","current","getFieldsValue","validateFields","then","catch","err","deleteTempalte","confirm","onOk","Promise","resolve","reject","_tableChange","p","s","_props$customMetricsT","openModal","tableExport","keys","response","fileName","headers","split","decodeURIComponent","blob","downloadElement","document","href","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","errorCallback","errMessage","newDataSource","standards","visible","onCancel","destroyOnClose","confirmLoading","display","loading3","loading4","dataSource","total","scroll","x","y","scrollToFirstRowOnChange","sticky","rowKey","rowSelection","bordered","components_TableContent","TabPane","customMetrics_CustomMetrics","tab"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[18],{\n\n/***/ \"9+Zk\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"antd-pro-pages-custom-metrics-components-table-content-styles-box\",\"btn\":\"antd-pro-pages-custom-metrics-components-table-content-styles-btn\"};\n\n/***/ }),\n\n/***/ \"tkCU\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnG\":\"antd-pro-pages-custom-metrics-components-query-form-styles-btnG\",\"btnGAndRest\":\"antd-pro-pages-custom-metrics-components-query-form-styles-btnGAndRest\"};\n\n/***/ }),\n\n/***/ \"wrHR\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/row/style/index.js\nvar style = __webpack_require__(\"14J3\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/row/index.js\nvar row = __webpack_require__(\"BMrR\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/col/style/index.js\nvar col_style = __webpack_require__(\"jCWc\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/col/index.js\nvar col = __webpack_require__(\"kPKH\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/card/style/index.js\nvar card_style = __webpack_require__(\"IzEo\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/card/index.js + 2 modules\nvar card = __webpack_require__(\"bx4M\");\n\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(\"tJVT\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tabs/style/index.js\nvar tabs_style = __webpack_require__(\"Znn+\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tabs/index.js + 40 modules\nvar tabs = __webpack_require__(\"ZTPi\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/pro-layout/es/index.js + 86 modules\nvar es = __webpack_require__(\"Hx5s\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/spin/style/index.js\nvar spin_style = __webpack_require__(\"T2oS\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js\nvar spin = __webpack_require__(\"W9HT\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/input/style/index.js\nvar input_style = __webpack_require__(\"5NDa\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 5 modules\nvar input = __webpack_require__(\"5rEg\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tree/style/index.js\nvar tree_style = __webpack_require__(\"ozfa\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tree/index.js + 8 modules\nvar tree = __webpack_require__(\"MJZm\");\n\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(\"oBTY\");\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/components/SelectTree/SelectTreeUtils.js\n\nfunction renderTree() {\n  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var filterArr;\n  arr.forEach(function (item) {\n    return item.children = [];\n  });\n  var newArr = [];\n  filterArr = arr.filter(function (item) {\n    return item.parentCode !== null;\n  });\n  newArr.push.apply(newArr, Object(toConsumableArray[\"a\" /* default */])(arr.filter(function (item) {\n    return item.parentCode === null;\n  })));\n  pushChildren(newArr, filterArr);\n  return newArr;\n}\n\nfunction pushChildren(newArr, filterArr) {\n  if (filterArr.length) {\n    newArr.forEach(function (item) {\n      var _item$children;\n\n      (_item$children = item.children).push.apply(_item$children, Object(toConsumableArray[\"a\" /* default */])(filterArr.filter(function (item2) {\n        return item2.parentCode === item.targetCode;\n      })));\n\n      filterArr = filterArr.filter(function (item2) {\n        return item2.parentCode !== item.targetCode;\n      });\n      pushChildren(item.children, filterArr);\n    });\n  }\n}\n\nvar getParentKey = function getParentKey(key, tree) {\n  var parentKey;\n\n  for (var i = 0; i < tree.length; i++) {\n    var node = tree[i];\n\n    if (node.children) {\n      if (node.children.some(function (item) {\n        return item.targetCode === key;\n      })) {\n        parentKey = node.targetCode;\n      } else if (getParentKey(key, node.children)) {\n        parentKey = getParentKey(key, node.children);\n      }\n    }\n  }\n\n  return parentKey;\n};\n// EXTERNAL MODULE: ./node_modules/dva/index.js\nvar dva = __webpack_require__(\"MuoO\");\n\n// EXTERNAL MODULE: ./node_modules/lodash/lodash.js\nvar lodash = __webpack_require__(\"LvDl\");\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/components/SelectTree/index.tsx\n\n\n\n\n\n\n\n\n\n\n\nvar TreeNode = tree[\"a\" /* default */].TreeNode;\nvar Search = input[\"a\" /* default */].Search;\n\nvar SelectTree_SlectTree = function SlectTree(props) {\n  var _useState = Object(react[\"useState\"])(''),\n      _useState2 = Object(slicedToArray[\"a\" /* default */])(_useState, 2),\n      searchValue = _useState2[0],\n      changeSearchValue = _useState2[1];\n\n  var _useState3 = Object(react[\"useState\"])(true),\n      _useState4 = Object(slicedToArray[\"a\" /* default */])(_useState3, 2),\n      autoExpandParent = _useState4[0],\n      changeAutoExpandParent = _useState4[1];\n\n  var _useState5 = Object(react[\"useState\"])([]),\n      _useState6 = Object(slicedToArray[\"a\" /* default */])(_useState5, 2),\n      expandedKeys = _useState6[0],\n      onExpand = _useState6[1];\n\n  var _useState7 = Object(react[\"useState\"])([]),\n      _useState8 = Object(slicedToArray[\"a\" /* default */])(_useState7, 2),\n      gData = _useState8[0],\n      setGData = _useState8[1];\n\n  var _useState9 = Object(react[\"useState\"])([]),\n      _useState10 = Object(slicedToArray[\"a\" /* default */])(_useState9, 2),\n      renderArr = _useState10[0],\n      setRenderArr = _useState10[1];\n\n  var onExpandFn = function onExpandFn(expandedKeys) {\n    onExpand(expandedKeys);\n    changeAutoExpandParent(false);\n  };\n\n  var _onCheck = function onCheck(checkedKeys) {\n    var checkedOrgArr = [];\n\n    var _loop = function _loop(i) {\n      renderArr.forEach(function (item) {\n        if (item.targetCode === checkedKeys[i]) {\n          checkedOrgArr.push(item);\n        }\n      });\n    };\n\n    for (var i = 0; i < checkedKeys.length; i++) {\n      _loop(i);\n    }\n\n    console.log(checkedKeys, 'checkedKeys', checkedOrgArr); // 查询对应的\n\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n      checkedKeys: checkedKeys,\n      checkedOrgArr: checkedOrgArr\n    });\n  };\n\n  var changeSearchValueFn = function changeSearchValueFn(val) {\n    var expandedKeys = renderArr.map(function (item) {\n      if (item.targetName.indexOf(val) > -1) {\n        return getParentKey(item.targetCode, gData);\n      }\n\n      return null;\n    }).filter(function (item, i, self) {\n      return item && self.indexOf(item) === i;\n    });\n    changeSearchValue(val);\n    onExpand(expandedKeys);\n    changeAutoExpandParent(true);\n  };\n\n  var loop = function loop(data) {\n    return data.map(function (item) {\n      var index = item.targetName.indexOf(searchValue);\n      var beforeStr = item.targetName.substr(0, index);\n      var afterStr = item.targetName.substr(index + searchValue.length);\n      var title = index > -1 ? /*#__PURE__*/react_default.a.createElement(\"span\", null, beforeStr, /*#__PURE__*/react_default.a.createElement(\"span\", {\n        style: {\n          color: '#f50'\n        }\n      }, searchValue), afterStr) : /*#__PURE__*/react_default.a.createElement(\"span\", null, item.targetName);\n\n      if (item.children.length) {\n        return /*#__PURE__*/react_default.a.createElement(TreeNode, {\n          key: item.targetCode,\n          title: title\n        }, loop(item.children));\n      }\n\n      return /*#__PURE__*/react_default.a.createElement(TreeNode, {\n        key: item.targetCode,\n        title: title,\n        disabled: Boolean(item.required),\n        style: {\n          minWidth: 300\n        }\n      });\n    });\n  };\n\n  Object(react[\"useEffect\"])(function () {\n    // 请求树结构\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'customMetricsSelectTree/queryTreeList',\n      callback: function callback(res) {\n        var list = res.data || [];\n        console.log(renderTree(list));\n        setGData(renderTree(list));\n        var checkedOrgArr = [];\n        var checkedKeys = list.filter(function (item) {\n          return item.enable;\n        }).map(function (item) {\n          return item.targetCode;\n        });\n\n        var _loop2 = function _loop2(i) {\n          list.forEach(function (item) {\n            if (item.targetCode === checkedKeys[i]) {\n              checkedOrgArr.push(item);\n            }\n          });\n        };\n\n        for (var i = 0; i < checkedKeys.length; i++) {\n          _loop2(i);\n        }\n\n        setRenderArr(list);\n        onExpand(list.map(function (item) {\n          return item.targetCode;\n        }));\n        dispatch({\n          type: 'customMetricsSelectTree/saveRenderArr',\n          renderArr: list\n        });\n        dispatch({\n          type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n          checkedKeys: checkedKeys,\n          checkedOrgArr: checkedOrgArr\n        }); // 保存初始选中，作用于清空数据\n\n        dispatch({\n          type: 'customMetricsSelectTree/saveInitCheckKeysAndCheckedOrgArr',\n          initCheckedKeys: Object(lodash[\"cloneDeep\"])(checkedKeys),\n          initCheckedOrgArr: Object(lodash[\"cloneDeep\"])(checkedOrgArr)\n        });\n      }\n    });\n  }, []);\n  return /*#__PURE__*/react_default.a.createElement(spin[\"a\" /* default */], {\n    spinning: Boolean(props.loading)\n  }, /*#__PURE__*/react_default.a.createElement(Search, {\n    style: {\n      marginBottom: 8\n    },\n    placeholder: \"\\u8BF7\\u8F93\\u5165\",\n    onChange: function onChange(e) {\n      changeSearchValueFn(e.target.value);\n    }\n  }), /*#__PURE__*/react_default.a.createElement(\"span\", {\n    style: {\n      fontSize: 12,\n      color: '#333'\n    }\n  }, \"\\u6CE8\\uFF1A\\u4FEE\\u6539\\u6307\\u6807\\u540E\\uFF0C\\u70B9\\u51FB\\u9875\\u9762\\u53F3\\u4FA7\\u201D\\u751F\\u6210\\u6570\\u636E\\u201C\\u624D\\u4F1A\\u751F\\u6548\"), /*#__PURE__*/react_default.a.createElement(\"div\", {\n    style: {\n      maxHeight: 552,\n      overflow: 'auto'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(tree[\"a\" /* default */], {\n    checkedKeys: props.customMetricsSelectTree.checkedKeys,\n    checkable: true,\n    onCheck: function onCheck(e) {\n      return _onCheck(e);\n    },\n    onExpand: function onExpand(e) {\n      return onExpandFn(e);\n    },\n    expandedKeys: expandedKeys,\n    autoExpandParent: autoExpandParent,\n    selectable: false\n  }, loop(gData))));\n};\n\n/* harmony default export */ var SelectTree = (Object(dva[\"connect\"])(function (_ref) {\n  var customMetricsSelectTree = _ref.customMetricsSelectTree,\n      loading = _ref.loading;\n  return {\n    customMetricsSelectTree: customMetricsSelectTree,\n    loading: loading.effects['customMetricsSelectTree/queryTreeList']\n  };\n})(SelectTree_SlectTree));\n// EXTERNAL MODULE: ./node_modules/antd/es/button/style/index.js\nvar button_style = __webpack_require__(\"+L6B\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js\nvar es_button = __webpack_require__(\"2/Rp\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/notification/style/index.js\nvar notification_style = __webpack_require__(\"/xke\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/notification/index.js + 1 modules\nvar notification = __webpack_require__(\"TeRw\");\n\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(\"k1fw\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/form/style/index.js\nvar form_style = __webpack_require__(\"y8nQ\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 14 modules\nvar es_form = __webpack_require__(\"Vl3Y\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/date-picker/style/index.js\nvar date_picker_style = __webpack_require__(\"iQDF\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/date-picker/index.js + 10 modules\nvar date_picker = __webpack_require__(\"+eQT\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/select/style/index.js\nvar select_style = __webpack_require__(\"OaEy\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/select/index.js + 7 modules\nvar es_select = __webpack_require__(\"2fM7\");\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(\"wd/R\");\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/needDisposeColumns.ts\nvar needDisposeColumns = ['lastWeekYield', 'lastMonthYield', 'lastThreeMonthsYield', 'lastSixMonthsYield', 'lastYearYield', 'lastThreeYearsYield', 'thisYearYield', 'sinceFoundationYield', 'sinceThisYearYield', 'sinceFoundationYearYield'];\n/* harmony default export */ var customMetrics_needDisposeColumns = (needDisposeColumns);\n// EXTERNAL MODULE: ./src/pages/customMetrics/components/QueryForm/styles.less?modules\nvar stylesmodules = __webpack_require__(\"tkCU\");\nvar stylesmodules_default = /*#__PURE__*/__webpack_require__.n(stylesmodules);\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/components/QueryForm/index.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Option = es_select[\"a\" /* default */].Option;\nvar RangePicker = date_picker[\"a\" /* default */].RangePicker;\n\nvar QueryForm_QueryForm = function QueryForm(props) {\n  var _Form$useForm = es_form[\"a\" /* default */].useForm(),\n      _Form$useForm2 = Object(slicedToArray[\"a\" /* default */])(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = Object(react[\"useState\"])(1),\n      _useState2 = Object(slicedToArray[\"a\" /* default */])(_useState, 2),\n      templateTypeVal = _useState2[0],\n      changeTemplateTypeVal = _useState2[1];\n\n  var _useState3 = Object(react[\"useState\"])([]),\n      _useState4 = Object(slicedToArray[\"a\" /* default */])(_useState3, 2),\n      templateNameOrgArr = _useState4[0],\n      setTemplateNameOrgArr = _useState4[1];\n\n  var _useState5 = Object(react[\"useState\"])([]),\n      _useState6 = Object(slicedToArray[\"a\" /* default */])(_useState5, 2),\n      standardArr = _useState6[0],\n      setStandardArr = _useState6[1];\n\n  var time = null;\n\n  var onFinish = function onFinish(val) {\n    var dispatch = props.dispatch;\n    var resultVal = Object(lodash[\"cloneDeep\"])(val);\n\n    if (val.timeArr) {\n      resultVal.startDate = moment_default()(val.timeArr[0]).format('YYYY-MM-DD');\n      resultVal.endDate = moment_default()(val.timeArr[1]).format('YYYY-MM-DD');\n    }\n\n    if (val.time) {\n      resultVal.startDate = resultVal.endDate = moment_default()(val.time).format('YYYY-MM-DD');\n    }\n\n    if (typeof val.productIds !== 'object') {\n      resultVal.productIds = [val.productIds];\n    } else {\n      resultVal.productIds = val.productIds.map(function (item) {\n        return item.value;\n      });\n    }\n\n    delete resultVal.timeArr;\n    delete resultVal.time; // 保存当前比较基准，处理分页请求时的问题\n\n    dispatch({\n      type: 'queryForm/setStandardCodes',\n      standardCodes: resultVal.standardCodes\n    });\n    resultVal.standardCodes = resultVal.standardCodes && resultVal.standardCodes.map(function (item) {\n      return item.value;\n    }); // 保存点击确定时的form表单数据\n\n    dispatch({\n      type: 'queryForm/setFormData',\n      formData: resultVal\n    }); // 保存当前选中的指标\n\n    dispatch({\n      type: 'queryForm/setCheckedArrUseExportAndQueryTableList',\n      checkedArrUseExportAndQueryTableList: props.customMetricsSelectTree.checkedKeys\n    }); // 获取选中的指标的源数据\n\n    if (props.customMetricsTable.pageNumber === 1) {\n      dispatch({\n        type: 'customMetricsTable/queryTableList',\n        payload: Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, resultVal), {}, {\n          pageNum: 1,\n          pageSize: props.customMetricsTable.pageSize,\n          targets: props.customMetricsSelectTree.checkedKeys\n        }),\n        callback: function callback(res) {\n          var checkedOrgArr = props.customMetricsSelectTree.checkedOrgArr;\n          var columns = [];\n\n          var _loop = function _loop(i) {\n            if (!checkedOrgArr[i].isLeafNode) {\n              return \"continue\";\n            }\n\n            columns.push({\n              title: checkedOrgArr[i].fullName || checkedOrgArr[i].targetName,\n              dataIndex: checkedOrgArr[i].targetCode,\n              width: 200,\n              align: 'center',\n              render: function render(e) {\n                return e || '--';\n              }\n            });\n\n            if (customMetrics_needDisposeColumns.find(function (item) {\n              return item === checkedOrgArr[i].targetCode;\n            })) {\n              // 添加相关比较基准列\n              // 遍历选中的比较\n              (form.getFieldValue('standardCodes') || []).forEach(function (item) {\n                var key = checkedOrgArr[i].targetCode;\n                key = key[0].toUpperCase() + key.slice(1);\n                columns.push({\n                  title: checkedOrgArr[i].fullName && \"\".concat(item.label).concat(checkedOrgArr[i].fullName) || \"\".concat(item.label).concat(checkedOrgArr[i].targetName),\n                  dataIndex: \"standard\".concat(key).concat(item.value),\n                  width: 200,\n                  align: 'center',\n                  render: function render(e) {\n                    return e || '--';\n                  }\n                });\n              });\n            }\n          };\n\n          for (var i = 0; i < checkedOrgArr.length; i++) {\n            var _ret = _loop(i);\n\n            if (_ret === \"continue\") continue;\n          }\n\n          dispatch({\n            type: 'customMetricsTable/saveColumns',\n            columns: columns\n          });\n        }\n      });\n    } else {\n      dispatch({\n        type: 'customMetricsTable/changePageNumber',\n        pageNumber: 1\n      });\n    } // 查询提示\n\n\n    dispatch({\n      type: 'customMetricsTable/queryTips',\n      payload: Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, resultVal), {}, {\n        pageNum: 1,\n        pageSize: props.customMetricsTable.pageSize,\n        targets: props.customMetricsSelectTree.checkedKeys\n      }),\n      callback: function callback(res) {\n        if (res.code !== 1008) {\n          notification[\"default\"].error({\n            message: res.message\n          });\n        } // console.log(res);\n\n      }\n    });\n  };\n\n  var onReset = function onReset() {\n    var dispatch = props.dispatch;\n    form.resetFields();\n    changeTemplateTypeVal(1);\n    dispatch({\n      type: 'customMetricsTable/saveTableList',\n      tableData: {}\n    });\n    dispatch({\n      type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n      checkedKeys: props.customMetricsSelectTree.initCheckedKeys,\n      checkedOrgArr: props.customMetricsSelectTree.initCheckedOrgArr\n    });\n  }; // 选择模板\n\n\n  var chooseTemplate = function chooseTemplate(productTargetTemplateId) {\n    var dispatch = props.dispatch;\n    if (!productTargetTemplateId) return;\n    var nowData = props.queryForm.templateArr.find(function (item) {\n      return item.productTargetTemplateId === productTargetTemplateId;\n    });\n    var checkedOrgArr = [];\n    var renderArr = props.customMetricsSelectTree.renderArr;\n\n    var _loop2 = function _loop2(i) {\n      renderArr.forEach(function (item) {\n        if (item.targetCode === nowData.targets[i]) {\n          checkedOrgArr.push(item);\n        }\n      });\n    };\n\n    for (var i = 0; i < nowData.targets.length; i++) {\n      _loop2(i);\n    }\n\n    if (nowData.templateType === 1) {\n      // 单产品 设置时间范围\n      form.setFieldsValue({\n        frequency: nowData.frequency,\n        timeArr: nowData.startDate && nowData.endDate ? [moment_default()(nowData.startDate), moment_default()(nowData.endDate)] : undefined,\n        week: nowData.frequency === 2 ? nowData.week : undefined,\n        month: nowData.frequency === 3 ? nowData.month : undefined,\n        otherDay: nowData.frequency !== 1 ? nowData.otherDay : undefined,\n        standardCodes: nowData.standardCodes && standardArr.filter(function (item) {\n          return nowData.standardCodes.includes(item.standardCode);\n        }).map(function (item2) {\n          return {\n            value: item2.standardCode,\n            label: item2.standardName\n          };\n        })\n      });\n    }\n\n    if (nowData.templateType === 2) {\n      form.setFieldsValue({\n        time: nowData.startDate ? moment_default()(nowData.startDate) : undefined,\n        standardCodes: nowData.standardCodes && standardArr.filter(function (item) {\n          return nowData.standardCodes.includes(item.standardCode);\n        }).map(function (item2) {\n          return {\n            value: item2.standardCode,\n            label: item2.standardName\n          };\n        })\n      });\n    }\n\n    dispatch({\n      type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n      checkedOrgArr: checkedOrgArr,\n      checkedKeys: nowData.targets\n    });\n  }; // 查询产品名称\n\n\n  var handleSearch = function handleSearch(productName) {\n    var dispatch = props.dispatch;\n    clearTimeout(time);\n    time = setTimeout(function () {\n      dispatch({\n        type: 'queryForm/queryProductist',\n        payload: {\n          productName: productName\n        },\n        callback: function callback(data) {\n          setTemplateNameOrgArr(data || []);\n        }\n      });\n    }, 500);\n  }; // 指标类型\n\n\n  var templateTypeChange = function templateTypeChange(e) {\n    form.setFieldsValue({\n      productIds: []\n    });\n    form.setFieldsValue({\n      productTargetTemplateId: undefined\n    });\n    changeTemplateTypeVal(e);\n  };\n\n  Object(react[\"useEffect\"])(function () {\n    // 请求模板\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'queryForm/queryTempList',\n      payload: {\n        templateType: templateTypeVal,\n        pageNum: 0\n      }\n    });\n  }, [templateTypeVal]); // 请求比较基准\n\n  Object(react[\"useEffect\"])(function () {\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'queryForm/queryStandardArr',\n      callback: function callback(data) {\n        setStandardArr(data || []);\n\n        if (data !== null && data !== void 0 && data.length) {\n          var item = data.find(function (i) {\n            return i.standardName === '沪深300';\n          });\n\n          if (item) {\n            var newStandardCodes = [{\n              value: item.standardCode,\n              label: item.standardName\n            }];\n            form.setFieldsValue({\n              standardCodes: newStandardCodes\n            });\n          }\n        }\n      }\n    });\n  }, []);\n  Object(react[\"useEffect\"])(function () {\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'queryForm/queryProductist',\n      // payload: { pageNum: 0 },\n      callback: function callback(data) {\n        setTemplateNameOrgArr(data || []);\n      }\n    });\n    return function () {\n      clearTimeout(time);\n    };\n  }, []);\n  return /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */], {\n    form: form,\n    onFinish: onFinish,\n    ref: props.forwardRef\n  }, /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n    gutter: 24\n  }, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 12\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    label: \"\\u6307\\u6807\\u7C7B\\u578B\",\n    name: \"templateType\",\n    rules: [{\n      required: true\n    }],\n    initialValue: 1\n  }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n    onChange: function onChange(e) {\n      return templateTypeChange(e);\n    },\n    allowClear: true\n  }, /*#__PURE__*/react_default.a.createElement(Option, {\n    value: 1\n  }, \"\\u5355\\u4EA7\\u54C1\"), /*#__PURE__*/react_default.a.createElement(Option, {\n    value: 2\n  }, \"\\u591A\\u4EA7\\u54C1\")))), /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 12\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    label: \"\\u9009\\u62E9\\u6A21\\u677F\",\n    name: 'productTargetTemplateId'\n  }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n    allowClear: true,\n    placeholder: '若已保存请选择',\n    onChange: chooseTemplate,\n    loading: props.loading2,\n    disabled: props.loading2\n  }, props.queryForm.templateArr.map(function (item) {\n    return /*#__PURE__*/react_default.a.createElement(Option, {\n      value: item.productTargetTemplateId,\n      key: item.productTargetTemplateId\n    }, item.templateName);\n  }))))), /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n    gutter: 24\n  }, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 12\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.templateType !== currentValues.templateType;\n    }\n  }, function (_ref) {\n    var getFieldValue = _ref.getFieldValue;\n    return getFieldValue('templateType') === 1 ?\n    /*#__PURE__*/\n    // true ? (\n    react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n      label: \"\\u4EA7\\u54C1\\u540D\\u79F0\",\n      name: \"productIds\",\n      rules: [{\n        required: true\n      }]\n    }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n      showSearch: true,\n      allowClear: true,\n      placeholder: '请输入全称或简称',\n      defaultActiveFirstOption: false,\n      showArrow: false,\n      filterOption: false,\n      onSearch: handleSearch,\n      notFoundContent: props.loading ? /*#__PURE__*/react_default.a.createElement(spin[\"a\" /* default */], {\n        size: \"small\"\n      }) : null\n    }, templateNameOrgArr.map(function (item) {\n      return /*#__PURE__*/react_default.a.createElement(Option, {\n        value: item.productId,\n        key: item.productId\n      }, item.productName);\n    }))) : getFieldValue('templateType') === 2 ? /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n      label: \"\\u4EA7\\u54C1\\u540D\\u79F0\",\n      name: \"productIds\",\n      rules: [{\n        required: true\n      }]\n    }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n      labelInValue: true,\n      placeholder: '请输入全称或简称',\n      mode: 'multiple',\n      showSearch: true,\n      allowClear: true,\n      defaultActiveFirstOption: false,\n      showArrow: false,\n      filterOption: false,\n      onSearch: handleSearch,\n      notFoundContent: props.loading ? /*#__PURE__*/react_default.a.createElement(spin[\"a\" /* default */], {\n        size: \"small\"\n      }) : null\n    }, templateNameOrgArr.map(function (item) {\n      return /*#__PURE__*/react_default.a.createElement(Option, {\n        value: item.productId,\n        key: item.productId\n      }, item.productName);\n    }))) : null;\n  })), /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 12\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.templateType !== currentValues.templateType;\n    }\n  }, function (_ref2) {\n    var getFieldValue = _ref2.getFieldValue;\n    return (// getFieldValue('templateType') === 1 ? (\n      true ? /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n        name: \"timeArr\",\n        label: \"\\u65F6\\u95F4\\u8303\\u56F4\"\n      }, /*#__PURE__*/react_default.a.createElement(RangePicker, {\n        allowClear: true,\n        style: {\n          width: '100%'\n        }\n      })) : undefined\n    );\n  }))), /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n    gutter: 24\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.templateType !== currentValues.templateType;\n    }\n  }, function (_ref3) {\n    var getFieldValue = _ref3.getFieldValue;\n    return (// getFieldValue('templateType') === 1 ? (\n      true ? /*#__PURE__*/react_default.a.createElement(react_default.a.Fragment, null, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n        span: 12\n      }, /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n        gutter: 24\n      }, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n        span: 14\n      }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n        label: \"\\u6570\\u636E\\u9891\\u7387\",\n        name: \"frequency\",\n        rules: [{\n          required: true\n        }],\n        initialValue: 1\n      }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n        allowClear: true\n      }, /*#__PURE__*/react_default.a.createElement(Option, {\n        value: 1\n      }, \"\\u65E5\\u9891\"), /*#__PURE__*/react_default.a.createElement(Option, {\n        value: 2\n      }, \"\\u5468\\u9891\"), /*#__PURE__*/react_default.a.createElement(Option, {\n        value: 3\n      }, \"\\u6708\\u9891\")))), /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n        span: 10\n      }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n        noStyle: true,\n        shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n          return prevValues.frequency !== currentValues.frequency;\n        }\n      }, function (_ref4) {\n        var getFieldValue = _ref4.getFieldValue;\n        return getFieldValue('frequency') === 2 ? /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n          name: \"week\",\n          rules: [{\n            required: true,\n            message: '该项必填'\n          }]\n        }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n          allowClear: true\n        }, /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 1\n        }, \"\\u5468\\u4E00\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 2\n        }, \"\\u5468\\u4E8C\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 3\n        }, \"\\u5468\\u4E09\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 4\n        }, \"\\u5468\\u56DB\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 5\n        }, \"\\u5468\\u4E94\"))) : getFieldValue('frequency') === 3 ? /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n          name: \"month\",\n          rules: [{\n            required: true,\n            message: '该项必填'\n          }]\n        }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n          allowClear: true\n        }, Array(31).fill(1).map(function (item, index) {\n          return item + index;\n        }).map(function (item2) {\n          return /*#__PURE__*/react_default.a.createElement(Option, {\n            value: item2\n          }, item2);\n        }))) : null;\n      })))), /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n        span: 12\n      }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n        noStyle: true,\n        shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n          return prevValues.frequency !== currentValues.frequency;\n        }\n      }, function (_ref5) {\n        var getFieldValue = _ref5.getFieldValue;\n        return getFieldValue('frequency') !== 1 ? /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n          name: \"otherDay\",\n          label: \"\\u5176\\u4ED6\\u65E5\\u671F\",\n          extra: \"\\u591A\\u9009\"\n        }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n          allowClear: true,\n          mode: 'multiple',\n          placeholder: \"\\u8BF7\\u9009\\u62E9\"\n        }, /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 1\n        }, \"\\u5206\\u7EA2\\u65E5\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 2\n        }, \"\\u4E1A\\u7EE9\\u8BA1\\u63D0\\u65E5\"), /*#__PURE__*/react_default.a.createElement(Option, {\n          value: 3\n        }, \"\\u5F00\\u653E\\u65E5\"))) : /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n          name: \"standardCodes\",\n          label: \"\\u6BD4\\u8F83\\u57FA\\u51C6\"\n        }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n          labelInValue: true,\n          allowClear: true,\n          mode: 'multiple',\n          placeholder: \"\\u8BF7\\u9009\\u62E9\"\n        }, standardArr.map(function (item) {\n          return /*#__PURE__*/react_default.a.createElement(Option, {\n            value: item.standardCode\n          }, item.standardName);\n        })));\n      }))) : undefined\n    );\n  })), /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.templateType !== currentValues.templateType || prevValues.frequency !== currentValues.frequency;\n    }\n  }, function (_ref6) {\n    var getFieldValue = _ref6.getFieldValue;\n    return (// getFieldValue('templateType') !== 1 ? (\n      false ? /*#__PURE__*/undefined : getFieldValue('frequency') !== 1 ? /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n        gutter: 24\n      }, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n        span: 12\n      }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n        name: \"standardCodes\",\n        label: \"\\u6BD4\\u8F83\\u57FA\\u51C6\"\n      }, /*#__PURE__*/react_default.a.createElement(es_select[\"a\" /* default */], {\n        allowClear: true,\n        mode: 'multiple',\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        labelInValue: true\n      }, standardArr.map(function (item) {\n        return /*#__PURE__*/react_default.a.createElement(Option, {\n          value: item.standardCode\n        }, item.standardName);\n      }))))) : null\n    );\n  }), /*#__PURE__*/react_default.a.createElement(\"div\", {\n    className: stylesmodules_default.a.btnG\n  }, /*#__PURE__*/react_default.a.createElement(es_button[\"a\" /* default */], {\n    htmlType: 'button',\n    className: stylesmodules_default.a.btnGAndRest,\n    onClick: onReset\n  }, \"\\u6E05\\u7A7A\\u6570\\u636E\"), /*#__PURE__*/react_default.a.createElement(es_button[\"a\" /* default */], {\n    htmlType: 'submit',\n    type: 'primary',\n    disabled: !props.customMetricsSelectTree.checkedKeys.length\n  }, \"\\u751F\\u6210\\u6570\\u636E\")));\n};\n\n/* harmony default export */ var components_QueryForm = (Object(dva[\"connect\"])(function (_ref7) {\n  var customMetricsSelectTree = _ref7.customMetricsSelectTree,\n      loading = _ref7.loading,\n      queryForm = _ref7.queryForm,\n      customMetricsTable = _ref7.customMetricsTable;\n  return {\n    customMetricsSelectTree: customMetricsSelectTree,\n    queryForm: queryForm,\n    customMetricsTable: customMetricsTable,\n    loading: loading.effects['queryForm/queryProductist'],\n    loading2: loading.effects['queryForm/queryTempList']\n  };\n})(QueryForm_QueryForm));\n// EXTERNAL MODULE: ./node_modules/antd/es/modal/style/index.js\nvar modal_style = __webpack_require__(\"2qtc\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/modal/index.js + 14 modules\nvar modal = __webpack_require__(\"kLXV\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/message/style/index.js\nvar message_style = __webpack_require__(\"miYZ\");\n\n// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules\nvar es_message = __webpack_require__(\"tsqr\");\n\n// EXTERNAL MODULE: ./src/pages/components/MXTable/index.jsx\nvar MXTable = __webpack_require__(\"tQHx\");\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/components/TableContent/SaveTem/index.tsx\n\n\n\n\n\n\n\nvar SaveTem_SaveTem = function SaveTem(props) {\n  var _Form$useForm = es_form[\"a\" /* default */].useForm(),\n      _Form$useForm2 = Object(slicedToArray[\"a\" /* default */])(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  return /*#__PURE__*/react_default.a.createElement(react_default.a.Fragment, null, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */], {\n    ref: props.forwardRef,\n    form: form,\n    layout: \"vertical\"\n  }, /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, {\n    label: \"\\u6A21\\u677F\\u540D\\u79F0\",\n    name: \"templateName\",\n    rules: [{\n      required: true\n    }],\n    initialValue: props.templateName\n  }, /*#__PURE__*/react_default.a.createElement(input[\"a\" /* default */], null)), /*#__PURE__*/react_default.a.createElement(es_form[\"a\" /* default */].Item, null, /*#__PURE__*/react_default.a.createElement(\"span\", null, \"\\u5907\\u6CE8\\uFF1A\"), /*#__PURE__*/react_default.a.createElement(\"p\", null, \"1\\u3001\\u672C\\u6B21\\u6A21\\u677F\\u4F1A\\u4FDD\\u5B58\\u6240\\u9009\\u6307\\u6807\\u3001\\u51C0\\u503C\\u9891\\u7387\\uFF1B\"), /*#__PURE__*/react_default.a.createElement(\"p\", null, \"2\\u3001\\u82E5\\u65F6\\u95F4\\u8303\\u56F4\\u548C\\u4EA7\\u54C1\\u540D\\u79F0\\u4E5F\\u9700\\u8981\\u4FDD\\u5B58\\uFF0C\\u53EF\\u4EE5\\u76F4\\u63A5\\u70B9\\u51FB\\u786E\\u8BA4\\uFF0C\\u82E5\\u65E0\\u9700\\u50A8\\u5B58\\uFF0C\\u53EF\\u4EE5\\u5220\\u9664\\u8BE5\\u4FE1\\u606F\\u3002\"))));\n};\n\n/* harmony default export */ var TableContent_SaveTem = (SaveTem_SaveTem);\n// EXTERNAL MODULE: ./src/pages/customMetrics/components/TableContent/styles.less?modules\nvar TableContent_stylesmodules = __webpack_require__(\"9+Zk\");\nvar TableContent_stylesmodules_default = /*#__PURE__*/__webpack_require__.n(TableContent_stylesmodules);\n\n// EXTERNAL MODULE: ./src/utils/utils.js\nvar utils = __webpack_require__(\"+n12\");\n\n// CONCATENATED MODULE: ./src/pages/customMetrics/components/TableContent/index.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TableContent_openNotificationWithIcon = function openNotificationWithIcon(type, message) {\n  notification[\"default\"][type]({\n    message: message\n  });\n};\n\nvar TableContent_TableContent = function TableContent(props) {\n  var _getPermission = Object(utils[\"o\" /* getPermission */])(90100),\n      authEdit = _getPermission.authEdit,\n      authExport = _getPermission.authExport;\n\n  var _useState = Object(react[\"useState\"])(false),\n      _useState2 = Object(slicedToArray[\"a\" /* default */])(_useState, 2),\n      showModal = _useState2[0],\n      changeShowModal = _useState2[1];\n\n  var temFormRef = Object(react[\"useRef\"])();\n\n  var _useState3 = Object(react[\"useState\"])(),\n      _useState4 = Object(slicedToArray[\"a\" /* default */])(_useState3, 2),\n      columns = _useState4[0],\n      setColumns = _useState4[1];\n\n  var _useState5 = Object(react[\"useState\"])(''),\n      _useState6 = Object(slicedToArray[\"a\" /* default */])(_useState5, 2),\n      templateName = _useState6[0],\n      setTemplateName = _useState6[1];\n\n  var saveTem = function saveTem() {\n    var formData = Object(lodash[\"cloneDeep\"])(props.formRef.current.getFieldsValue());\n    var dispatch = props.dispatch; // 如果选择模板则为更新模板\n\n    temFormRef.current.validateFields().then(function (data) {\n      if (formData.timeArr) {\n        formData.startDate = moment_default()(formData.timeArr[0]).format('YYYY-MM-DD');\n        formData.endDate = moment_default()(formData.timeArr[1]).format('YYYY-MM-DD');\n      }\n\n      if (formData.time) {\n        formData.startDate = formData.endDate = moment_default()(formData.time).format('YYYY-MM-DD');\n      }\n\n      delete formData.productIds;\n      delete formData.timeArr;\n      delete formData.time;\n      formData.standardCodes = formData.standardCodes && formData.standardCodes.map(function (item) {\n        return item.value;\n      });\n      dispatch({\n        type: 'customMetricsTable/saveTemplate',\n        payload: Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, formData), data), {}, {\n          targets: props.customMetricsSelectTree.checkedKeys\n        }),\n        callback: function callback(res) {\n          if (res.code === 1008) {\n            TableContent_openNotificationWithIcon('success', '保存成功');\n            changeShowModal(false); // 请求模板数据\n\n            dispatch({\n              type: 'queryForm/queryTempList',\n              payload: {\n                templateType: formData.templateType,\n                pageNum: 0\n              }\n            });\n          } else {\n            TableContent_openNotificationWithIcon('error', res.message);\n          }\n        }\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var deleteTempalte = function deleteTempalte() {\n    var formData = Object(lodash[\"cloneDeep\"])(props.formRef.current.getFieldsValue());\n\n    if (formData.productTargetTemplateId === undefined) {\n      es_message[\"default\"].error('请先选择模板');\n    } else {\n      modal[\"a\" /* default */].confirm({\n        title: '是否删除该模板',\n        onOk: function onOk() {\n          return new Promise(function (resolve, reject) {\n            var dispatch = props.dispatch;\n            dispatch({\n              type: 'customMetricsTable/deleteTem',\n              payload: {\n                productTargetTemplateId: formData.productTargetTemplateId\n              },\n              callback: function callback(res) {\n                if (res.code === 1008) {\n                  TableContent_openNotificationWithIcon('success', '删除成功');\n                  props.formRef.current.setFieldsValue({\n                    productTargetTemplateId: undefined\n                  }); // 请求模板数据\n\n                  dispatch({\n                    type: 'queryForm/queryTempList',\n                    payload: {\n                      templateType: formData.templateType,\n                      pageNum: 0\n                    }\n                  });\n                  resolve();\n                } else {\n                  TableContent_openNotificationWithIcon('error', res.message);\n                  reject();\n                }\n              }\n            });\n          });\n        }\n      });\n    }\n  };\n\n  var _tableChange = function _tableChange(p, e, s) {\n    var dispatch = props.dispatch;\n    var _props$customMetricsT = props.customMetricsTable,\n        pageNumber = _props$customMetricsT.pageNumber,\n        pageSize = _props$customMetricsT.pageSize;\n\n    if (pageNumber !== p.current) {\n      dispatch({\n        type: 'customMetricsTable/changePageNumber',\n        pageNumber: p.current\n      });\n    }\n\n    if (pageSize !== p.pageSize) {\n      dispatch({\n        type: 'customMetricsTable/changePageSize',\n        pageSize: p.pageSize\n      });\n    }\n  };\n\n  var openModal = function openModal() {\n    var formData = Object(lodash[\"cloneDeep\"])(props.formRef.current.getFieldsValue());\n    var nowData = props.queryForm.templateArr.find(function (item) {\n      return item.productTargetTemplateId === formData.productTargetTemplateId;\n    });\n    changeShowModal(true);\n    setTemplateName(nowData === null || nowData === void 0 ? void 0 : nowData.templateName);\n  };\n\n  var tableExport = function tableExport() {\n    var dispatch = props.dispatch; // 点击确定的时候保存targets 和 表单数据，因为Table的数据点击的时候查询，导出的为查询时的参数\n\n    var formData = props.queryForm.formData;\n    var targets = props.queryForm.checkedArrUseExportAndQueryTableList;\n    if (!Object.keys(formData).length || !targets.length) return;\n    dispatch({\n      type: 'customMetricsTable/exportTemplate',\n      payload: Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, formData), {}, {\n        targets: targets\n      }),\n      callback: function callback(response) {\n        var fileName = response.headers['content-disposition'].split(';')[1].split('filename*=utf-8\\'\\'')[1];\n        fileName = decodeURIComponent(fileName);\n        var blob = response.data;\n        var downloadElement = document.createElement('a');\n        var href = window.URL.createObjectURL(blob);\n        downloadElement.href = href;\n        downloadElement.download = fileName;\n        document.body.appendChild(downloadElement);\n        downloadElement.click();\n        document.body.removeChild(downloadElement);\n        window.URL.revokeObjectURL(href);\n      },\n      errorCallback: function errorCallback(errMessage) {\n        TableContent_openNotificationWithIcon('error', errMessage);\n      }\n    });\n  }; // useEffect(() => {\n  //     const { customMetricsSelectTree } = props;\n  //     const columns = customMetricsSelectTree.checkedOrgArr.map((item) => ({\n  //         title: item.targetName,\n  //         dataIndex: item.targetCode,\n  //         width: 200,\n  //         align: 'center',\n  //         render: (e) => e || '--',\n  //     }));\n  //     setColumns(columns);\n  // }, [props.customMetricsSelectTree.checkedOrgArr]);\n\n\n  Object(react[\"useEffect\"])(function () {\n    var formData = props.queryForm.formData;\n\n    if (formData.productIds) {\n      // 请求数据\n      var dispatch = props.dispatch;\n      dispatch({\n        type: 'customMetricsTable/queryTableList',\n        payload: Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, formData), {}, {\n          pageNum: props.customMetricsTable.pageNumber,\n          pageSize: props.customMetricsTable.pageSize,\n          targets: props.queryForm.checkedArrUseExportAndQueryTableList\n        }),\n        callback: function callback() {\n          var checkedOrgArr = props.customMetricsSelectTree.checkedOrgArr;\n          var columns = [];\n\n          var _loop = function _loop(i) {\n            if (!checkedOrgArr[i].isLeafNode) {\n              return \"continue\";\n            }\n\n            columns.push({\n              title: checkedOrgArr[i].fullName || checkedOrgArr[i].targetName,\n              dataIndex: checkedOrgArr[i].targetCode,\n              width: 200,\n              align: 'center',\n              render: function render(e) {\n                return e || '--';\n              }\n            });\n\n            if (formData.standardCodes && formData.standardCodes.length) {\n              if (customMetrics_needDisposeColumns.find(function (item) {\n                return item === checkedOrgArr[i].targetCode;\n              })) {\n                // 添加相关比较基准列\n                // 遍历选中的比较\n                console.log(props.queryForm.standardCodes, '处理比较基准列');\n                (props.queryForm.standardCodes || []).forEach(function (item) {\n                  var key = checkedOrgArr[i].targetCode;\n                  key = key[0].toUpperCase() + key.slice(1);\n                  columns.push({\n                    title: checkedOrgArr[i].fullName && \"\".concat(item.label).concat(checkedOrgArr[i].fullName) || \"\".concat(item.label).concat(checkedOrgArr[i].targetName),\n                    dataIndex: \"standard\".concat(key).concat(item.value),\n                    width: 200,\n                    align: 'center',\n                    render: function render(e) {\n                      return e || '--';\n                    }\n                  });\n                });\n              }\n            }\n          };\n\n          for (var i = 0; i < checkedOrgArr.length; i++) {\n            var _ret = _loop(i);\n\n            if (_ret === \"continue\") continue;\n          }\n\n          dispatch({\n            type: 'customMetricsTable/saveColumns',\n            columns: columns\n          });\n        }\n      });\n    }\n  }, [props.customMetricsTable.pageNumber, props.customMetricsTable.pageSize]);\n\n  var newDataSource = function newDataSource() {\n    var data = Object(lodash[\"cloneDeep\"])(props.customMetricsTable.tableData.list) || [];\n    data.forEach(function (item) {\n      item.standards && item.standards.forEach(function (item2) {\n        for (var i in item2) {\n          item[i + item2.standardCode] = item2[i];\n        }\n      });\n    });\n    return data;\n  };\n\n  return /*#__PURE__*/react_default.a.createElement(react[\"Fragment\"], null, /*#__PURE__*/react_default.a.createElement(modal[\"a\" /* default */], {\n    visible: showModal,\n    title: \"\\u4FDD\\u5B58\\u6210\\u6307\\u6807\\u6A21\\u677F\",\n    onOk: saveTem,\n    onCancel: function onCancel(e) {\n      return changeShowModal(false);\n    },\n    destroyOnClose: true,\n    confirmLoading: props.loading2\n  }, /*#__PURE__*/react_default.a.createElement(TableContent_SaveTem, {\n    forwardRef: temFormRef,\n    templateName: templateName\n  })), /*#__PURE__*/react_default.a.createElement(\"div\", {\n    className: TableContent_stylesmodules_default.a.box\n  }, /*#__PURE__*/react_default.a.createElement(\"div\", {\n    style: {\n      display: authEdit ? 'unset' : 'none'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(es_button[\"a\" /* default */], {\n    type: 'primary',\n    onClick: function onClick(e) {\n      return openModal();\n    },\n    disabled: !props.customMetricsSelectTree.checkedKeys.length\n  }, \"\\u4FDD\\u5B58\\u6A21\\u677F\"), /*#__PURE__*/react_default.a.createElement(es_button[\"a\" /* default */], {\n    type: 'primary',\n    className: TableContent_stylesmodules_default.a.btn,\n    onClick: deleteTempalte,\n    loading: props.loading3\n  }, \"\\u5220\\u9664\\u6A21\\u677F\")), /*#__PURE__*/react_default.a.createElement(\"div\", {\n    style: {\n      display: authExport ? 'unset' : 'none'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(es_button[\"a\" /* default */], {\n    type: 'primary',\n    onClick: tableExport,\n    disabled: !(props.customMetricsTable.tableData.list || []).length,\n    loading: Boolean(props.loading4)\n  }, \"\\u5BFC\\u51FA\"))), /*#__PURE__*/react_default.a.createElement(\"div\", null, /*#__PURE__*/react_default.a.createElement(MXTable[\"a\" /* default */], {\n    loading: props.loading,\n    columns: (props.customMetricsTable.tableData.list || []).length ? props.customMetricsTable.columns : [],\n    dataSource: props.customMetricsTable.tableData.list && props.customMetricsTable.tableData.list.length && newDataSource() || [],\n    total: props.customMetricsTable.tableData.total || 0,\n    pageNum: props.customMetricsTable.pageNumber,\n    scroll: {\n      x: '100%',\n      y: 500,\n      scrollToFirstRowOnChange: true\n    },\n    sticky: true,\n    onChange: function onChange(p, e, s) {\n      return _tableChange(p, e, s);\n    },\n    rowKey: \"uniqueKey\",\n    rowSelection: null,\n    bordered: true\n  })));\n};\n\n/* harmony default export */ var components_TableContent = (Object(dva[\"connect\"])(function (_ref) {\n  var customMetricsSelectTree = _ref.customMetricsSelectTree,\n      customMetricsTable = _ref.customMetricsTable,\n      queryForm = _ref.queryForm,\n      loading = _ref.loading;\n  return {\n    customMetricsSelectTree: customMetricsSelectTree,\n    customMetricsTable: customMetricsTable,\n    queryForm: queryForm,\n    loading: loading.effects['customMetricsTable/queryTableList'],\n    loading2: loading.effects['customMetricsTable/saveTemplate'],\n    loading3: loading.effects['customMetricsTable/deleteTem'],\n    loading4: loading.effects['customMetricsTable/exportTemplate']\n  };\n})(TableContent_TableContent));\n// CONCATENATED MODULE: ./src/pages/customMetrics/index.tsx\n\n\n\n\n\n\n\n\n\n\n/*\n * @Author: your name\n * @Date: 2021-04-01 13:14:02\n * @LastEditTime: 2021-04-08 16:24:07\n * @LastEditors: your name\n * @Description: In User Settings Edit\n * @FilePath: \\vip-manager\\src\\pages\\customMetrics\\index.tsx\n */\n\n\n\n\n\n\nvar TabPane = tabs[\"a\" /* default */].TabPane;\n\nvar customMetrics_CustomMetrics = function CustomMetrics(props) {\n  var _useState = Object(react[\"useState\"])([]),\n      _useState2 = Object(slicedToArray[\"a\" /* default */])(_useState, 2),\n      tableData = _useState2[0],\n      setTableData = _useState2[1];\n\n  var formRef = Object(react[\"useRef\"])();\n  Object(react[\"useEffect\"])(function () {\n    return function () {\n      var dispatch = props.dispatch;\n      dispatch({\n        type: 'queryForm/clearData'\n      });\n      dispatch({\n        type: 'customMetricsTable/clearData'\n      });\n      dispatch({\n        type: 'customMetricsSelectTree/clearData'\n      });\n    };\n  }, []);\n  return /*#__PURE__*/react_default.a.createElement(es[\"a\" /* PageHeaderWrapper */], {\n    title: \"\\u6570\\u636E\\u6307\\u6807\\u62A5\\u8868\"\n  }, /*#__PURE__*/react_default.a.createElement(row[\"a\" /* default */], {\n    gutter: 24\n  }, /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 6,\n    style: {\n      display: 'flex'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(card[\"a\" /* default */], {\n    style: {\n      width: '100%'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(tabs[\"a\" /* default */], {\n    type: \"card\"\n  }, /*#__PURE__*/react_default.a.createElement(TabPane, {\n    tab: \"\\u5F85\\u9009\\u6307\\u6807\",\n    key: \"1\"\n  }, /*#__PURE__*/react_default.a.createElement(SelectTree, null))))), /*#__PURE__*/react_default.a.createElement(col[\"a\" /* default */], {\n    span: 18,\n    style: {\n      display: 'flex'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(card[\"a\" /* default */], {\n    style: {\n      width: '100%'\n    }\n  }, /*#__PURE__*/react_default.a.createElement(components_QueryForm, {\n    forwardRef: formRef\n  }), /*#__PURE__*/react_default.a.createElement(components_TableContent, {\n    formRef: formRef\n  })))));\n};\n\n/* harmony default export */ var customMetrics = __webpack_exports__[\"default\"] = (Object(dva[\"connect\"])()(customMetrics_CustomMetrics));\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\bundler-webpack\\lib\\webpack\\plugins\\mini-css-extract-plugin\\src\\loader.js??ref--13-oneOf-0-0!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\css-loader\\cjs.js??ref--13-oneOf-0-1!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\postcss-loader\\src\\index.js??postcss!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\less-loader\\cjs.js??ref--13-oneOf-0-3!E:\\公司代码\\MRP报表\\vip-manager\\src\\pages\\customMetrics\\components\\TableContent\\styles.less?modules","E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\bundler-webpack\\lib\\webpack\\plugins\\mini-css-extract-plugin\\src\\loader.js??ref--13-oneOf-0-0!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\css-loader\\cjs.js??ref--13-oneOf-0-1!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\postcss-loader\\src\\index.js??postcss!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\less-loader\\cjs.js??ref--13-oneOf-0-3!E:\\公司代码\\MRP报表\\vip-manager\\src\\pages\\customMetrics\\components\\QueryForm\\styles.less?modules","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/components/SelectTree/SelectTreeUtils.js","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/components/SelectTree/index.tsx","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/needDisposeColumns.ts","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/components/QueryForm/index.tsx","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/components/TableContent/SaveTem/index.tsx","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/components/TableContent/index.tsx","E:/公司代码/MRP报表/vip-manager/src/pages/customMetrics/index.tsx"],"names":["renderTree","arr","filterArr","forEach","item","children","newArr","filter","parentCode","push","pushChildren","length","item2","targetCode","getParentKey","key","tree","parentKey","i","node","some","TreeNode","Search","SlectTree","props","useState","searchValue","changeSearchValue","autoExpandParent","changeAutoExpandParent","expandedKeys","onExpand","gData","setGData","renderArr","setRenderArr","onExpandFn","onCheck","checkedKeys","checkedOrgArr","console","log","dispatch","type","changeSearchValueFn","val","map","targetName","indexOf","self","loop","data","index","beforeStr","substr","afterStr","title","color","Boolean","required","minWidth","useEffect","callback","res","list","enable","initCheckedKeys","cloneDeep","initCheckedOrgArr","loading","marginBottom","e","target","value","fontSize","maxHeight","overflow","customMetricsSelectTree","connect","effects","needDisposeColumns","Option","RangePicker","QueryForm","useForm","form","templateTypeVal","changeTemplateTypeVal","templateNameOrgArr","setTemplateNameOrgArr","standardArr","setStandardArr","time","onFinish","resultVal","timeArr","startDate","moment","format","endDate","productIds","standardCodes","formData","checkedArrUseExportAndQueryTableList","customMetricsTable","pageNumber","payload","pageNum","pageSize","targets","columns","isLeafNode","fullName","dataIndex","width","align","render","find","getFieldValue","toUpperCase","slice","label","code","error","message","onReset","resetFields","tableData","chooseTemplate","productTargetTemplateId","nowData","queryForm","templateArr","templateType","setFieldsValue","frequency","undefined","week","month","otherDay","includes","standardCode","standardName","handleSearch","productName","clearTimeout","setTimeout","templateTypeChange","newStandardCodes","forwardRef","loading2","templateName","prevValues","currentValues","productId","Array","fill","styles","btnG","btnGAndRest","SaveTem","openNotificationWithIcon","TableContent","getPermission","authEdit","authExport","showModal","changeShowModal","temFormRef","useRef","setColumns","setTemplateName","saveTem","formRef","current","getFieldsValue","validateFields","then","catch","err","deleteTempalte","confirm","onOk","Promise","resolve","reject","_tableChange","p","s","openModal","tableExport","Object","keys","response","fileName","headers","split","decodeURIComponent","blob","downloadElement","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","errorCallback","errMessage","newDataSource","standards","box","display","btn","loading3","loading4","total","x","y","scrollToFirstRowOnChange","TabPane","CustomMetrics","setTableData"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"antd-pro-pages-custom-metrics-components-table-content-styles-box\",\"btn\":\"antd-pro-pages-custom-metrics-components-table-content-styles-btn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnG\":\"antd-pro-pages-custom-metrics-components-query-form-styles-btnG\",\"btnGAndRest\":\"antd-pro-pages-custom-metrics-components-query-form-styles-btnGAndRest\"};","export function renderTree(arr = []) {\n    let filterArr;\n    arr.forEach((item) => (item.children = []));\n    let newArr = [];\n    filterArr = arr.filter((item) => item.parentCode !== null);\n    newArr.push(...arr.filter((item) => item.parentCode === null));\n    pushChildren(newArr, filterArr);\n    return newArr;\n}\n\nfunction pushChildren(newArr, filterArr) {\n    if (filterArr.length) {\n        newArr.forEach((item) => {\n            item.children.push(\n                ...filterArr.filter((item2) => item2.parentCode === item.targetCode),\n            );\n            filterArr = filterArr.filter((item2) => item2.parentCode !== item.targetCode);\n            pushChildren(item.children, filterArr);\n        });\n    }\n}\n\nexport const getParentKey = (key, tree) => {\n    let parentKey;\n    for (let i = 0; i < tree.length; i++) {\n        const node = tree[i];\n        if (node.children) {\n            if (node.children.some((item) => item.targetCode === key)) {\n                parentKey = node.targetCode;\n            } else if (getParentKey(key, node.children)) {\n                parentKey = getParentKey(key, node.children);\n            }\n        }\n    }\n    return parentKey;\n};\n","import React, { useEffect, useState } from 'react';\nimport { Tree, Input, Spin } from 'antd';\nimport { renderTree, getParentKey } from './SelectTreeUtils';\nimport { connect } from 'dva';\nimport { SelectTreePro } from './selectPro';\nimport { cloneDeep } from 'lodash';\n\nconst { TreeNode } = Tree;\nconst { Search } = Input;\n\nconst SlectTree: React.FC<SelectTreePro> = (props) => {\n    const [searchValue, changeSearchValue] = useState<string>('');\n    const [autoExpandParent, changeAutoExpandParent] = useState<boolean>(true);\n    const [expandedKeys, onExpand] = useState<string[]>([]);\n    const [gData, setGData] = useState<any[]>([]);\n    const [renderArr, setRenderArr] = useState<any[]>([]);\n    const onExpandFn = (expandedKeys: string[]) => {\n        onExpand(expandedKeys);\n        changeAutoExpandParent(false);\n    };\n    const onCheck = (checkedKeys) => {\n        const checkedOrgArr = [];\n        for (let i = 0; i < checkedKeys.length; i++) {\n            renderArr.forEach((item) => {\n                if (item.targetCode === checkedKeys[i]) {\n                    checkedOrgArr.push(item);\n                }\n            });\n        }\n        console.log(checkedKeys, 'checkedKeys', checkedOrgArr);\n        // 查询对应的\n        const { dispatch } = props;\n        dispatch({\n            type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n            checkedKeys,\n            checkedOrgArr\n        });\n    };\n    const changeSearchValueFn = (val: string) => {\n        const expandedKeys = renderArr\n            .map((item) => {\n                if (item.targetName.indexOf(val) > -1) {\n                    return getParentKey(item.targetCode, gData);\n                }\n                return null;\n            })\n            .filter((item, i, self) => item && self.indexOf(item) === i);\n        changeSearchValue(val);\n        onExpand(expandedKeys);\n        changeAutoExpandParent(true);\n    };\n    const loop = (data) =>\n        data.map((item) => {\n            const index = item.targetName.indexOf(searchValue);\n            const beforeStr = item.targetName.substr(0, index);\n            const afterStr = item.targetName.substr(index + searchValue.length);\n            const title =\n                index > -1 ? (\n                    <span>\n                        {beforeStr}\n                        <span style={{ color: '#f50' }}>{searchValue}</span>\n                        {afterStr}\n                    </span>\n                ) : (\n                    <span>{item.targetName}</span>\n                );\n            if (item.children.length) {\n                return (\n                    <TreeNode key={item.targetCode} title={title}>\n                        {loop(item.children)}\n                    </TreeNode>\n                );\n            }\n            return (\n                <TreeNode\n                    key={item.targetCode}\n                    title={title}\n                    disabled={Boolean(item.required)}\n                    style={{\n                        minWidth: 300\n                    }}\n                />\n            );\n        });\n\n    useEffect(() => {\n        // 请求树结构\n        const { dispatch } = props;\n        dispatch({\n            type: 'customMetricsSelectTree/queryTreeList',\n            callback(res) {\n                const list = res.data || [];\n                console.log(renderTree(list));\n                setGData(renderTree(list));\n                const checkedOrgArr = [];\n                const checkedKeys = list\n                    .filter((item) => item.enable)\n                    .map((item) => item.targetCode);\n                for (let i = 0; i < checkedKeys.length; i++) {\n                    list.forEach((item) => {\n                        if (item.targetCode === checkedKeys[i]) {\n                            checkedOrgArr.push(item);\n                        }\n                    });\n                }\n                setRenderArr(list);\n                onExpand(list.map((item) => item.targetCode));\n                dispatch({\n                    type: 'customMetricsSelectTree/saveRenderArr',\n                    renderArr: list\n                });\n                dispatch({\n                    type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n                    checkedKeys,\n                    checkedOrgArr\n                });\n                // 保存初始选中，作用于清空数据\n                dispatch({\n                    type: 'customMetricsSelectTree/saveInitCheckKeysAndCheckedOrgArr',\n                    initCheckedKeys: cloneDeep(checkedKeys),\n                    initCheckedOrgArr: cloneDeep(checkedOrgArr)\n                });\n            }\n        });\n    }, []);\n    return (\n        <Spin spinning={Boolean(props.loading)}>\n            <Search\n                style={{ marginBottom: 8 }}\n                placeholder=\"请输入\"\n                onChange={(e) => {\n                    changeSearchValueFn(e.target.value);\n                }}\n            />\n            <span\n                style={{\n                    fontSize: 12,\n                    color: '#333'\n                }}\n            >\n                注：修改指标后，点击页面右侧”生成数据“才会生效\n            </span>\n            <div\n                style={{\n                    maxHeight: 552,\n                    overflow: 'auto'\n                }}\n            >\n                <Tree\n                    checkedKeys={props.customMetricsSelectTree.checkedKeys}\n                    checkable\n                    onCheck={(e: React.Key[]) => onCheck(e)}\n                    onExpand={(e: string[]) => onExpandFn(e)}\n                    expandedKeys={expandedKeys}\n                    autoExpandParent={autoExpandParent}\n                    selectable={false}\n                >\n                    {loop(gData)}\n                </Tree>\n            </div>\n        </Spin>\n    );\n};\n\nexport default connect(({ customMetricsSelectTree, loading }) => ({\n    customMetricsSelectTree,\n    loading: loading.effects['customMetricsSelectTree/queryTreeList']\n}))(SlectTree);\n","const needDisposeColumns = [\n    'lastWeekYield',\n    'lastMonthYield',\n    'lastThreeMonthsYield',\n    'lastSixMonthsYield',\n    'lastYearYield',\n    'lastThreeYearsYield',\n    'thisYearYield',\n    'sinceFoundationYield',\n    'sinceThisYearYield',\n    'sinceFoundationYearYield'\n];\nexport default needDisposeColumns;\n","import React, { useState, useEffect } from 'react';\nimport { Form, Row, Col, Select, Button, DatePicker, Spin, notification } from 'antd';\nimport { connect } from 'dva';\nimport moment from 'moment';\nimport { cloneDeep } from 'lodash';\nimport needDisposeColumns from '../../needDisposeColumns';\nimport styles from './styles.less';\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\n\ninterface QueryFormPro {\n    forwardRef: any;\n    dispatch: any;\n    loading: boolean;\n    loading2: boolean;\n    customMetricsSelectTree:any;\n    customMetricsTable:any;\n    queryForm:any;\n}\n\nconst QueryForm: React.FC<QueryFormPro> = (props) => {\n    const [form] = Form.useForm();\n    const [templateTypeVal, changeTemplateTypeVal] = useState<any>(1);\n    const [templateNameOrgArr, setTemplateNameOrgArr] = useState<any[]>([]);\n    const [standardArr, setStandardArr] = useState<any[]>([]);\n    let time = null;\n\n    const onFinish = (val) => {\n        const { dispatch } = props;\n        const resultVal = cloneDeep(val);\n        if (val.timeArr) {\n            resultVal.startDate = moment(val.timeArr[0]).format('YYYY-MM-DD');\n            resultVal.endDate = moment(val.timeArr[1]).format('YYYY-MM-DD');\n        }\n        if (val.time) {\n            resultVal.startDate = resultVal.endDate = moment(val.time).format('YYYY-MM-DD');\n        }\n        if (typeof val.productIds !== 'object') {\n            resultVal.productIds = [val.productIds];\n        } else {\n            resultVal.productIds = val.productIds.map((item) => item.value);\n        }\n        delete resultVal.timeArr;\n        delete resultVal.time;\n        // 保存当前比较基准，处理分页请求时的问题\n        dispatch({\n            type: 'queryForm/setStandardCodes',\n            standardCodes:resultVal.standardCodes\n        });\n        resultVal.standardCodes =\n            resultVal.standardCodes && resultVal.standardCodes.map((item) => item.value);\n        // 保存点击确定时的form表单数据\n        dispatch({\n            type: 'queryForm/setFormData',\n            formData: resultVal\n        });\n        // 保存当前选中的指标\n        dispatch({\n            type: 'queryForm/setCheckedArrUseExportAndQueryTableList',\n            checkedArrUseExportAndQueryTableList: props.customMetricsSelectTree.checkedKeys\n        });\n        // 获取选中的指标的源数据\n\n        if (props.customMetricsTable.pageNumber === 1) {\n            dispatch({\n                type: 'customMetricsTable/queryTableList',\n                payload: {\n                    ...resultVal,\n                    pageNum: 1,\n                    pageSize: props.customMetricsTable.pageSize,\n                    targets: props.customMetricsSelectTree.checkedKeys\n                },\n                callback(res) {\n                    const {\n                        customMetricsSelectTree: { checkedOrgArr }\n                    } = props;\n                    const columns = [];\n                    for (let i = 0; i < checkedOrgArr.length; i++) {\n                        if(!checkedOrgArr[i].isLeafNode) {\n                            continue;\n                        }\n                        columns.push({\n                            title: checkedOrgArr[i].fullName  || checkedOrgArr[i].targetName,\n                            dataIndex: checkedOrgArr[i].targetCode,\n                            width: 200,\n                            align: 'center',\n                            render: (e) => e || '--'\n                        });\n                        if (\n                            needDisposeColumns.find((item) => item === checkedOrgArr[i].targetCode)\n                        ) {\n                            // 添加相关比较基准列\n                            // 遍历选中的比较\n                            (form.getFieldValue('standardCodes') || []).forEach((item) => {\n                                let key = checkedOrgArr[i].targetCode;\n                                key = key[0].toUpperCase() + key.slice(1);\n                                columns.push({\n                                    title: checkedOrgArr[i].fullName && `${item.label}${checkedOrgArr[i].fullName}` || `${item.label}${checkedOrgArr[i].targetName}`,\n                                    dataIndex: `standard${key}${item.value}`,\n                                    width: 200,\n                                    align: 'center',\n                                    render: (e) => e || '--'\n                                });\n                            });\n                        }\n                    }\n                    dispatch({\n                        type: 'customMetricsTable/saveColumns',\n                        columns\n                    });\n                }\n            });\n        } else {\n            dispatch({\n                type: 'customMetricsTable/changePageNumber',\n                pageNumber: 1\n            });\n        }\n        // 查询提示\n        dispatch({\n            type: 'customMetricsTable/queryTips',\n            payload: {\n                ...resultVal,\n                pageNum: 1,\n                pageSize: props.customMetricsTable.pageSize,\n                targets: props.customMetricsSelectTree.checkedKeys\n            },\n            callback(res) {\n                if (res.code !== 1008) {\n                    notification.error({\n                        message: res.message\n                    });\n                }\n                // console.log(res);\n            }\n        });\n    };\n\n    const onReset = () => {\n        const { dispatch } = props;\n        form.resetFields();\n        changeTemplateTypeVal(1);\n        dispatch({\n            type: 'customMetricsTable/saveTableList',\n            tableData: {}\n        });\n        dispatch({\n            type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n            checkedKeys: props.customMetricsSelectTree.initCheckedKeys,\n            checkedOrgArr: props.customMetricsSelectTree.initCheckedOrgArr\n        });\n    };\n\n    // 选择模板\n    const chooseTemplate = (productTargetTemplateId) => {\n        const { dispatch } = props;\n        if (!productTargetTemplateId) return;\n        const nowData = props.queryForm.templateArr.find(\n            (item) => item.productTargetTemplateId === productTargetTemplateId,\n        );\n        let checkedOrgArr = [];\n        const { renderArr } = props.customMetricsSelectTree;\n        for (let i = 0; i < nowData.targets.length; i++) {\n            renderArr.forEach((item) => {\n                if (item.targetCode === nowData.targets[i]) {\n                    checkedOrgArr.push(item);\n                }\n            });\n        }\n\n        if (nowData.templateType === 1) {\n            // 单产品 设置时间范围\n            form.setFieldsValue({\n                frequency: nowData.frequency,\n                timeArr:\n                    nowData.startDate && nowData.endDate\n                        ? [moment(nowData.startDate), moment(nowData.endDate)]\n                        : undefined,\n                week: nowData.frequency === 2 ? nowData.week : undefined,\n                month: nowData.frequency === 3 ? nowData.month : undefined,\n                otherDay: nowData.frequency !== 1 ? nowData.otherDay : undefined,\n                standardCodes: nowData.standardCodes && standardArr.filter((item) => nowData.standardCodes.includes(item.standardCode)).map((item2) => ({value: item2.standardCode, label: item2.standardName}))\n            });\n        }\n        if (nowData.templateType === 2) {\n            form.setFieldsValue({\n                time: nowData.startDate ? moment(nowData.startDate) : undefined,\n                standardCodes: nowData.standardCodes && standardArr.filter((item) => nowData.standardCodes.includes(item.standardCode)).map((item2) => ({value: item2.standardCode, label: item2.standardName}))\n            });\n        }\n\n        dispatch({\n            type: 'customMetricsSelectTree/savecheckedKeysAndCheckedOrgArr',\n            checkedOrgArr,\n            checkedKeys: nowData.targets\n        });\n    };\n\n    // 查询产品名称\n    const handleSearch = (productName) => {\n        const { dispatch } = props;\n        clearTimeout(time);\n        time = setTimeout(() => {\n            dispatch({\n                type: 'queryForm/queryProductist',\n                payload: { productName},\n                callback(data) {\n                    setTemplateNameOrgArr(data || []);\n                }\n            });\n        }, 500);\n    };\n\n    // 指标类型\n    const templateTypeChange = (e) => {\n        form.setFieldsValue({ productIds: [] });\n        form.setFieldsValue({ productTargetTemplateId: undefined });\n        changeTemplateTypeVal(e);\n    };\n\n    useEffect(() => {\n        // 请求模板\n        const { dispatch } = props;\n        dispatch({\n            type: 'queryForm/queryTempList',\n            payload: { templateType: templateTypeVal, pageNum: 0 }\n        });\n    }, [templateTypeVal]);\n\n    // 请求比较基准\n    useEffect(() => {\n        const { dispatch } = props;\n        dispatch({\n            type: 'queryForm/queryStandardArr',\n            callback(data) {\n                setStandardArr(data || []);\n                if (data?.length) {\n                    const item = data.find((i) => i.standardName === '沪深300');\n                    if (item) {\n                        const newStandardCodes = [{ value: item.standardCode, label: item.standardName }];\n                        form.setFieldsValue({\n                            standardCodes: newStandardCodes\n                        });\n                    }\n                }\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        const { dispatch } = props;\n        dispatch({\n            type: 'queryForm/queryProductist',\n            // payload: { pageNum: 0 },\n            callback(data) {\n                setTemplateNameOrgArr(data || []);\n            }\n        });\n        return () => {\n            clearTimeout(time);\n        };\n    }, []);\n    return (\n        <Form form={form} onFinish={onFinish} ref={props.forwardRef}>\n            <Row gutter={24}>\n                <Col span={12}>\n                    <Form.Item\n                        label=\"指标类型\"\n                        name=\"templateType\"\n                        rules={[{ required: true }]}\n                        initialValue={1}\n                    >\n                        <Select onChange={(e) => templateTypeChange(e)} allowClear>\n                            <Option value={1}>单产品</Option>\n                            <Option value={2}>多产品</Option>\n                        </Select>\n                    </Form.Item>\n                </Col>\n                <Col span={12}>\n                    <Form.Item label=\"选择模板\" name={'productTargetTemplateId'}>\n                        <Select\n                            allowClear\n                            placeholder={'若已保存请选择'}\n                            onChange={chooseTemplate}\n                            loading={props.loading2}\n                            disabled={props.loading2}\n                        >\n                            {props.queryForm.templateArr.map((item) => (\n                                <Option\n                                    value={item.productTargetTemplateId}\n                                    key={item.productTargetTemplateId}\n                                >\n                                    {item.templateName}\n                                </Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n            </Row>\n            <Row gutter={24}>\n                <Col span={12}>\n                    <Form.Item\n                        noStyle\n                        shouldUpdate={(prevValues, currentValues) =>\n                            prevValues.templateType !== currentValues.templateType\n                        }\n                    >\n                        {({ getFieldValue }) =>\n                            getFieldValue('templateType') === 1 ? (\n                            // true ? (\n                                <Form.Item\n                                    label=\"产品名称\"\n                                    name=\"productIds\"\n                                    rules={[{ required: true }]}\n                                >\n                                    <Select\n                                        showSearch\n                                        allowClear\n                                        placeholder={'请输入全称或简称'}\n                                        defaultActiveFirstOption={false}\n                                        showArrow={false}\n                                        filterOption={false}\n                                        onSearch={handleSearch}\n                                        notFoundContent={\n                                            props.loading ? <Spin size=\"small\" /> : null\n                                        }\n                                    >\n                                        {templateNameOrgArr.map((item) => (\n                                            <Option value={item.productId} key={item.productId}>\n                                                {item.productName}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            ) : getFieldValue('templateType') === 2 ? (\n                                <Form.Item\n                                    label=\"产品名称\"\n                                    name=\"productIds\"\n                                    rules={[{ required: true }]}\n                                >\n                                    <Select\n                                        labelInValue\n                                        placeholder={'请输入全称或简称'}\n                                        mode={'multiple'}\n                                        showSearch\n                                        allowClear\n                                        defaultActiveFirstOption={false}\n                                        showArrow={false}\n                                        filterOption={false}\n                                        onSearch={handleSearch}\n                                        notFoundContent={\n                                            props.loading ? <Spin size=\"small\" /> : null\n                                        }\n                                    >\n                                        {templateNameOrgArr.map((item) => (\n                                            <Option value={item.productId} key={item.productId}>\n                                                {item.productName}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            ) : null\n                        }\n                    </Form.Item>\n                </Col>\n                <Col span={12}>\n                    <Form.Item\n                        noStyle\n                        shouldUpdate={(prevValues, currentValues) =>\n                            prevValues.templateType !== currentValues.templateType\n                        }\n                    >\n                        {({ getFieldValue }) =>\n                            // getFieldValue('templateType') === 1 ? (\n                            true ? (\n                                <Form.Item name=\"timeArr\" label=\"时间范围\">\n                                    <RangePicker allowClear style={{ width: '100%' }} />\n                                </Form.Item>\n                            ) : getFieldValue('templateType') === 2 ? (\n                                <Form.Item name=\"standardCodes\" label=\"比较基准\">\n                                    <Select\n                                        allowClear\n                                        mode={'multiple'}\n                                        placeholder=\"请选择\"\n                                        labelInValue\n                                    >\n                                        {standardArr.map((item, index) => (\n                                            <Option key={index} value={item.standardCode}>\n                                                {item.standardName}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            ) : null\n                        }\n                    </Form.Item>\n                </Col>\n            </Row>\n            <Row gutter={24}>\n                <Form.Item\n                    noStyle\n                    shouldUpdate={(prevValues, currentValues) =>\n                        prevValues.templateType !== currentValues.templateType\n                    }\n                >\n                    {({ getFieldValue }) =>\n                        // getFieldValue('templateType') === 1 ? (\n                        true ? (\n                            <React.Fragment>\n                                <Col span={12}>\n                                    <Row gutter={24}>\n                                        <Col span={14}>\n                                            <Form.Item\n                                                label=\"数据频率\"\n                                                name=\"frequency\"\n                                                rules={[{ required: true }]}\n                                                initialValue={1}\n                                            >\n                                                <Select allowClear>\n                                                    <Option value={1}>日频</Option>\n                                                    <Option value={2}>周频</Option>\n                                                    <Option value={3}>月频</Option>\n                                                </Select>\n                                            </Form.Item>\n                                        </Col>\n                                        <Col span={10}>\n                                            <Form.Item\n                                                noStyle\n                                                shouldUpdate={(prevValues, currentValues) =>\n                                                    prevValues.frequency !== currentValues.frequency\n                                                }\n                                            >\n                                                {({ getFieldValue }) =>\n                                                    getFieldValue('frequency') === 2 ? (\n                                                        <Form.Item\n                                                            name=\"week\"\n                                                            rules={[\n                                                                {\n                                                                    required: true,\n                                                                    message: '该项必填'\n                                                                }\n                                                            ]}\n                                                        >\n                                                            <Select allowClear>\n                                                                <Option value={1}>周一</Option>\n                                                                <Option value={2}>周二</Option>\n                                                                <Option value={3}>周三</Option>\n                                                                <Option value={4}>周四</Option>\n                                                                <Option value={5}>周五</Option>\n                                                            </Select>\n                                                        </Form.Item>\n                                                    ) : getFieldValue('frequency') === 3 ? (\n                                                        <Form.Item\n                                                            name=\"month\"\n                                                            rules={[\n                                                                {\n                                                                    required: true,\n                                                                    message: '该项必填'\n                                                                }\n                                                            ]}\n                                                        >\n                                                            <Select allowClear>\n                                                                {Array(31)\n                                                                    .fill(1)\n                                                                    .map(\n                                                                        (item, index) =>\n                                                                            item + index,\n                                                                    )\n                                                                    .map((item2) => (\n                                                                        <Option value={item2}>\n                                                                            {item2}\n                                                                        </Option>\n                                                                    ))}\n                                                            </Select>\n                                                        </Form.Item>\n                                                    ) : null\n                                                }\n                                            </Form.Item>\n                                        </Col>\n                                    </Row>\n                                </Col>\n                                <Col span={12}>\n                                    <Form.Item\n                                        noStyle\n                                        shouldUpdate={(prevValues, currentValues) =>\n                                            prevValues.frequency !== currentValues.frequency\n                                        }\n                                    >\n                                        {({ getFieldValue }) =>\n                                            getFieldValue('frequency') !== 1 ? (\n                                                <Form.Item\n                                                    name=\"otherDay\"\n                                                    label=\"其他日期\"\n                                                    extra=\"多选\"\n                                                >\n                                                    <Select\n                                                        allowClear\n                                                        mode={'multiple'}\n                                                        placeholder=\"请选择\"\n                                                    >\n                                                        <Option value={1}>分红日</Option>\n                                                        <Option value={2}>业绩计提日</Option>\n                                                        <Option value={3}>开放日</Option>\n                                                    </Select>\n                                                </Form.Item>\n                                            ) : (\n                                                <Form.Item name=\"standardCodes\" label=\"比较基准\">\n                                                    <Select\n                                                        labelInValue\n                                                        allowClear\n                                                        mode={'multiple'}\n                                                        placeholder=\"请选择\"\n                                                    >\n                                                        {standardArr.map((item) => (\n                                                            <Option value={item.standardCode}>\n                                                                {item.standardName}\n                                                            </Option>\n                                                        ))}\n                                                    </Select>\n                                                </Form.Item>\n                                            )\n                                        }\n                                    </Form.Item>\n                                </Col>\n                            </React.Fragment>\n                        ) : null\n                    }\n                </Form.Item>\n            </Row>\n\n            <Form.Item\n                noStyle\n                shouldUpdate={(prevValues, currentValues) =>\n                    prevValues.templateType !== currentValues.templateType ||\n                    prevValues.frequency !== currentValues.frequency\n                }\n            >\n                {({ getFieldValue }) =>\n                    // getFieldValue('templateType') !== 1 ? (\n                    false ?(\n                        <Row gutter={24}>\n                            <Col span={12}>\n                                <Form.Item\n                                    name=\"time\"\n                                    label=\"选择日期\"\n                                    rules={[{ required: true }]}\n                                >\n                                    <DatePicker style={{ width: '100%' }} allowClear />\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    ) : getFieldValue('frequency') !== 1 ? (\n                        <Row gutter={24}>\n                            <Col span={12}>\n                                <Form.Item name=\"standardCodes\" label=\"比较基准\">\n                                    <Select\n                                        allowClear\n                                        mode={'multiple'}\n                                        placeholder=\"请选择\"\n                                        labelInValue\n                                    >\n                                        {standardArr.map((item) => (\n                                            <Option value={item.standardCode}>\n                                                {item.standardName}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    ) : null\n                }\n            </Form.Item>\n            <div className={styles.btnG}>\n                <Button htmlType={'button'} className={styles.btnGAndRest} onClick={onReset}>\n                    清空数据\n                </Button>\n                <Button\n                    htmlType={'submit'}\n                    type={'primary'}\n                    disabled={!props.customMetricsSelectTree.checkedKeys.length}\n                >\n                    生成数据\n                </Button>\n            </div>\n        </Form>\n    );\n};\n\nexport default connect(({ customMetricsSelectTree, loading, queryForm, customMetricsTable }) => ({\n    customMetricsSelectTree,\n    queryForm,\n    customMetricsTable,\n    loading: loading.effects['queryForm/queryProductist'],\n    loading2: loading.effects['queryForm/queryTempList']\n}))(QueryForm);\n","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst SaveTem: React.FC<{ forwardRef: any; templateName: string | undefined }> = (props) => {\n    const [form] = Form.useForm();\n    return (\n        <React.Fragment>\n            <Form ref={props.forwardRef} form={form} layout=\"vertical\">\n                <Form.Item\n                    label=\"模板名称\"\n                    name=\"templateName\"\n                    rules={[{ required: true }]}\n                    initialValue={props.templateName}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item>\n                    <span>备注：</span>\n                    <p>1、本次模板会保存所选指标、净值频率；</p>\n                    <p>\n                        2、若时间范围和产品名称也需要保存，可以直接点击确认，若无需储存，可以删除该信息。\n                    </p>\n                </Form.Item>\n            </Form>\n        </React.Fragment>\n    );\n};\n\nexport default SaveTem;\n","import React, { Fragment, useState, useRef, useEffect } from 'react';\nimport { Button, Alert, Table, Modal, message, notification } from 'antd';\nimport { cloneDeep } from 'lodash';\nimport MXTable from '@/pages/components/MXTable';\nimport { connect } from 'dva';\nimport SaveTem from './SaveTem';\nimport styles from './styles.less';\nimport moment from 'moment';\nimport { getPermission } from '@/utils/utils';\nimport needDisposeColumns from '../../needDisposeColumns';\n\nconst openNotificationWithIcon = (type, message) => {\n    notification[type]({\n        message\n    });\n};\n\nconst TableContent: React.FC<TableContentPro> = (props) => {\n    const { authEdit, authExport } = getPermission(90100);\n    const [showModal, changeShowModal] = useState<boolean>(false);\n    const temFormRef: React.MutableRefObject<any> = useRef();\n    const [columns, setColumns] = useState<any[]>();\n    const [templateName, setTemplateName] = useState<string | undefined>('');\n\n    const saveTem = () => {\n        const formData = cloneDeep(props.formRef.current.getFieldsValue());\n        const { dispatch } = props;\n        // 如果选择模板则为更新模板\n        temFormRef.current\n            .validateFields()\n            .then((data) => {\n                if (formData.timeArr) {\n                    formData.startDate = moment(formData.timeArr[0]).format('YYYY-MM-DD');\n                    formData.endDate = moment(formData.timeArr[1]).format('YYYY-MM-DD');\n                }\n                if (formData.time) {\n                    formData.startDate = formData.endDate = moment(formData.time).format(\n                        'YYYY-MM-DD',\n                    );\n                }\n                delete formData.productIds;\n                delete formData.timeArr;\n                delete formData.time;\n                formData.standardCodes =\n                    formData.standardCodes && formData.standardCodes.map((item) => item.value);\n                dispatch({\n                    type: 'customMetricsTable/saveTemplate',\n                    payload: {\n                        ...formData,\n                        ...data,\n                        targets: props.customMetricsSelectTree.checkedKeys\n                    },\n                    callback(res) {\n                        if (res.code === 1008) {\n                            openNotificationWithIcon('success', '保存成功');\n                            changeShowModal(false);\n                            // 请求模板数据\n                            dispatch({\n                                type: 'queryForm/queryTempList',\n                                payload: { templateType: formData.templateType, pageNum: 0 }\n                            });\n                        } else {\n                            openNotificationWithIcon('error', res.message);\n                        }\n                    }\n                });\n            })\n            .catch((err) => console.log(err));\n    };\n\n    const deleteTempalte = () => {\n        const formData = cloneDeep(props.formRef.current.getFieldsValue());\n        if (formData.productTargetTemplateId === undefined) {\n            message.error('请先选择模板');\n        } else {\n            Modal.confirm({\n                title: '是否删除该模板',\n                onOk() {\n                    return new Promise((resolve, reject) => {\n                        const { dispatch } = props;\n                        dispatch({\n                            type: 'customMetricsTable/deleteTem',\n                            payload: { productTargetTemplateId: formData.productTargetTemplateId },\n                            callback(res) {\n                                if (res.code === 1008) {\n                                    openNotificationWithIcon('success', '删除成功');\n                                    props.formRef.current.setFieldsValue({\n                                        productTargetTemplateId: undefined\n                                    });\n                                    // 请求模板数据\n                                    dispatch({\n                                        type: 'queryForm/queryTempList',\n                                        payload: {\n                                            templateType: formData.templateType,\n                                            pageNum: 0\n                                        }\n                                    });\n                                    resolve();\n                                } else {\n                                    openNotificationWithIcon('error', res.message);\n                                    reject();\n                                }\n                            }\n                        });\n                    });\n                }\n            });\n        }\n    };\n\n    const _tableChange = (p, e, s) => {\n        const { dispatch } = props;\n        const { pageNumber, pageSize } = props.customMetricsTable;\n        if (pageNumber !== p.current) {\n            dispatch({\n                type: 'customMetricsTable/changePageNumber',\n                pageNumber: p.current\n            });\n        }\n        if (pageSize !== p.pageSize) {\n            dispatch({\n                type: 'customMetricsTable/changePageSize',\n                pageSize: p.pageSize\n            });\n        }\n    };\n\n    const openModal = () => {\n        const formData = cloneDeep(props.formRef.current.getFieldsValue());\n        const nowData = props.queryForm.templateArr.find(\n            (item) => item.productTargetTemplateId === formData.productTargetTemplateId,\n        );\n        changeShowModal(true);\n        setTemplateName(nowData?.templateName);\n    };\n\n    const tableExport = () => {\n        const { dispatch } = props;\n        // 点击确定的时候保存targets 和 表单数据，因为Table的数据点击的时候查询，导出的为查询时的参数\n        const formData = props.queryForm.formData;\n        const targets = props.queryForm.checkedArrUseExportAndQueryTableList;\n        if (!Object.keys(formData).length || !targets.length) return;\n        dispatch({\n            type: 'customMetricsTable/exportTemplate',\n            payload: { ...formData, targets },\n            callback(response) {\n                let fileName = response.headers['content-disposition']\n                    .split(';')[1]\n                    .split('filename*=utf-8\\'\\'')[1];\n                fileName = decodeURIComponent(fileName);\n                let blob = response.data;\n                let downloadElement = document.createElement('a');\n                let href = window.URL.createObjectURL(blob);\n                downloadElement.href = href;\n                downloadElement.download = fileName;\n                document.body.appendChild(downloadElement);\n                downloadElement.click();\n                document.body.removeChild(downloadElement);\n                window.URL.revokeObjectURL(href);\n            },\n            errorCallback(errMessage) {\n                openNotificationWithIcon('error', errMessage);\n            }\n        });\n    };\n\n    // useEffect(() => {\n    //     const { customMetricsSelectTree } = props;\n    //     const columns = customMetricsSelectTree.checkedOrgArr.map((item) => ({\n    //         title: item.targetName,\n    //         dataIndex: item.targetCode,\n    //         width: 200,\n    //         align: 'center',\n    //         render: (e) => e || '--',\n    //     }));\n    //     setColumns(columns);\n    // }, [props.customMetricsSelectTree.checkedOrgArr]);\n\n    useEffect(() => {\n        const formData = props.queryForm.formData;\n        if (formData.productIds) {\n            // 请求数据\n            const { dispatch } = props;\n            dispatch({\n                type: 'customMetricsTable/queryTableList',\n                payload: {\n                    ...formData,\n                    pageNum: props.customMetricsTable.pageNumber,\n                    pageSize: props.customMetricsTable.pageSize,\n                    targets: props.queryForm.checkedArrUseExportAndQueryTableList\n                },\n                callback() {\n                    const {\n                        customMetricsSelectTree: { checkedOrgArr }\n                    } = props;\n                    let columns = [];\n                    for (let i = 0; i < checkedOrgArr.length; i++) {\n                        if(!checkedOrgArr[i].isLeafNode) {\n                            continue;\n                        }\n                        columns.push({\n                            title: checkedOrgArr[i].fullName  || checkedOrgArr[i].targetName,\n                            dataIndex: checkedOrgArr[i].targetCode,\n                            width: 200,\n                            align: 'center',\n                            render: (e) => e || '--'\n                        });\n                        if (formData.standardCodes && formData.standardCodes.length) {\n                            if (\n                                needDisposeColumns.find(\n                                    (item) => item === checkedOrgArr[i].targetCode,\n                                )\n                            ) {\n                                // 添加相关比较基准列\n                                // 遍历选中的比较\n                                console.log(\n                                    props.queryForm.standardCodes,\n                                    '处理比较基准列',\n                                );\n                                (\n                                    props.queryForm.standardCodes || []\n                                ).forEach((item) => {\n                                    let key = checkedOrgArr[i].targetCode;\n                                    key = key[0].toUpperCase() + key.slice(1);\n                                    columns.push({\n                                        title: checkedOrgArr[i].fullName && `${item.label}${checkedOrgArr[i].fullName}` || `${item.label}${checkedOrgArr[i].targetName}`,\n                                        dataIndex: `standard${key}${item.value}`,\n                                        width: 200,\n                                        align: 'center',\n                                        render: (e) => e || '--'\n                                    });\n                                });\n                            }\n                        }\n                    }\n\n                    dispatch({\n                        type: 'customMetricsTable/saveColumns',\n                        columns\n                    });\n                }\n            });\n        }\n    }, [props.customMetricsTable.pageNumber, props.customMetricsTable.pageSize]);\n    const newDataSource = () => {\n        const data = cloneDeep(props.customMetricsTable.tableData.list) || [];\n        data.forEach((item) => {\n            item.standards &&\n                item.standards.forEach((item2) => {\n                    for (let i in item2) {\n                        item[i + item2.standardCode] = item2[i];\n                    }\n                });\n        });\n        return data;\n    };\n    return (\n        <Fragment>\n            <Modal\n                visible={showModal}\n                title=\"保存成指标模板\"\n                onOk={saveTem}\n                onCancel={(e) => changeShowModal(false)}\n                destroyOnClose\n                confirmLoading={props.loading2}\n            >\n                <SaveTem forwardRef={temFormRef} templateName={templateName} />\n            </Modal>\n            <div className={styles.box}>\n                <div\n                    style={{\n                        display: authEdit ? 'unset' : 'none'\n                    }}\n                >\n                    <Button\n                        type={'primary'}\n                        onClick={(e) => openModal()}\n                        disabled={!props.customMetricsSelectTree.checkedKeys.length}\n                    >\n                        保存模板\n                    </Button>\n                    <Button\n                        type={'primary'}\n                        className={styles.btn}\n                        onClick={deleteTempalte}\n                        loading={props.loading3}\n                    >\n                        删除模板\n                    </Button>\n                </div>\n\n                <div\n                    style={{\n                        display: authExport ? 'unset' : 'none'\n                    }}\n                >\n                    <Button\n                        type={'primary'}\n                        onClick={tableExport}\n                        disabled={!(props.customMetricsTable.tableData.list || []).length}\n                        loading={Boolean(props.loading4)}\n                    >\n                        导出\n                    </Button>\n                </div>\n            </div>\n            <div>\n                <MXTable\n                    loading={props.loading}\n                    columns={\n                        (props.customMetricsTable.tableData.list || []).length\n                            ? props.customMetricsTable.columns\n                            : []\n                    }\n                    dataSource={\n                        (props.customMetricsTable.tableData.list &&\n                            props.customMetricsTable.tableData.list.length &&\n                            newDataSource()) ||\n                        []\n                    }\n                    total={props.customMetricsTable.tableData.total || 0}\n                    pageNum={props.customMetricsTable.pageNumber}\n                    scroll={{ x: '100%', y: 500, scrollToFirstRowOnChange: true }}\n                    sticky\n                    onChange={(p, e, s) => _tableChange(p, e, s)}\n                    rowKey=\"uniqueKey\"\n                    rowSelection={null}\n                    bordered\n                />\n            </div>\n        </Fragment>\n    );\n};\n\nexport default connect(({ customMetricsSelectTree, customMetricsTable, queryForm, loading }) => ({\n    customMetricsSelectTree,\n    customMetricsTable,\n    queryForm,\n    loading: loading.effects['customMetricsTable/queryTableList'],\n    loading2: loading.effects['customMetricsTable/saveTemplate'],\n    loading3: loading.effects['customMetricsTable/deleteTem'],\n    loading4: loading.effects['customMetricsTable/exportTemplate']\n}))(TableContent);\n","/*\n * @Author: your name\n * @Date: 2021-04-01 13:14:02\n * @LastEditTime: 2021-04-08 16:24:07\n * @LastEditors: your name\n * @Description: In User Settings Edit\n * @FilePath: \\vip-manager\\src\\pages\\customMetrics\\index.tsx\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Card, Row, Col, Tabs } from 'antd';\nimport { PageHeaderWrapper } from '@ant-design/pro-layout';\nimport SelectTree from './components/SelectTree/index';\nimport QueryForm from './components/QueryForm';\nimport TableContent from './components/TableContent';\nimport { connect } from 'dva';\n\nconst { TabPane } = Tabs;\n\nconst CustomMetrics: React.FC<any> = (props) => {\n    const [tableData, setTableData] = useState<any[]>([]);\n    const formRef: React.MutableRefObject<any> = useRef();\n    useEffect(() => {\n        return () => {\n            const { dispatch } = props;\n            dispatch({\n                type: 'queryForm/clearData'\n            });\n            dispatch({\n                type: 'customMetricsTable/clearData'\n            });\n            dispatch({\n                type: 'customMetricsSelectTree/clearData'\n            });\n        };\n    }, []);\n    return (\n        <PageHeaderWrapper title=\"数据指标报表\">\n            <Row gutter={24}>\n                <Col span={6} style={{ display: 'flex' }}>\n                    <Card style={{ width: '100%' }}>\n                        <Tabs type=\"card\">\n                            <TabPane tab=\"待选指标\" key=\"1\">\n                                <SelectTree />\n                            </TabPane>\n                        </Tabs>\n                    </Card>\n                </Col>\n                <Col span={18} style={{ display: 'flex' }}>\n                    <Card style={{ width: '100%' }}>\n                        <QueryForm forwardRef={formRef} />\n                        <TableContent formRef={formRef} />\n                    </Card>\n                </Col>\n            </Row>\n        </PageHeaderWrapper>\n    );\n};\n\nexport default connect()(CustomMetrics);\n"]}}