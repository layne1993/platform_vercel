{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[79],{EpFQ:function(e,t,a){\"use strict\";a.r(t);a(\"IzEo\");var n=a(\"bx4M\"),i=a(\"0Owb\"),l=(a(\"14J3\"),a(\"BMrR\")),r=(a(\"jCWc\"),a(\"kPKH\")),s=(a(\"7Kak\"),a(\"9yH6\")),c=(a(\"+L6B\"),a(\"2/Rp\")),o=a(\"k1fw\"),u=a(\"tJVT\"),p=(a(\"/xke\"),a(\"TeRw\")),m=(a(\"y8nQ\"),a(\"Vl3Y\")),d=(a(\"5NDa\"),a(\"5rEg\")),f=a(\"q1tI\"),k=a.n(f),g=a(\"Hx5s\"),b=a(\"tQHx\"),y=a(\"MuoO\"),E=a(\"wd/R\"),v=a.n(E),O=a(\"9kvl\"),j=a(\"+n12\"),h=a(\"MxP2\"),x=a.n(h),N=d[\"a\"].TextArea,w=m[\"a\"].Item,C={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:8},sm:{span:12}}},S=function(e,t,a,n,i){p[\"default\"][e||\"info\"]({message:t,description:a,placement:n,duration:i||3})},R=function(e){var t=Object(j[\"o\"])(50200),a=t.authEdit,p=[{label:\"\\u4ea7\\u54c1\\u7c7b\\u6295\\u8d44\\u8005\",name:\"productNeedRisk\",key:Object(j[\"q\"])(4),defaultValue:0},{label:\"\\u81ea\\u7136\\u4eba\\u7c7b\\u6295\\u8d44\\u8005\",name:\"peopleNeedRisk\",key:Object(j[\"q\"])(4),defaultValue:1},{label:\"\\u673a\\u6784\\u7c7b\\u6295\\u8d44\\u8005\",name:\"institutionsNeedRisk\",key:Object(j[\"q\"])(4),defaultValue:1},{label:\"vip\\u7c7b\\u6295\\u8d44\\u8005\",name:\"vipNeedRisk\",key:Object(j[\"q\"])(4),defaultValue:1}],d=[{title:\"\\u95ee\\u5377\\u7c7b\\u578b\",dataIndex:\"askType\",align:\"center\",render:function(e){return 1===e?\"\\u4e2a\\u4eba\\u98ce\\u9669\\u6d4b\\u8bc4\\u95ee\\u5377\":2===e||3===e?\"\\u516c\\u53f8\\u98ce\\u9669\\u6d4b\\u8bc4\\u95ee\\u5377\":\"--\"}},{title:\"\\u95ee\\u5377\\u7248\\u672c\",dataIndex:\"versionNumber\",align:\"center\"},{title:\"\\u6a21\\u677f\\u72b6\\u6001\",dataIndex:\"isDelete\",align:\"center\",render:function(e){return 0===e?\"\\u751f\\u6548\":1===e?\"\\u5931\\u6548\":void 0}},{title:\"\\u53d1\\u5e03\\u72b6\\u6001\",dataIndex:\"publishStatus\",align:\"center\",render:function(e){return 0===e?\"\\u7f16\\u8f91\":1===e?\"\\u5df2\\u53d1\\u5e03\":void 0}},{title:\"\\u521b\\u5efa\\u4eba\",dataIndex:\"managerUserName\",align:\"center\"},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createTime\",align:\"center\",sorter:function(e,t){return e.createTime-t.createTime},render:function(e){return v()(e).format(\"YYYY-MM-DD\")}},{title:\"\\u64cd\\u4f5c\",align:\"center\",render:function(e){return e.publishStatus?k.a.createElement(\"span\",{className:x.a.operation,onClick:function(t){return H(e)}},\"\\u67e5\\u770b\"):k.a.createElement(\"div\",null,a?k.a.createElement(\"span\",{style:{display:a?\"unset\":\"none\"},className:x.a.operation,onClick:function(t){return H(e)}},\"\\u7f16\\u8f91\"):\"--\")}}],y={pageNum:1,pageSize:20},E=Object(f[\"useState\"])({}),h=Object(u[\"a\"])(E,2),R=h[0],M=h[1],T=Object(f[\"useState\"])(y),I=Object(u[\"a\"])(T,2),V=I[0],q=I[1],z=Object(f[\"useState\"])(!1),B=Object(u[\"a\"])(z,2),L=B[0],D=B[1],F=m[\"a\"].useForm(),G=Object(u[\"a\"])(F,1),Q=G[0],Y=function(e,t,a){q(Object(o[\"a\"])(Object(o[\"a\"])({},V),{},{pageNum:e.current,pageSize:e.pageSize}))},H=function(e){O[\"c\"].push({pathname:\"/risk/templateList/template/\".concat(e.publishStatus?\"view\":\"edit\",\"/\").concat(e.riskaskId),query:{askType:e.askType,showOperation:!0}})},J=function(e){O[\"c\"].push({pathname:\"/risk/templateList/template/edit/\".concat(0),query:{askType:e,showOperation:!1}})},A=function(){var t=e.dispatch;t({type:\"risk/getRiskQuestionnaireTemList\",payload:V,callback:function(e){M(e)}})};Object(f[\"useEffect\"])((function(){A()}),[V.pageNum,V.pageSize]);var K=function(){var t=e.dispatch;t({type:\"risk/riskAskSettingDetail\",callback:function(e){D(1===e.needMessage),p.map((function(t,a){e?null!==e[t.name]&&void 0!==e[t.name]||(e[t.name]=p[a].defaultValue):(e={},e[t.name]=p[a].defaultValue)})),Q.setFieldsValue(Object(o[\"a\"])({},e))}})};Object(f[\"useEffect\"])((function(){K()}),[]);var P=function(t){var a=e.dispatch;a({type:\"risk/riskAskSettingUpdate\",payload:Object(o[\"a\"])(Object(o[\"a\"])({},t),{},{vipNeedRisk:void 0===t.vipNeedRisk?0:t.vipNeedRisk,needMessage:void 0===t.needMessage?0:t.needMessage,noticeContent:void 0===t.noticeContent?\"\":t.noticeContent}),callback:function(e){console.log(e),1008===e.code?S(\"success\",\"\\u63d0\\u9192\",\"\\u4fdd\\u5b58\\u6210\\u529f\"):(S(\"error\",\"\\u63d0\\u9192\",e.message||\"\\u4fdd\\u5b58\\u5931\\u8d25\\uff01\"),K())}})},U=function(){K(),A()},W=function(e){e[0]&&\"needMessage\"===e[0].name.toString()&&(1===e[0].value?D(!0):D(!1))};return k.a.createElement(g[\"a\"],{title:\"\\u98ce\\u9669\\u6d4b\\u8bc4\\u95ee\\u5377\\u6a21\\u677f\\u5217\\u8868\",extra:k.a.createElement(c[\"a\"],{type:\"primary\",onClick:U},\"\\u5237\\u65b0\\u9875\\u9762\")},k.a.createElement(n[\"a\"],{title:\"\\u6295\\u8d44\\u8005\\u98ce\\u9669\\u6d4b\\u8bc4\\u95ee\\u5377\\u4f7f\\u7528\\u914d\\u7f6e\",style:{marginBottom:20}},k.a.createElement(m[\"a\"],Object(i[\"a\"])({form:Q,onFieldsChange:W},C,{onFinish:P}),p.map((function(e,t){return k.a.createElement(w,{name:e.name,key:e.key,label:e.label,initialValues:e.defaultValue,rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\"}]},k.a.createElement(s[\"a\"].Group,null,k.a.createElement(s[\"a\"],{value:1},\"\\u9700\\u8981\\u8fdb\\u884c\\u98ce\\u9669\\u6d4b\\u8bc4\"),k.a.createElement(s[\"a\"],{value:0},\"\\u4e0d\\u9700\\u8981\\u8fdb\\u884c\\u98ce\\u9669\\u6d4b\\u8bc4\\uff0c\\u9ed8\\u8ba4\\u4e3aC5\")))})),k.a.createElement(w,{label:\"\\u98ce\\u6d4b\\u5b8c\\u6210\\u540e\\u77ed\\u4fe1\\u901a\\u77e5\",name:\"needMessage\",rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\"}]},k.a.createElement(s[\"a\"].Group,null,k.a.createElement(s[\"a\"],{value:0},\"\\u4e0d\\u901a\\u77e5\"),k.a.createElement(s[\"a\"],{value:1},\"\\u901a\\u77e5\"))),L&&k.a.createElement(w,{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\"}],label:\" \",colon:!1,name:\"noticeContent\"},k.a.createElement(N,{autoSize:{minRows:4},placeholder:\"\\u8bf7\\u8f93\\u5165\",maxLength:\"140\",showCount:!0})),k.a.createElement(l[\"a\"],null,k.a.createElement(r[\"a\"],{offset:20,span:4},k.a.createElement(w,null,k.a.createElement(c[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u4fdd\\u5b58\")))))),k.a.createElement(n[\"a\"],{title:\"\\u95ee\\u5377\\u914d\\u7f6e\\u5217\\u8868\"},k.a.createElement(\"div\",{className:x.a.btnG,style:{display:a?\"unset\":\"none\"}},k.a.createElement(c[\"a\"],{onClick:function(e){return J(1)},type:\"primary\",className:x.a.firstBtn},\"\\u65b0\\u5efa\\u81ea\\u7136\\u4eba\\u95ee\\u5377\\u6a21\\u677f\"),k.a.createElement(c[\"a\"],{onClick:function(e){return J(2)},type:\"primary\"},\"\\u65b0\\u5efa\\u673a\\u6784\\u95ee\\u5377\\u6a21\\u677f\")),k.a.createElement(b[\"a\"],{columns:d,dataSource:R.data||[],total:R.total,pageNum:V.pageNum,rowKey:\"riskaskId\",scroll:{x:\"100%\"},onChange:function(e,t,a){return Y(e,t,a)},rowSelection:null,loading:e.loading})))};t[\"default\"]=Object(y[\"connect\"])((function(e){var t=e.risk,a=e.loading;return{risk:t,loading:a.effects[\"risk/getRiskQuestionnaireTemList\"]}}))(R)},MxP2:function(e,t,a){e.exports={btnG:\"antd-pro-pages-risk-template-list-styles-btnG\",firstBtn:\"antd-pro-pages-risk-template-list-styles-firstBtn\",operation:\"antd-pro-pages-risk-template-list-styles-operation\"}}}]);","name":"p__risk__templateList.async.js?v=1646123553782","map":{"version":3,"sources":["p__risk__templateList.async.js?v=1646123553782"],"names":["window","push","EpFQ","module","__webpack_exports__","__webpack_require__","r","antd_es_card__WEBPACK_IMPORTED_MODULE_1__","E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__","antd_es_row__WEBPACK_IMPORTED_MODULE_4__","antd_es_col__WEBPACK_IMPORTED_MODULE_6__","antd_es_radio__WEBPACK_IMPORTED_MODULE_8__","antd_es_button__WEBPACK_IMPORTED_MODULE_10__","E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__","E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__","antd_es_notification__WEBPACK_IMPORTED_MODULE_14__","antd_es_form__WEBPACK_IMPORTED_MODULE_16__","antd_es_input__WEBPACK_IMPORTED_MODULE_18__","react__WEBPACK_IMPORTED_MODULE_19__","react__WEBPACK_IMPORTED_MODULE_19___default","n","_ant_design_pro_layout__WEBPACK_IMPORTED_MODULE_20__","_pages_components_MXTable__WEBPACK_IMPORTED_MODULE_21__","dva__WEBPACK_IMPORTED_MODULE_22__","moment__WEBPACK_IMPORTED_MODULE_23__","moment__WEBPACK_IMPORTED_MODULE_23___default","umi__WEBPACK_IMPORTED_MODULE_24__","_utils_utils__WEBPACK_IMPORTED_MODULE_25__","_styles_less_modules__WEBPACK_IMPORTED_MODULE_26__","_styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default","TextArea","FormItem","Item","formItemLayout","labelCol","xs","span","sm","wrapperCol","openNotification","type","message","description","placement","duration","TemplateList","props","_getPermission","Object","authEdit","riskQuestMap","label","name","key","defaultValue","columns","title","dataIndex","align","render","data","sorter","a","b","createTime","format","publishStatus","createElement","className","operation","onClick","e","editOrViewTemplate","style","display","initPageData","pageNum","pageSize","_useState","_useState2","dataSource","setDataSource","_useState3","_useState4","pageData","changePageData","_useState5","_useState6","showTxt","setShowTxt","_Form$useForm","useForm","_Form$useForm2","form","_tableChange","p","s","current","pathname","concat","riskaskId","query","askType","showOperation","addTemplate","RefreshPage","dispatch","payload","callback","res","getRiskAskSettingDetail","needMessage","map","item","index","undefined","setFieldsValue","saveIsRiskAssessment","values","vipNeedRisk","noticeContent","console","log","code","updatePage","onFormChange","toString","value","extra","marginBottom","onFieldsChange","onFinish","initialValues","rules","required","Group","colon","autoSize","minRows","placeholder","maxLength","showCount","offset","htmlType","btnG","firstBtn","total","rowKey","scroll","x","onChange","rowSelection","loading","_ref","risk","effects","MxP2","exports"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[79],{\n\n/***/ \"EpFQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var antd_es_card_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"IzEo\");\n/* harmony import */ var antd_es_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"bx4M\");\n/* harmony import */ var E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"0Owb\");\n/* harmony import */ var antd_es_row_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"14J3\");\n/* harmony import */ var antd_es_row__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"BMrR\");\n/* harmony import */ var antd_es_col_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"jCWc\");\n/* harmony import */ var antd_es_col__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"kPKH\");\n/* harmony import */ var antd_es_radio_style__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"7Kak\");\n/* harmony import */ var antd_es_radio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"9yH6\");\n/* harmony import */ var antd_es_button_style__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"+L6B\");\n/* harmony import */ var antd_es_button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"2/Rp\");\n/* harmony import */ var E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"k1fw\");\n/* harmony import */ var E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"tJVT\");\n/* harmony import */ var antd_es_notification_style__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"/xke\");\n/* harmony import */ var antd_es_notification__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"TeRw\");\n/* harmony import */ var antd_es_form_style__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"y8nQ\");\n/* harmony import */ var antd_es_form__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"Vl3Y\");\n/* harmony import */ var antd_es_input_style__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"5NDa\");\n/* harmony import */ var antd_es_input__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"5rEg\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _ant_design_pro_layout__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"Hx5s\");\n/* harmony import */ var _pages_components_MXTable__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"tQHx\");\n/* harmony import */ var dva__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"MuoO\");\n/* harmony import */ var dva__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(dva__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"wd/R\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var umi__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"9kvl\");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"+n12\");\n/* harmony import */ var _styles_less_modules__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"MxP2\");\n/* harmony import */ var _styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(_styles_less_modules__WEBPACK_IMPORTED_MODULE_26__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TextArea = antd_es_input__WEBPACK_IMPORTED_MODULE_18__[/* default */ \"a\"].TextArea;\nvar FormItem = antd_es_form__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].Item;\nvar formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 4\n    },\n    sm: {\n      span: 4\n    }\n  },\n  wrapperCol: {\n    xs: {\n      span: 8\n    },\n    sm: {\n      span: 12\n    }\n  }\n};\n\nvar openNotification = function openNotification(type, message, description, placement, duration) {\n  antd_es_notification__WEBPACK_IMPORTED_MODULE_14__[\"default\"][type || 'info']({\n    message: message,\n    description: description,\n    placement: placement,\n    duration: duration || 3\n  });\n};\n\nvar TemplateList = function TemplateList(props) {\n  var _getPermission = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_25__[/* getPermission */ \"o\"])(50200),\n      authEdit = _getPermission.authEdit;\n\n  var riskQuestMap = [{\n    label: '产品类投资者',\n    name: 'productNeedRisk',\n    key: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_25__[/* getRandomKey */ \"q\"])(4),\n    defaultValue: 0\n  }, {\n    label: '自然人类投资者',\n    name: 'peopleNeedRisk',\n    key: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_25__[/* getRandomKey */ \"q\"])(4),\n    defaultValue: 1\n  }, {\n    label: '机构类投资者',\n    name: 'institutionsNeedRisk',\n    key: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_25__[/* getRandomKey */ \"q\"])(4),\n    defaultValue: 1\n  }, {\n    label: 'vip类投资者',\n    name: 'vipNeedRisk',\n    key: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_25__[/* getRandomKey */ \"q\"])(4),\n    defaultValue: 1\n  }];\n  var columns = [{\n    title: '问卷类型',\n    dataIndex: 'askType',\n    align: 'center',\n    render: function render(data) {\n      if (data === 1) return '个人风险测评问卷';\n      if (data === 2 || data === 3) return '公司风险测评问卷';\n      return '--';\n    }\n  }, {\n    title: '问卷版本',\n    dataIndex: 'versionNumber',\n    align: 'center'\n  }, {\n    title: '模板状态',\n    dataIndex: 'isDelete',\n    align: 'center',\n    render: function render(data) {\n      if (data === 0) return '生效';\n      if (data === 1) return '失效';\n    }\n  }, {\n    title: '发布状态',\n    dataIndex: 'publishStatus',\n    align: 'center',\n    render: function render(data) {\n      if (data === 0) return '编辑';\n      if (data === 1) return '已发布';\n    }\n  }, {\n    title: '创建人',\n    dataIndex: 'managerUserName',\n    align: 'center'\n  }, {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    align: 'center',\n    sorter: function sorter(a, b) {\n      return a.createTime - b.createTime;\n    },\n    render: function render(data) {\n      return moment__WEBPACK_IMPORTED_MODULE_23___default()(data).format('YYYY-MM-DD');\n    }\n  }, {\n    title: '操作',\n    align: 'center',\n    render: function render(data) {\n      if (data.publishStatus) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(\"span\", {\n          className: _styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default.a.operation,\n          onClick: function onClick(e) {\n            return editOrViewTemplate(data);\n          }\n        }, \"\\u67E5\\u770B\");\n      } else {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(\"div\", null, authEdit ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(\"span\", {\n          style: {\n            display: authEdit ? 'unset' : 'none'\n          },\n          className: _styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default.a.operation,\n          onClick: function onClick(e) {\n            return editOrViewTemplate(data);\n          }\n        }, \"\\u7F16\\u8F91\") : '--');\n      }\n    }\n  }];\n  var initPageData = {\n    // 当前的分页数据\n    pageNum: 1,\n    pageSize: 20\n  };\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_19__[\"useState\"])({}),\n      _useState2 = Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(_useState, 2),\n      dataSource = _useState2[0],\n      setDataSource = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_19__[\"useState\"])(initPageData),\n      _useState4 = Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(_useState3, 2),\n      pageData = _useState4[0],\n      changePageData = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_19__[\"useState\"])(false),\n      _useState6 = Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(_useState5, 2),\n      showTxt = _useState6[0],\n      setShowTxt = _useState6[1]; // const [showMessage, setShowMessage] = useState(false);\n\n\n  var _Form$useForm = antd_es_form__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].useForm(),\n      _Form$useForm2 = Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _tableChange = function _tableChange(p, e, s) {\n    changePageData(Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])(Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])({}, pageData), {}, {\n      pageNum: p.current,\n      pageSize: p.pageSize\n    }));\n  };\n\n  var editOrViewTemplate = function editOrViewTemplate(data) {\n    umi__WEBPACK_IMPORTED_MODULE_24__[/* history */ \"c\"].push({\n      pathname: \"/risk/templateList/template/\".concat(data.publishStatus ? 'view' : 'edit', \"/\").concat(data.riskaskId),\n      query: {\n        askType: data.askType,\n        showOperation: true\n      }\n    });\n  };\n\n  var addTemplate = function addTemplate(askType) {\n    // history.push(`/risk/templateList/template/edit?askType=${askType}&showOperation=false`)\n    umi__WEBPACK_IMPORTED_MODULE_24__[/* history */ \"c\"].push({\n      pathname: \"/risk/templateList/template/edit/\".concat(0),\n      query: {\n        askType: askType,\n        showOperation: false\n      }\n    });\n  };\n\n  var RefreshPage = function RefreshPage() {\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'risk/getRiskQuestionnaireTemList',\n      payload: pageData,\n      callback: function callback(res) {\n        // res.data.forEach((item,index)=>{\n        //     item.riskaskId = index\n        // })\n        setDataSource(res);\n      }\n    });\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_19__[\"useEffect\"])(function () {\n    RefreshPage();\n  }, [pageData.pageNum, pageData.pageSize]);\n\n  var getRiskAskSettingDetail = function getRiskAskSettingDetail() {\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'risk/riskAskSettingDetail',\n      callback: function callback(res) {\n        setShowTxt(res.needMessage === 1); // setShowMessage(res.vipNeedRisk ===1);\n\n        riskQuestMap.map(function (item, index) {\n          if (res) {\n            if (res[item.name] === null || res[item.name] === undefined) {\n              res[item.name] = riskQuestMap[index].defaultValue;\n            }\n          } else {\n            res = {};\n            res[item.name] = riskQuestMap[index].defaultValue;\n          }\n        });\n        form.setFieldsValue(Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])({}, res));\n      }\n    });\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_19__[\"useEffect\"])(function () {\n    getRiskAskSettingDetail();\n  }, []);\n\n  var saveIsRiskAssessment = function saveIsRiskAssessment(values) {\n    var dispatch = props.dispatch;\n    dispatch({\n      type: 'risk/riskAskSettingUpdate',\n      payload: Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])(Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])({}, values), {}, {\n        vipNeedRisk: values.vipNeedRisk === undefined ? 0 : values.vipNeedRisk,\n        needMessage: values.needMessage === undefined ? 0 : values.needMessage,\n        noticeContent: values.noticeContent === undefined ? '' : values.noticeContent\n      }),\n      callback: function callback(res) {\n        console.log(res);\n\n        if (res.code === 1008) {\n          openNotification('success', '提醒', '保存成功');\n        } else {\n          openNotification('error', '提醒', res.message || '保存失败！');\n          getRiskAskSettingDetail();\n        }\n      }\n    });\n  };\n\n  var updatePage = function updatePage() {\n    getRiskAskSettingDetail();\n    RefreshPage();\n  };\n\n  var onFormChange = function onFormChange(values) {\n    if (values[0] && values[0].name.toString() === 'needMessage') {\n      if (values[0].value === 1) {\n        setShowTxt(true);\n      } else {\n        setShowTxt(false);\n      }\n    } // if (values[0] && values[0].name.toString() === 'vipNeedRisk') {\n    //     if (values[0].value === 1) {\n    //         setShowMessage(true);\n    //     } else {\n    //         form.setFieldsValue({ needMessage:0 });\n    //         setShowMessage(false);\n    //     }\n    // }\n\n  };\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_ant_design_pro_layout__WEBPACK_IMPORTED_MODULE_20__[/* PageHeaderWrapper */ \"a\"], {\n    title: \"\\u98CE\\u9669\\u6D4B\\u8BC4\\u95EE\\u5377\\u6A21\\u677F\\u5217\\u8868\",\n    extra: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n      type: \"primary\",\n      onClick: updatePage\n    }, \"\\u5237\\u65B0\\u9875\\u9762\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_card__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n    title: \"\\u6295\\u8D44\\u8005\\u98CE\\u9669\\u6D4B\\u8BC4\\u95EE\\u5377\\u4F7F\\u7528\\u914D\\u7F6E\",\n    style: {\n      marginBottom: 20\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"], Object(E_MRP_vip_manager_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({\n    form: form,\n    onFieldsChange: onFormChange\n  }, formItemLayout, {\n    onFinish: saveIsRiskAssessment\n  }), riskQuestMap.map(function (item, index) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(FormItem, {\n      name: item.name,\n      key: item.key,\n      label: item.label,\n      initialValues: item.defaultValue,\n      rules: [{\n        // required: managerUserId === null,\n        required: true,\n        message: '请选择'\n      }]\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].Group, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n      value: 1\n    }, \"\\u9700\\u8981\\u8FDB\\u884C\\u98CE\\u9669\\u6D4B\\u8BC4\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n      value: 0\n    }, \"\\u4E0D\\u9700\\u8981\\u8FDB\\u884C\\u98CE\\u9669\\u6D4B\\u8BC4\\uFF0C\\u9ED8\\u8BA4\\u4E3AC5\")));\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(FormItem, {\n    label: \"\\u98CE\\u6D4B\\u5B8C\\u6210\\u540E\\u77ED\\u4FE1\\u901A\\u77E5\",\n    name: \"needMessage\",\n    rules: [{\n      // required: managerUserId === null,\n      required: true,\n      message: '请选择'\n    }]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].Group, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n    value: 0\n  }, \"\\u4E0D\\u901A\\u77E5\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n    value: 1\n  }, \"\\u901A\\u77E5\"))), showTxt && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(FormItem, {\n    rules: [{\n      // required: managerUserId === null,\n      required: true,\n      message: '请输入'\n    }],\n    label: \" \",\n    colon: false,\n    name: \"noticeContent\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(TextArea, {\n    autoSize: {\n      minRows: 4\n    },\n    placeholder: \"\\u8BF7\\u8F93\\u5165\",\n    maxLength: \"140\",\n    showCount: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_row__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_col__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n    offset: 20,\n    span: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(FormItem, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\u4FDD\\u5B58\")))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_card__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n    title: \"\\u95EE\\u5377\\u914D\\u7F6E\\u5217\\u8868\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(\"div\", {\n    className: _styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default.a.btnG,\n    style: {\n      display: authEdit ? 'unset' : 'none'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n    onClick: function onClick(e) {\n      return addTemplate(1);\n    },\n    type: \"primary\",\n    className: _styles_less_modules__WEBPACK_IMPORTED_MODULE_26___default.a.firstBtn\n  }, \"\\u65B0\\u5EFA\\u81EA\\u7136\\u4EBA\\u95EE\\u5377\\u6A21\\u677F\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n    onClick: function onClick(e) {\n      return addTemplate(2);\n    },\n    type: \"primary\"\n  }, \"\\u65B0\\u5EFA\\u673A\\u6784\\u95EE\\u5377\\u6A21\\u677F\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_pages_components_MXTable__WEBPACK_IMPORTED_MODULE_21__[/* default */ \"a\"], {\n    columns: columns,\n    dataSource: dataSource.data || [],\n    total: dataSource.total,\n    pageNum: pageData.pageNum,\n    rowKey: \"riskaskId\",\n    scroll: {\n      x: '100%'\n    },\n    onChange: function onChange(p, e, s) {\n      return _tableChange(p, e, s);\n    },\n    rowSelection: null,\n    loading: props.loading\n  })));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(dva__WEBPACK_IMPORTED_MODULE_22__[\"connect\"])(function (_ref) {\n  var risk = _ref.risk,\n      loading = _ref.loading;\n  return {\n    risk: risk,\n    loading: loading.effects['risk/getRiskQuestionnaireTemList']\n  };\n})(TemplateList));\n\n/***/ }),\n\n/***/ \"MxP2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnG\":\"antd-pro-pages-risk-template-list-styles-btnG\",\"firstBtn\":\"antd-pro-pages-risk-template-list-styles-firstBtn\",\"operation\":\"antd-pro-pages-risk-template-list-styles-operation\"};\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["E:/公司代码/MRP报表/vip-manager/src/pages/risk/templateList/index.jsx","E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\bundler-webpack\\lib\\webpack\\plugins\\mini-css-extract-plugin\\src\\loader.js??ref--13-oneOf-0-0!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\css-loader\\cjs.js??ref--13-oneOf-0-1!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\postcss-loader\\src\\index.js??postcss!E:\\公司代码\\MRP报表\\vip-manager\\node_modules\\@umijs\\deps\\compiled\\less-loader\\cjs.js??ref--13-oneOf-0-3!E:\\公司代码\\MRP报表\\vip-manager\\src\\pages\\risk\\templateList\\styles.less?modules"],"names":["TextArea","FormItem","Item","formItemLayout","labelCol","xs","span","sm","wrapperCol","openNotification","type","message","description","placement","duration","TemplateList","props","getPermission","authEdit","riskQuestMap","label","name","key","getRandomKey","defaultValue","columns","title","dataIndex","align","render","data","sorter","a","b","createTime","moment","format","publishStatus","styles","operation","e","editOrViewTemplate","display","initPageData","pageNum","pageSize","useState","dataSource","setDataSource","pageData","changePageData","showTxt","setShowTxt","useForm","form","_tableChange","p","s","current","history","push","pathname","riskaskId","query","askType","showOperation","addTemplate","RefreshPage","dispatch","payload","callback","res","useEffect","getRiskAskSettingDetail","needMessage","map","item","index","undefined","setFieldsValue","saveIsRiskAssessment","values","vipNeedRisk","noticeContent","console","log","code","updatePage","onFormChange","toString","value","marginBottom","required","minRows","btnG","firstBtn","total","x","loading","connect","risk","effects"],"mappings":"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","file":"x","sourcesContent":["import React, { useState, useEffect, useForm } from 'react';\nimport { PageHeaderWrapper } from '@ant-design/pro-layout';\nimport { Button, Card, Radio, Row, Col, notification, Input, Form } from 'antd';\nimport MXTable from '@/pages/components/MXTable';\nimport { connect } from 'dva';\nimport moment from 'moment';\nimport { history } from 'umi';\nimport { getPermission, getRandomKey } from '@/utils/utils';\nimport styles from './styles.less';\n\nconst { TextArea } = Input;\nconst FormItem = Form.Item;\nconst formItemLayout = {\n    labelCol: {\n        xs: { span: 4 },\n        sm: { span: 4 }\n    },\n    wrapperCol: {\n        xs: { span: 8 },\n        sm: { span: 12 }\n    }\n};\n\nconst openNotification = (type, message, description, placement, duration) => {\n    notification[type || 'info']({\n        message,\n        description,\n        placement,\n        duration: duration || 3\n    });\n};\nconst TemplateList = (props) => {\n    const { authEdit } = getPermission(50200);\n    const riskQuestMap = [\n        {\n            label: '产品类投资者',\n            name: 'productNeedRisk',\n            key: getRandomKey(4),\n            defaultValue: 0\n        },\n        {\n            label: '自然人类投资者',\n            name: 'peopleNeedRisk',\n            key: getRandomKey(4),\n            defaultValue: 1\n        },\n        {\n            label: '机构类投资者',\n            name: 'institutionsNeedRisk',\n            key: getRandomKey(4),\n            defaultValue: 1\n        },\n        {\n            label: 'vip类投资者',\n            name: 'vipNeedRisk',\n            key: getRandomKey(4),\n            defaultValue: 1\n        }\n    ];\n    const columns = [\n        {\n            title: '问卷类型',\n            dataIndex: 'askType',\n            align: 'center',\n            render(data) {\n                if (data === 1) return '个人风险测评问卷';\n                if (data === 2 || data === 3) return '公司风险测评问卷';\n                return '--';\n            }\n        },\n        {\n            title: '问卷版本',\n            dataIndex: 'versionNumber',\n            align: 'center'\n        },\n        {\n            title: '模板状态',\n            dataIndex: 'isDelete',\n            align: 'center',\n            render(data) {\n                if (data === 0) return '生效';\n                if (data === 1) return '失效';\n            }\n        },\n        {\n            title: '发布状态',\n            dataIndex: 'publishStatus',\n            align: 'center',\n            render(data) {\n                if (data === 0) return '编辑';\n                if (data === 1) return '已发布';\n            }\n        },\n        {\n            title: '创建人',\n            dataIndex: 'managerUserName',\n            align: 'center'\n        },\n        {\n            title: '创建时间',\n            dataIndex: 'createTime',\n            align: 'center',\n            sorter: (a, b) => a.createTime - b.createTime,\n            render(data) {\n                return moment(data).format('YYYY-MM-DD');\n            }\n        },\n        {\n            title: '操作',\n            align: 'center',\n            render(data) {\n                if (data.publishStatus) {\n                    return (\n                        <span\n                            className={styles.operation}\n                            onClick={(e) => editOrViewTemplate(data)}\n                        >\n                            查看\n                        </span>\n                    );\n                } else {\n                    return (\n                        <div>\n                            {authEdit ? (\n                                <span\n                                    style={{\n                                        display: authEdit ? 'unset' : 'none'\n                                    }}\n                                    className={styles.operation}\n                                    onClick={(e) => editOrViewTemplate(data)}\n                                >\n                                    编辑\n                                </span>\n                            ) : (\n                                '--'\n                            )}\n                        </div>\n                    );\n                }\n            }\n        }\n    ];\n    const initPageData = {\n        // 当前的分页数据\n        pageNum: 1,\n        pageSize: 20\n    };\n    const [dataSource, setDataSource] = useState({});\n    const [pageData, changePageData] = useState(initPageData);\n    const [showTxt, setShowTxt] = useState(false);\n    // const [showMessage, setShowMessage] = useState(false);\n    const [form] = Form.useForm();\n    const _tableChange = (p, e, s) => {\n        changePageData({\n            ...pageData,\n            pageNum: p.current,\n            pageSize: p.pageSize\n        });\n    };\n    const editOrViewTemplate = (data) => {\n        history.push({\n            pathname: `/risk/templateList/template/${data.publishStatus ? 'view' : 'edit'}/${data.riskaskId\n                }`,\n            query: {\n                askType: data.askType,\n                showOperation: true\n            }\n        });\n    };\n\n    const addTemplate = (askType) => {\n        // history.push(`/risk/templateList/template/edit?askType=${askType}&showOperation=false`)\n        history.push({\n            pathname: `/risk/templateList/template/edit/${0}`,\n            query: {\n                askType,\n                showOperation: false\n            }\n        });\n    };\n    const RefreshPage = () => {\n        const { dispatch } = props;\n        dispatch({\n            type: 'risk/getRiskQuestionnaireTemList',\n            payload: pageData,\n            callback(res) {\n                // res.data.forEach((item,index)=>{\n                //     item.riskaskId = index\n                // })\n                setDataSource(res);\n            }\n        });\n    };\n    useEffect(() => {\n        RefreshPage();\n    }, [pageData.pageNum, pageData.pageSize]);\n    const getRiskAskSettingDetail = () => {\n        const { dispatch } = props;\n        dispatch({\n            type: 'risk/riskAskSettingDetail',\n            callback(res) {\n                setShowTxt(res.needMessage === 1);\n                // setShowMessage(res.vipNeedRisk ===1);\n                riskQuestMap.map((item, index) => {\n                    if (res) {\n                        if (res[item.name] === null || res[item.name] === undefined) {\n                            res[item.name] = riskQuestMap[index].defaultValue;\n                        }\n                    } else {\n                        res = {};\n                        res[item.name] = riskQuestMap[index].defaultValue;\n                    }\n                });\n                form.setFieldsValue({ ...res });\n\n            }\n        });\n    };\n\n    useEffect(() => {\n        getRiskAskSettingDetail();\n    }, []);\n\n    const saveIsRiskAssessment = (values) => {\n        const { dispatch } = props;\n        dispatch({\n            type: 'risk/riskAskSettingUpdate',\n            payload: {\n                ...values,\n                vipNeedRisk: values.vipNeedRisk === undefined ? 0 : values.vipNeedRisk,\n                needMessage: values.needMessage === undefined ? 0 : values.needMessage,\n                noticeContent: values.noticeContent === undefined ? '' : values.noticeContent\n            },\n            callback(res) {\n                console.log(res);\n                if (res.code === 1008) {\n                    openNotification('success', '提醒', '保存成功');\n                } else {\n                    openNotification('error', '提醒', res.message || '保存失败！');\n                    getRiskAskSettingDetail();\n                }\n            }\n        });\n    };\n\n    const updatePage = () => {\n        getRiskAskSettingDetail();\n        RefreshPage();\n    };\n    const onFormChange = (values) => {\n        if (values[0] && values[0].name.toString() === 'needMessage') {\n            if (values[0].value === 1) {\n                setShowTxt(true);\n            } else {\n                setShowTxt(false);\n            }\n        }\n        // if (values[0] && values[0].name.toString() === 'vipNeedRisk') {\n        //     if (values[0].value === 1) {\n        //         setShowMessage(true);\n        //     } else {\n        //         form.setFieldsValue({ needMessage:0 });\n        //         setShowMessage(false);\n        //     }\n        // }\n    };\n    return (\n        <PageHeaderWrapper\n            title=\"风险测评问卷模板列表\"\n            extra={\n                <Button type=\"primary\" onClick={updatePage}>\n                    刷新页面\n                </Button>\n            }\n        >\n            <Card title=\"投资者风险测评问卷使用配置\" style={{ marginBottom: 20 }}>\n                <Form\n                    form={form}\n                    onFieldsChange={onFormChange}\n                    {...formItemLayout}\n                    onFinish={saveIsRiskAssessment}\n                >\n                    {\n                        riskQuestMap.map((item, index) => {\n                            return (\n                                <FormItem\n                                    name={item.name}\n                                    key={item.key}\n                                    label={item.label}\n                                    initialValues={item.defaultValue}\n                                    rules={[\n                                        {\n                                            // required: managerUserId === null,\n                                            required: true,\n                                            message: '请选择'\n                                        }\n                                    ]}\n                                >\n                                    <Radio.Group>\n                                        <Radio value={1}>需要进行风险测评</Radio>\n                                        <Radio value={0}>不需要进行风险测评，默认为C5</Radio>\n                                    </Radio.Group>\n                                </FormItem>\n                            );\n                        })\n                    }\n                    <FormItem\n                        label=\"风测完成后短信通知\"\n                        name=\"needMessage\"\n                        rules={[\n                            {\n                                // required: managerUserId === null,\n                                required: true,\n                                message: '请选择'\n                            }\n                        ]}\n                    >\n                        <Radio.Group>\n                            <Radio value={0}>不通知</Radio>\n                            <Radio value={1}>通知</Radio>\n                        </Radio.Group>\n                    </FormItem>\n                    {showTxt && (\n                        <FormItem\n                            rules={[\n                                {\n                                    // required: managerUserId === null,\n                                    required: true,\n                                    message: '请输入'\n                                }\n                            ]}\n                            label=\" \"\n                            colon={false}\n                            name=\"noticeContent\"\n                        >\n                            <TextArea autoSize={{ minRows: 4 }} placeholder=\"请输入\" maxLength=\"140\" showCount />\n                        </FormItem>\n                    )}\n\n\n\n                    <Row>\n                        <Col offset={20} span={4}>\n                            <FormItem>\n                                <Button type=\"primary\" htmlType=\"submit\">\n                                    保存\n                                </Button>\n                            </FormItem>\n                        </Col>\n                    </Row>\n                </Form>\n            </Card>\n\n            <Card title=\"问卷配置列表\">\n                <div\n                    className={styles.btnG}\n                    style={{\n                        display: authEdit ? 'unset' : 'none'\n                    }}\n                >\n                    <Button\n                        onClick={(e) => addTemplate(1)}\n                        type=\"primary\"\n                        className={styles.firstBtn}\n                    >\n                        新建自然人问卷模板\n                    </Button>\n                    <Button onClick={(e) => addTemplate(2)} type=\"primary\">\n                        新建机构问卷模板\n                    </Button>\n                </div>\n                <MXTable\n                    columns={columns}\n                    dataSource={dataSource.data || []}\n                    total={dataSource.total}\n                    pageNum={pageData.pageNum}\n                    rowKey=\"riskaskId\"\n                    scroll={{ x: '100%' }}\n                    onChange={(p, e, s) => _tableChange(p, e, s)}\n                    rowSelection={null}\n                    loading={props.loading}\n                />\n            </Card>\n        </PageHeaderWrapper>\n    );\n};\n\nexport default connect(({ risk, loading }) => ({\n    risk,\n    loading: loading.effects['risk/getRiskQuestionnaireTemList']\n}))(TemplateList);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnG\":\"antd-pro-pages-risk-template-list-styles-btnG\",\"firstBtn\":\"antd-pro-pages-risk-template-list-styles-firstBtn\",\"operation\":\"antd-pro-pages-risk-template-list-styles-operation\"};"]}}